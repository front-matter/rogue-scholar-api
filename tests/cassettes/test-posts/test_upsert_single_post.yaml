interactions:
- request:
    body: '{"authors": [{"name": "Ma\u00eblle Salmon", "url": "https://orcid.org/0000-0002-2815-0399"},
      {"name": "Yanina Bellini Saibene", "url": "https://orcid.org/0000-0002-4522-7466"}],
      "blog_name": "rOpenSci - open tools for open science", "blog_slug": "ropensci",
      "content_text": "As part of our [multilingual publishing\nproject](/multilingual-publishing/),
      and with [funding from the R\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\nwe''ve
      worked on the R package\n[babeldown](https://docs.ropensci.org/babeldown/) for
      translating\nMarkdown-based content using the DeepL API.In this tech note, we''ll
      show\nhow you can use babeldown to translate a Hugo blog post!\n\n## Motivation\n\nTranslating
      a Markdown blog post from your R console is not only more\ncomfortable (when
      you''ve already written said blog post in R), but also\nless frustrating.With
      babeldown, compared to copy-pasting the content of\na blog post into some translation
      service, the Markdown syntax won''t be\nbroken^[1](#fn:1){.footnote-ref role=\"doc-noteref\"}^,
      and code chunks\nwon''t be translated.This works, because under the hood, babeldown
      uses\n[tinkr](https://docs.ropensci.org/tinkr) to produce XML which it then\nsends
      to the DeepL API, flagging some tags as not to be translated. It\nthen converts
      the XML translated by DeepL back into Markdown again.\n\nNow, as you might expect
      this machine-translated content isn''t perfect\nyet!You will still need a human
      or two to review and amend the\ntranslation.Why not have the humans translate
      the post from scratch\nthen?We have observed that editing an automatic translation
      is faster\nthan translating the whole post, and that it frees up mental space
      for\nfocusing on implementing translation rules such as gender-neutral\nphrasing.\n\n##
      Setup\n\n### Pre-requisites on the Hugo website\n\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\nassumes
      the Hugo website uses\n\n- leaf bundles (each post in a folder,\n  `content/path-to-leaf-bundle/index.md`);\n-
      multilingualism so that a post in (for example) Spanish lives in\n  `content/path-to-leaf-bundle/index.es.md`.\n\nbabeldown
      could be extended work with other Hugo multilingual setups. If\nyou''d be interested
      in using babeldown with a different setup, please\nopen an issue in the [babeldown\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\n\nNote
      that babeldown won''t be able to determine the default language of\nyour website^[2](#fn:2){.footnote-ref
      role=\"doc-noteref\"}^ so even if\nyour website''s default language is English,
      babeldown will place an\nEnglish translation in a file called \".en.md\" not
      \".md\".Hugo will\nrecognize the new file all the same (at least in our setup).\n\n###
      DeepL pre-requisites\n\nFirst check that your desired source and target languages
      are supported\nby the DeepL API!Look up the [docs of the `source_lang` and\n`target_lang`
      API\nparameters](https://www.deepl.com/docs-api/translate-text) for a full\nlist.\n\nOnce
      you know you''ll be able to take advantage of the DeepL API, you''ll\nneed to
      create an account for [DeepL''s translation service\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\naccount requires registering a payment method with
      them.\n\n### R pre-requisites\n\nYou''ll need to install babeldown from rOpenSci
      R-universe:\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ninstall.packages(''babeldown'',
      repos = c(''https://ropensci.r-universe.dev'', ''https://cloud.r-project.org''))\n```\n:::\n\nThen,
      in each R session, set your DeepL API key via the environment\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\nretrieve it in your scripts like so:\n\n::: {.highlight}\n``` {.chroma
      tabindex=\"0\"}\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\"deepl\"))\n```\n:::\n\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\neach R session/script
      via\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nSys.setenv(\"DEEPL_API_URL\"
      = \"https://api.deepl.com\")\n```\n:::\n\n## Translation!\n\nYou could run the
      code below\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path
      = <path-to-post>,   source_lang = \"EN\",  target_lang = \"ES\",  formality
      = \"less\" # that''s how we roll here!)\n```\n:::\n\nbut we''d recommend a tad
      more work for your own good.\n\n## Translation using a Git/GitHub workflow\n\nIf
      you use version control, having the translation as a diff is very\nhandy!\n\n###
      First: In words and pictures\n\n- In the branch of your post (let''s call it
      \"new-post\") create a\n  placeholder: save your original blog post (`index.es.md`)
      under the\n  target blog post name (`index.en.md`) and commit it, then push.\n\n<figure>\n<img
      src=\"placeholder.png\"\nalt=\"Diagram with on the left the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;Hola&#39; and an
      image; on the right the leaf folder in the new-post branch with the post in
      Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image.\" />\n</figure>\n\n- Create a new
      branch, \"auto-translate\" for instance.\n- Run `babeldown::deepl_translate_hugo()`
      with `force = TRUE`.\n\n<figure>\n<img src=\"translate.png\"\nalt=\"Diagram
      with on the left the leaf folder in the auto-translate branch with the post
      in Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image; on the right the only thing that
      changed is that the content of the post with the English target filename is
      now &#39;hello&#39;.\" />\n</figure>\n\n- Commit and push the result.\n- Open
      a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of your post. The diff for the target blog\n  post will be the diff between
      the source and target languages! If you\n  have the good habit to start a new
      line after each sentence / sentence\n  part, it''s even better.\n\n<figure>\n<img
      src=\"pr.png\"\nalt=\"Drawing of the pull request from the auto-translate to
      the new-post branch where the difference is that the content of the post with
      the English target filename has now been translated to English.\" />\n</figure>\n\n-
      The human translators can then a open a second PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Again: In code\n\nNow let''s go over this again, but with a coding workflow.
      Here, we''ll\nuse fs and gert (but you do you!), and we''ll assume your current\ndirectory
      is the root of the website folder, and also the root of the\ngit repository.\n\n-
      In the post branch, (again, let''s call it \"new-post\"), save your\n  original
      blog post (`index.es.md`) under the target blog post name\n  (`index.en.md`)
      and commit it, then push.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nfs::file_copy(  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_add(file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_commit(\"Add
      translation placeholder\")gert::git_push()\n```\n:::\n\n- Create a new branch,
      \"auto-translate\" for instance.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ngert::git_branch_create(\"translation-tech-note\")\n```\n:::\n\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path = file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\nYou can also omit the `post_path` argument if you''re
      running the code\nfrom RStudio IDE and if the open and focused file (the one
      you see above\nyour console) is the post to be translated.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\n- Commit the result with the code below.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ngert::git_add(file.path(\"content\", \"blog\", \"2023-10-01-r-universe-interviews\",
      \"index.en.md\"))gert::git_commit(\"Add translation\")gert::git_push()\n```\n:::\n\n-
      Open a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of\n  `\"content/blog/2023-10-01-r-universe-interviews/index.en.md\"`.\n\n-
      The human translators can then a open a *second* PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Summary of branches and PRs\n\nIn the end there should be two to three branches:\n\n-
      branch A with blog post in Spanish and placeholder blog post for\n  English
      (with Spanish content) -- PR to main;\n- branch B with blog post automatically
      translated to English -- PR to\n  branch A;\n- Optionally branch C with blog
      post''s English automatic translation\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\n  by a human are made as PR review suggestions
      in the PR from B to A.\n\nThe PR are merged in this order:\n\n- PR to branch
      B;\n- PR to branch A;\n- PR to main.\n\n### Real example\n\n- [PR adding a post
      to the rOpenSci\n  blog](https://github.com/ropensci/roweb3/pull/629), notice
      it''s a PR\n  from the **\"r-universe-interviews\"** branch to the **\"main\"\n  (default)**
      branch;\n- [PR adding the automatic\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it''s\n  a PR to the **\"r-universe-interviews\"** branch.\n\n<figure>\n<img
      src=\"pr-diff.png\"\nalt=\"Screenshot of the files tab of the pull request adding
      the automatic translation, where we observe Spanish text in the YAML metadata
      and Markdown content has been translated to English.\" />\n</figure>\n\nYanina
      tweaked the automatic translation by suggesting changes on the\nPR, then accepting
      them.\n\n<figure>\n<img src=\"pr-comments.png\"\nalt=\"Screenshot of the main
      tab of the pull request adding the automatic translation, where we observe a
      comment by Yanina replacing the word &#39;article&#39; with &#39;blog post&#39;
      and fixing the name of &#39;R-universe&#39;.\" />\n</figure>\n\n### YAML fields\n\nBy
      default babeldown translates the YAML fields \"title\" and\n\"description\".If
      you have text in more of them, use the `yaml_fields`\nargument of `babeldown::deepl_translate_hugo()`.\n\nNote
      that if babeldown translates the title, it updates the slug.\n\n### Glossary\n\nImagine
      you have a few preferences for some words -- something you''ll\nbuild up over
      time.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nreadr::read_csv(  system.file(\"example-es-en.csv\",
      package = \"babeldown\"),   show_col_types = FALSE)\n```\n:::\n\n``` {tabindex=\"0\"}\n##
      # A tibble: 2 \u00d7 2##   Spanish     English   ##   <chr>       <chr>     ##
      1 paquete     package   ## 2 repositorio repository\n```\n\nYou can record these
      preferred translations in a glossary in your DeepL\naccount\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ndeepl_upsert_glossary(  <path-to-csv-file>,  glossary_name
      = \"rstats-glosario\",  target_lang = \"Spanish\",  source_lang = \"English\")\n```\n:::\n\nYou''d
      use the exact same code to *update* the glossary hence the name\n\"upsert\"
      for the function.You need one glossary per source language /\ntarget language
      pair: the English-Spanish glossary can''t be used for\nSpanish to English for
      instance.\n\nIn your `babeldown::deepl_translate_hugo()` call you then use the\nglossary
      name (here \"rstats-glosario\") for the `glossary` argument.\n\n### Formality\n\n`deepl_translate_hugo()`
      has a `formality` argument.Now, the DeepL API\nonly supports this for some languages
      as explained in the [documentation\nof the `formality` API\nparameter](https://www.deepl.com/docs-api/translate-text):\n\n>
      Sets whether the translated text should lean towards formal or\n> informal language.
      This feature currently only works for target\n> languages DE (German), FR (French),
      IT (Italian), ES (Spanish), NL\n> (Dutch), PL (Polish), PT-BR and PT-PT (Portuguese),
      JA (Japanese), and\n> RU (Russian). (...) Setting this parameter with a target
      language that\n> does not support formality will fail, unless one of the prefer\\_...\n>
      options are used.\n\nTherefore to be sure a translation will work, instead of
      writing\n`formality = \"less\"` you can write `formality = \"prefer_less\"`
      which\nwill only use formality if available.\n\n## Conclusion\n\nIn this post
      we explained how to translate a Hugo blog post using\nbabeldown.Although the
      gist is to use one call to\n`babeldown::deepl_translate_hugo()`,\n\n- one needs
      to indicate the API URL and key,\n- one can improve results by using the function''s
      different arguments,\n- we recommend pairing the translation with a Git + GitHub
      (or GitLab,\n  gitea...) workflow.\n\nbabeldown has\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\nfor
      translating Quarto book chapters, any Markdown file, and any\nMarkdown string,
      with similar arguments and recommended usage, so\nexplore its reference!\n\nWe''d
      be happy to hear about your [use cases](/usecases/).\n\n::: {.footnotes role=\"doc-endnotes\"}\n\n------------------------------------------------------------------------\n\n1.  :::
      {#fn:1}\n    But you should refer to [tinkr\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\n    see what might change in the Markdown syntax\n    style.\u00a0[\u21a9\ufe0e](#fnref:1){.footnote-backref
      role=\"doc-backlink\"}\n    :::\n\n2.  ::: {#fn:2}\n    adding code to handle
      Hugo''s [\"bewildering array of possible config\n    locations\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\n    and
      two possible formats (YAML and TOML) is out of scope for\n    babeldown at this
      point.\u00a0[\u21a9\ufe0e](#fnref:2){.footnote-backref\n    role=\"doc-backlink\"}\n    :::\n:::\n",
      "images": [{"src": "placeholder.png", "alt": "Diagram with on the left the leaf
      folder in the new-post branch with the post in Spanish with the text ''Hola''
      and an image; on the right the leaf folder in the new-post branch with the post
      in Spanish with the text ''hola'', the post with the English target filename
      with the text ''hola'', and the image."}, {"src": "translate.png", "alt": "Diagram
      with on the left the leaf folder in the auto-translate branch with the post
      in Spanish with the text ''hola'', the post with the English target filename
      with the text ''hola'', and the image; on the right the only thing that changed
      is that the content of the post with the English target filename is now ''hello''."},
      {"src": "pr.png", "alt": "Drawing of the pull request from the auto-translate
      to the new-post branch where the difference is that the content of the post
      with the English target filename has now been translated to English."}, {"src":
      "pr-diff.png", "alt": "Screenshot of the files tab of the pull request adding
      the automatic translation, where we observe Spanish text in the YAML metadata
      and Markdown content has been translated to English."}, {"src": "pr-comments.png",
      "alt": "Screenshot of the main tab of the pull request adding the automatic
      translation, where we observe a comment by Yanina replacing the word ''article''
      with ''blog post'' and fixing the name of ''R-universe''."}], "updated_at":
      1695713432, "registered_at": 0, "published_at": 1695686400, "image": "placeholder.png",
      "language": "en", "category": null, "reference": [], "relationships": [], "summary":
      "<p>As part of our <a href=\"/multilingual-publishing/\">multilingual publishing
      project</a>, and with <a href=\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\"https://docs.ropensci.org/babeldown/\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!",
      "abstract": null, "tags": ["Tech Notes", "Multilingual"], "title": "How to Translate
      a Hugo Blog Post with Babeldown", "url": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown",
      "guid": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/",
      "status": "active", "archive_url": null}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-length:
      - '17224'
      content-profile:
      - public
      content-type:
      - application/json
      host:
      - zggonsjmmfozmfxlrjmg.supabase.co
      prefer:
      - return=representation,resolution=merge-duplicates
      user-agent:
      - python-httpx/0.27.2
      x-client-info:
      - supabase-py/2.11.0
    method: POST
    uri: https://zggonsjmmfozmfxlrjmg.supabase.co/rest/v1/posts?on_conflict=guid
  response:
    content: "[{\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"title\":\"How
      to Translate a Hugo Blog Post with Babeldown\",\"summary\":\"<p>As part of our
      <a href=\\\"/multilingual-publishing/\\\">multilingual publishing project</a>,
      and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"image\":\"placeholder.png\",\"tags\":[\"Tech
      Notes\",\"Multilingual\"],\"language\":\"en\",\"authors\":[{\"url\": \"https://orcid.org/0000-0002-2815-0399\",
      \"name\": \"Ma\xEBlle Salmon\"}, {\"url\": \"https://orcid.org/0000-0002-4522-7466\",
      \"name\": \"Yanina Bellini Saibene\"}],\"doi\":\"https://doi.org/10.59350/evaf9-2qf48\",\"id\":\"78af77d1-72ba-4d9d-92aa-9dc258bbf00a\",\"reference\":[],\"updated_at\":1695713432,\"published_at\":1695686400,\"blog_name\":\"rOpenSci
      - open tools for open science\",\"indexed_at\":1731078596,\"indexed\":true,\"images\":[{\"alt\":
      \"Diagram with on the left the leaf folder in the new-post branch with the post
      in Spanish with the text 'Hola' and an image; on the right the leaf folder in
      the new-post branch with the post in Spanish with the text 'hola', the post
      with the English target filename with the text 'hola', and the image.\", \"src\":
      \"placeholder.png\"}, {\"alt\": \"Diagram with on the left the leaf folder in
      the auto-translate branch with the post in Spanish with the text 'hola', the
      post with the English target filename with the text 'hola', and the image; on
      the right the only thing that changed is that the content of the post with the
      English target filename is now 'hello'.\", \"src\": \"translate.png\"}, {\"alt\":
      \"Drawing of the pull request from the auto-translate to the new-post branch
      where the difference is that the content of the post with the English target
      filename has now been translated to English.\", \"src\": \"pr.png\"}, {\"alt\":
      \"Screenshot of the files tab of the pull request adding the automatic translation,
      where we observe Spanish text in the YAML metadata and Markdown content has
      been translated to English.\", \"src\": \"pr-diff.png\"}, {\"alt\": \"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word 'article' with 'blog post'
      and fixing the name of 'R-universe'.\", \"src\": \"pr-comments.png\"}],\"blog_slug\":\"ropensci\",\"content_text\":\"As
      part of our [multilingual publishing\\nproject](/multilingual-publishing/),
      and with [funding from the R\\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\\nwe've
      worked on the R package\\n[babeldown](https://docs.ropensci.org/babeldown/)
      for translating\\nMarkdown-based content using the DeepL API.In this tech note,
      we'll show\\nhow you can use babeldown to translate a Hugo blog post!\\n\\n##
      Motivation\\n\\nTranslating a Markdown blog post from your R console is not
      only more\\ncomfortable (when you've already written said blog post in R), but
      also\\nless frustrating.With babeldown, compared to copy-pasting the content
      of\\na blog post into some translation service, the Markdown syntax won't be\\nbroken^[1](#fn:1){.footnote-ref
      role=\\\"doc-noteref\\\"}^, and code chunks\\nwon't be translated.This works,
      because under the hood, babeldown uses\\n[tinkr](https://docs.ropensci.org/tinkr)
      to produce XML which it then\\nsends to the DeepL API, flagging some tags as
      not to be translated. It\\nthen converts the XML translated by DeepL back into
      Markdown again.\\n\\nNow, as you might expect this machine-translated content
      isn't perfect\\nyet!You will still need a human or two to review and amend the\\ntranslation.Why
      not have the humans translate the post from scratch\\nthen?We have observed
      that editing an automatic translation is faster\\nthan translating the whole
      post, and that it frees up mental space for\\nfocusing on implementing translation
      rules such as gender-neutral\\nphrasing.\\n\\n## Setup\\n\\n### Pre-requisites
      on the Hugo website\\n\\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\\nassumes
      the Hugo website uses\\n\\n- leaf bundles (each post in a folder,\\n  `content/path-to-leaf-bundle/index.md`);\\n-
      multilingualism so that a post in (for example) Spanish lives in\\n  `content/path-to-leaf-bundle/index.es.md`.\\n\\nbabeldown
      could be extended work with other Hugo multilingual setups. If\\nyou'd be interested
      in using babeldown with a different setup, please\\nopen an issue in the [babeldown\\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\\n\\nNote
      that babeldown won't be able to determine the default language of\\nyour website^[2](#fn:2){.footnote-ref
      role=\\\"doc-noteref\\\"}^ so even if\\nyour website's default language is English,
      babeldown will place an\\nEnglish translation in a file called \\\".en.md\\\"
      not \\\".md\\\".Hugo will\\nrecognize the new file all the same (at least in
      our setup).\\n\\n### DeepL pre-requisites\\n\\nFirst check that your desired
      source and target languages are supported\\nby the DeepL API!Look up the [docs
      of the `source_lang` and\\n`target_lang` API\\nparameters](https://www.deepl.com/docs-api/translate-text)
      for a full\\nlist.\\n\\nOnce you know you'll be able to take advantage of the
      DeepL API, you'll\\nneed to create an account for [DeepL's translation service\\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\\naccount requires registering a payment method with
      them.\\n\\n### R pre-requisites\\n\\nYou'll need to install babeldown from rOpenSci
      R-universe:\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ninstall.packages('babeldown',
      repos = c('https://ropensci.r-universe.dev', 'https://cloud.r-project.org'))\\n```\\n:::\\n\\nThen,
      in each R session, set your DeepL API key via the environment\\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\\nretrieve it in your scripts like so:\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\\\"deepl\\\"))\\n```\\n:::\\n\\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\\neach R session/script
      via\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(\\\"DEEPL_API_URL\\\"
      = \\\"https://api.deepl.com\\\")\\n```\\n:::\\n\\n## Translation!\\n\\nYou could
      run the code below\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ post_path = <path-to-post>,   source_lang = \\\"EN\\\",  target_lang = \\\"ES\\\",
      \ formality = \\\"less\\\" # that's how we roll here!)\\n```\\n:::\\n\\nbut
      we'd recommend a tad more work for your own good.\\n\\n## Translation using
      a Git/GitHub workflow\\n\\nIf you use version control, having the translation
      as a diff is very\\nhandy!\\n\\n### First: In words and pictures\\n\\n- In the
      branch of your post (let's call it \\\"new-post\\\") create a\\n  placeholder:
      save your original blog post (`index.es.md`) under the\\n  target blog post
      name (`index.en.md`) and commit it, then push.\\n\\n<figure>\\n<img src=\\\"placeholder.png\\\"\\nalt=\\\"Diagram
      with on the left the leaf folder in the new-post branch with the post in Spanish
      with the text &#39;Hola&#39; and an image; on the right the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;hola&#39;, the post
      with the English target filename with the text &#39;hola&#39;, and the image.\\\"
      />\\n</figure>\\n\\n- Create a new branch, \\\"auto-translate\\\" for instance.\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n<figure>\\n<img
      src=\\\"translate.png\\\"\\nalt=\\\"Diagram with on the left the leaf folder
      in the auto-translate branch with the post in Spanish with the text &#39;hola&#39;,
      the post with the English target filename with the text &#39;hola&#39;, and
      the image; on the right the only thing that changed is that the content of the
      post with the English target filename is now &#39;hello&#39;.\\\" />\\n</figure>\\n\\n-
      Commit and push the result.\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of your post. The diff for the
      target blog\\n  post will be the diff between the source and target languages!
      If you\\n  have the good habit to start a new line after each sentence / sentence\\n
      \ part, it's even better.\\n\\n<figure>\\n<img src=\\\"pr.png\\\"\\nalt=\\\"Drawing
      of the pull request from the auto-translate to the new-post branch where the
      difference is that the content of the post with the English target filename
      has now been translated to English.\\\" />\\n</figure>\\n\\n- The human translators
      can then a open a second PR to the translation\\n  branch with their edits!
      Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Again: In code\\n\\nNow let's go over this again, but with a coding workflow.
      Here, we'll\\nuse fs and gert (but you do you!), and we'll assume your current\\ndirectory
      is the root of the website folder, and also the root of the\\ngit repository.\\n\\n-
      In the post branch, (again, let's call it \\\"new-post\\\"), save your\\n  original
      blog post (`index.es.md`) under the target blog post name\\n  (`index.en.md`)
      and commit it, then push.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nfs::file_copy(
      \ file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.en.md\\\"))gert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation placeholder\\\")gert::git_push()\\n```\\n:::\\n\\n- Create a new
      branch, \\\"auto-translate\\\" for instance.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_branch_create(\\\"translation-tech-note\\\")\\n```\\n:::\\n\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(  post_path =
      file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\",
      \\\"tags\\\"),  source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\nYou
      can also omit the `post_path` argument if you're running the code\\nfrom RStudio
      IDE and if the open and focused file (the one you see above\\nyour console)
      is the post to be translated.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\", \\\"tags\\\"),
      \ source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\n-
      Commit the result with the code below.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation\\\")gert::git_push()\\n```\\n:::\\n\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of\\n  `\\\"content/blog/2023-10-01-r-universe-interviews/index.en.md\\\"`.\\n\\n-
      The human translators can then a open a *second* PR to the translation\\n  branch
      with their edits! Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Summary of branches and PRs\\n\\nIn the end there should be two to three branches:\\n\\n-
      branch A with blog post in Spanish and placeholder blog post for\\n  English
      (with Spanish content) -- PR to main;\\n- branch B with blog post automatically
      translated to English -- PR to\\n  branch A;\\n- Optionally branch C with blog
      post's English automatic translation\\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\\n  by a human are made as PR review suggestions
      in the PR from B to A.\\n\\nThe PR are merged in this order:\\n\\n- PR to branch
      B;\\n- PR to branch A;\\n- PR to main.\\n\\n### Real example\\n\\n- [PR adding
      a post to the rOpenSci\\n  blog](https://github.com/ropensci/roweb3/pull/629),
      notice it's a PR\\n  from the **\\\"r-universe-interviews\\\"** branch to the
      **\\\"main\\\"\\n  (default)** branch;\\n- [PR adding the automatic\\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it's\\n  a PR to the **\\\"r-universe-interviews\\\"** branch.\\n\\n<figure>\\n<img
      src=\\\"pr-diff.png\\\"\\nalt=\\\"Screenshot of the files tab of the pull request
      adding the automatic translation, where we observe Spanish text in the YAML
      metadata and Markdown content has been translated to English.\\\" />\\n</figure>\\n\\nYanina
      tweaked the automatic translation by suggesting changes on the\\nPR, then accepting
      them.\\n\\n<figure>\\n<img src=\\\"pr-comments.png\\\"\\nalt=\\\"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word &#39;article&#39; with &#39;blog
      post&#39; and fixing the name of &#39;R-universe&#39;.\\\" />\\n</figure>\\n\\n###
      YAML fields\\n\\nBy default babeldown translates the YAML fields \\\"title\\\"
      and\\n\\\"description\\\".If you have text in more of them, use the `yaml_fields`\\nargument
      of `babeldown::deepl_translate_hugo()`.\\n\\nNote that if babeldown translates
      the title, it updates the slug.\\n\\n### Glossary\\n\\nImagine you have a few
      preferences for some words -- something you'll\\nbuild up over time.\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nreadr::read_csv(  system.file(\\\"example-es-en.csv\\\",
      package = \\\"babeldown\\\"),   show_col_types = FALSE)\\n```\\n:::\\n\\n```
      {tabindex=\\\"0\\\"}\\n## # A tibble: 2 \xD7 2##   Spanish     English   ##
      \  <chr>       <chr>     ## 1 paquete     package   ## 2 repositorio repository\\n```\\n\\nYou
      can record these preferred translations in a glossary in your DeepL\\naccount\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ndeepl_upsert_glossary(  <path-to-csv-file>,
      \ glossary_name = \\\"rstats-glosario\\\",  target_lang = \\\"Spanish\\\",  source_lang
      = \\\"English\\\")\\n```\\n:::\\n\\nYou'd use the exact same code to *update*
      the glossary hence the name\\n\\\"upsert\\\" for the function.You need one glossary
      per source language /\\ntarget language pair: the English-Spanish glossary can't
      be used for\\nSpanish to English for instance.\\n\\nIn your `babeldown::deepl_translate_hugo()`
      call you then use the\\nglossary name (here \\\"rstats-glosario\\\") for the
      `glossary` argument.\\n\\n### Formality\\n\\n`deepl_translate_hugo()` has a
      `formality` argument.Now, the DeepL API\\nonly supports this for some languages
      as explained in the [documentation\\nof the `formality` API\\nparameter](https://www.deepl.com/docs-api/translate-text):\\n\\n>
      Sets whether the translated text should lean towards formal or\\n> informal
      language. This feature currently only works for target\\n> languages DE (German),
      FR (French), IT (Italian), ES (Spanish), NL\\n> (Dutch), PL (Polish), PT-BR
      and PT-PT (Portuguese), JA (Japanese), and\\n> RU (Russian). (...) Setting this
      parameter with a target language that\\n> does not support formality will fail,
      unless one of the prefer\\\\_...\\n> options are used.\\n\\nTherefore to be
      sure a translation will work, instead of writing\\n`formality = \\\"less\\\"`
      you can write `formality = \\\"prefer_less\\\"` which\\nwill only use formality
      if available.\\n\\n## Conclusion\\n\\nIn this post we explained how to translate
      a Hugo blog post using\\nbabeldown.Although the gist is to use one call to\\n`babeldown::deepl_translate_hugo()`,\\n\\n-
      one needs to indicate the API URL and key,\\n- one can improve results by using
      the function's different arguments,\\n- we recommend pairing the translation
      with a Git + GitHub (or GitLab,\\n  gitea...) workflow.\\n\\nbabeldown has\\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\\nfor
      translating Quarto book chapters, any Markdown file, and any\\nMarkdown string,
      with similar arguments and recommended usage, so\\nexplore its reference!\\n\\nWe'd
      be happy to hear about your [use cases](/usecases/).\\n\\n::: {.footnotes role=\\\"doc-endnotes\\\"}\\n\\n------------------------------------------------------------------------\\n\\n1.
      \ ::: {#fn:1}\\n    But you should refer to [tinkr\\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\\n    see what might change in the Markdown syntax\\n    style.\_[\u21A9\uFE0E](#fnref:1){.footnote-backref
      role=\\\"doc-backlink\\\"}\\n    :::\\n\\n2.  ::: {#fn:2}\\n    adding code
      to handle Hugo's [\\\"bewildering array of possible config\\n    locations\\\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\\n
      \   and two possible formats (YAML and TOML) is out of scope for\\n    babeldown
      at this point.\_[\u21A9\uFE0E](#fnref:2){.footnote-backref\\n    role=\\\"doc-backlink\\\"}\\n
      \   :::\\n:::\\n\",\"relationships\":[],\"archive_url\":null,\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"updated\":false,\"category\":null,\"abstract\":null,\"status\":\"active\",\"rid\":\"hc1tq-gq010\",\"has_content\":false,\"registered_at\":0}]"
    headers:
      access-control-allow-origin:
      - '*'
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 9045fc2bde9ff95a-DUS
      content-encoding:
      - gzip
      content-profile:
      - public
      content-range:
      - '*/*'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 19 Jan 2025 10:01:43 GMT
      preference-applied:
      - resolution=merge-duplicates, return=representation
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - zggonsjmmfozmfxlrjmg
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-kong-proxy-latency:
      - '5'
      x-kong-upstream-latency:
      - '3'
    http_version: HTTP/2
    status_code: 200
- request:
    body: '{"indexed": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-length:
      - '17'
      content-profile:
      - public
      content-type:
      - application/json
      host:
      - zggonsjmmfozmfxlrjmg.supabase.co
      prefer:
      - return=representation
      user-agent:
      - python-httpx/0.27.2
      x-client-info:
      - supabase-py/2.11.0
    method: PATCH
    uri: https://zggonsjmmfozmfxlrjmg.supabase.co/rest/v1/posts?id=eq.78af77d1-72ba-4d9d-92aa-9dc258bbf00a
  response:
    content: "[{\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"title\":\"How
      to Translate a Hugo Blog Post with Babeldown\",\"summary\":\"<p>As part of our
      <a href=\\\"/multilingual-publishing/\\\">multilingual publishing project</a>,
      and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"image\":\"placeholder.png\",\"tags\":[\"Tech
      Notes\",\"Multilingual\"],\"language\":\"en\",\"authors\":[{\"url\": \"https://orcid.org/0000-0002-2815-0399\",
      \"name\": \"Ma\xEBlle Salmon\"}, {\"url\": \"https://orcid.org/0000-0002-4522-7466\",
      \"name\": \"Yanina Bellini Saibene\"}],\"doi\":\"https://doi.org/10.59350/evaf9-2qf48\",\"id\":\"78af77d1-72ba-4d9d-92aa-9dc258bbf00a\",\"reference\":[],\"updated_at\":1695713432,\"published_at\":1695686400,\"blog_name\":\"rOpenSci
      - open tools for open science\",\"indexed_at\":1731078596,\"indexed\":true,\"images\":[{\"alt\":
      \"Diagram with on the left the leaf folder in the new-post branch with the post
      in Spanish with the text 'Hola' and an image; on the right the leaf folder in
      the new-post branch with the post in Spanish with the text 'hola', the post
      with the English target filename with the text 'hola', and the image.\", \"src\":
      \"placeholder.png\"}, {\"alt\": \"Diagram with on the left the leaf folder in
      the auto-translate branch with the post in Spanish with the text 'hola', the
      post with the English target filename with the text 'hola', and the image; on
      the right the only thing that changed is that the content of the post with the
      English target filename is now 'hello'.\", \"src\": \"translate.png\"}, {\"alt\":
      \"Drawing of the pull request from the auto-translate to the new-post branch
      where the difference is that the content of the post with the English target
      filename has now been translated to English.\", \"src\": \"pr.png\"}, {\"alt\":
      \"Screenshot of the files tab of the pull request adding the automatic translation,
      where we observe Spanish text in the YAML metadata and Markdown content has
      been translated to English.\", \"src\": \"pr-diff.png\"}, {\"alt\": \"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word 'article' with 'blog post'
      and fixing the name of 'R-universe'.\", \"src\": \"pr-comments.png\"}],\"blog_slug\":\"ropensci\",\"content_text\":\"As
      part of our [multilingual publishing\\nproject](/multilingual-publishing/),
      and with [funding from the R\\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\\nwe've
      worked on the R package\\n[babeldown](https://docs.ropensci.org/babeldown/)
      for translating\\nMarkdown-based content using the DeepL API.In this tech note,
      we'll show\\nhow you can use babeldown to translate a Hugo blog post!\\n\\n##
      Motivation\\n\\nTranslating a Markdown blog post from your R console is not
      only more\\ncomfortable (when you've already written said blog post in R), but
      also\\nless frustrating.With babeldown, compared to copy-pasting the content
      of\\na blog post into some translation service, the Markdown syntax won't be\\nbroken^[1](#fn:1){.footnote-ref
      role=\\\"doc-noteref\\\"}^, and code chunks\\nwon't be translated.This works,
      because under the hood, babeldown uses\\n[tinkr](https://docs.ropensci.org/tinkr)
      to produce XML which it then\\nsends to the DeepL API, flagging some tags as
      not to be translated. It\\nthen converts the XML translated by DeepL back into
      Markdown again.\\n\\nNow, as you might expect this machine-translated content
      isn't perfect\\nyet!You will still need a human or two to review and amend the\\ntranslation.Why
      not have the humans translate the post from scratch\\nthen?We have observed
      that editing an automatic translation is faster\\nthan translating the whole
      post, and that it frees up mental space for\\nfocusing on implementing translation
      rules such as gender-neutral\\nphrasing.\\n\\n## Setup\\n\\n### Pre-requisites
      on the Hugo website\\n\\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\\nassumes
      the Hugo website uses\\n\\n- leaf bundles (each post in a folder,\\n  `content/path-to-leaf-bundle/index.md`);\\n-
      multilingualism so that a post in (for example) Spanish lives in\\n  `content/path-to-leaf-bundle/index.es.md`.\\n\\nbabeldown
      could be extended work with other Hugo multilingual setups. If\\nyou'd be interested
      in using babeldown with a different setup, please\\nopen an issue in the [babeldown\\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\\n\\nNote
      that babeldown won't be able to determine the default language of\\nyour website^[2](#fn:2){.footnote-ref
      role=\\\"doc-noteref\\\"}^ so even if\\nyour website's default language is English,
      babeldown will place an\\nEnglish translation in a file called \\\".en.md\\\"
      not \\\".md\\\".Hugo will\\nrecognize the new file all the same (at least in
      our setup).\\n\\n### DeepL pre-requisites\\n\\nFirst check that your desired
      source and target languages are supported\\nby the DeepL API!Look up the [docs
      of the `source_lang` and\\n`target_lang` API\\nparameters](https://www.deepl.com/docs-api/translate-text)
      for a full\\nlist.\\n\\nOnce you know you'll be able to take advantage of the
      DeepL API, you'll\\nneed to create an account for [DeepL's translation service\\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\\naccount requires registering a payment method with
      them.\\n\\n### R pre-requisites\\n\\nYou'll need to install babeldown from rOpenSci
      R-universe:\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ninstall.packages('babeldown',
      repos = c('https://ropensci.r-universe.dev', 'https://cloud.r-project.org'))\\n```\\n:::\\n\\nThen,
      in each R session, set your DeepL API key via the environment\\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\\nretrieve it in your scripts like so:\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\\\"deepl\\\"))\\n```\\n:::\\n\\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\\neach R session/script
      via\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(\\\"DEEPL_API_URL\\\"
      = \\\"https://api.deepl.com\\\")\\n```\\n:::\\n\\n## Translation!\\n\\nYou could
      run the code below\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ post_path = <path-to-post>,   source_lang = \\\"EN\\\",  target_lang = \\\"ES\\\",
      \ formality = \\\"less\\\" # that's how we roll here!)\\n```\\n:::\\n\\nbut
      we'd recommend a tad more work for your own good.\\n\\n## Translation using
      a Git/GitHub workflow\\n\\nIf you use version control, having the translation
      as a diff is very\\nhandy!\\n\\n### First: In words and pictures\\n\\n- In the
      branch of your post (let's call it \\\"new-post\\\") create a\\n  placeholder:
      save your original blog post (`index.es.md`) under the\\n  target blog post
      name (`index.en.md`) and commit it, then push.\\n\\n<figure>\\n<img src=\\\"placeholder.png\\\"\\nalt=\\\"Diagram
      with on the left the leaf folder in the new-post branch with the post in Spanish
      with the text &#39;Hola&#39; and an image; on the right the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;hola&#39;, the post
      with the English target filename with the text &#39;hola&#39;, and the image.\\\"
      />\\n</figure>\\n\\n- Create a new branch, \\\"auto-translate\\\" for instance.\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n<figure>\\n<img
      src=\\\"translate.png\\\"\\nalt=\\\"Diagram with on the left the leaf folder
      in the auto-translate branch with the post in Spanish with the text &#39;hola&#39;,
      the post with the English target filename with the text &#39;hola&#39;, and
      the image; on the right the only thing that changed is that the content of the
      post with the English target filename is now &#39;hello&#39;.\\\" />\\n</figure>\\n\\n-
      Commit and push the result.\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of your post. The diff for the
      target blog\\n  post will be the diff between the source and target languages!
      If you\\n  have the good habit to start a new line after each sentence / sentence\\n
      \ part, it's even better.\\n\\n<figure>\\n<img src=\\\"pr.png\\\"\\nalt=\\\"Drawing
      of the pull request from the auto-translate to the new-post branch where the
      difference is that the content of the post with the English target filename
      has now been translated to English.\\\" />\\n</figure>\\n\\n- The human translators
      can then a open a second PR to the translation\\n  branch with their edits!
      Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Again: In code\\n\\nNow let's go over this again, but with a coding workflow.
      Here, we'll\\nuse fs and gert (but you do you!), and we'll assume your current\\ndirectory
      is the root of the website folder, and also the root of the\\ngit repository.\\n\\n-
      In the post branch, (again, let's call it \\\"new-post\\\"), save your\\n  original
      blog post (`index.es.md`) under the target blog post name\\n  (`index.en.md`)
      and commit it, then push.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nfs::file_copy(
      \ file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.en.md\\\"))gert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation placeholder\\\")gert::git_push()\\n```\\n:::\\n\\n- Create a new
      branch, \\\"auto-translate\\\" for instance.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_branch_create(\\\"translation-tech-note\\\")\\n```\\n:::\\n\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(  post_path =
      file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\",
      \\\"tags\\\"),  source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\nYou
      can also omit the `post_path` argument if you're running the code\\nfrom RStudio
      IDE and if the open and focused file (the one you see above\\nyour console)
      is the post to be translated.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\", \\\"tags\\\"),
      \ source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\n-
      Commit the result with the code below.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation\\\")gert::git_push()\\n```\\n:::\\n\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of\\n  `\\\"content/blog/2023-10-01-r-universe-interviews/index.en.md\\\"`.\\n\\n-
      The human translators can then a open a *second* PR to the translation\\n  branch
      with their edits! Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Summary of branches and PRs\\n\\nIn the end there should be two to three branches:\\n\\n-
      branch A with blog post in Spanish and placeholder blog post for\\n  English
      (with Spanish content) -- PR to main;\\n- branch B with blog post automatically
      translated to English -- PR to\\n  branch A;\\n- Optionally branch C with blog
      post's English automatic translation\\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\\n  by a human are made as PR review suggestions
      in the PR from B to A.\\n\\nThe PR are merged in this order:\\n\\n- PR to branch
      B;\\n- PR to branch A;\\n- PR to main.\\n\\n### Real example\\n\\n- [PR adding
      a post to the rOpenSci\\n  blog](https://github.com/ropensci/roweb3/pull/629),
      notice it's a PR\\n  from the **\\\"r-universe-interviews\\\"** branch to the
      **\\\"main\\\"\\n  (default)** branch;\\n- [PR adding the automatic\\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it's\\n  a PR to the **\\\"r-universe-interviews\\\"** branch.\\n\\n<figure>\\n<img
      src=\\\"pr-diff.png\\\"\\nalt=\\\"Screenshot of the files tab of the pull request
      adding the automatic translation, where we observe Spanish text in the YAML
      metadata and Markdown content has been translated to English.\\\" />\\n</figure>\\n\\nYanina
      tweaked the automatic translation by suggesting changes on the\\nPR, then accepting
      them.\\n\\n<figure>\\n<img src=\\\"pr-comments.png\\\"\\nalt=\\\"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word &#39;article&#39; with &#39;blog
      post&#39; and fixing the name of &#39;R-universe&#39;.\\\" />\\n</figure>\\n\\n###
      YAML fields\\n\\nBy default babeldown translates the YAML fields \\\"title\\\"
      and\\n\\\"description\\\".If you have text in more of them, use the `yaml_fields`\\nargument
      of `babeldown::deepl_translate_hugo()`.\\n\\nNote that if babeldown translates
      the title, it updates the slug.\\n\\n### Glossary\\n\\nImagine you have a few
      preferences for some words -- something you'll\\nbuild up over time.\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nreadr::read_csv(  system.file(\\\"example-es-en.csv\\\",
      package = \\\"babeldown\\\"),   show_col_types = FALSE)\\n```\\n:::\\n\\n```
      {tabindex=\\\"0\\\"}\\n## # A tibble: 2 \xD7 2##   Spanish     English   ##
      \  <chr>       <chr>     ## 1 paquete     package   ## 2 repositorio repository\\n```\\n\\nYou
      can record these preferred translations in a glossary in your DeepL\\naccount\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ndeepl_upsert_glossary(  <path-to-csv-file>,
      \ glossary_name = \\\"rstats-glosario\\\",  target_lang = \\\"Spanish\\\",  source_lang
      = \\\"English\\\")\\n```\\n:::\\n\\nYou'd use the exact same code to *update*
      the glossary hence the name\\n\\\"upsert\\\" for the function.You need one glossary
      per source language /\\ntarget language pair: the English-Spanish glossary can't
      be used for\\nSpanish to English for instance.\\n\\nIn your `babeldown::deepl_translate_hugo()`
      call you then use the\\nglossary name (here \\\"rstats-glosario\\\") for the
      `glossary` argument.\\n\\n### Formality\\n\\n`deepl_translate_hugo()` has a
      `formality` argument.Now, the DeepL API\\nonly supports this for some languages
      as explained in the [documentation\\nof the `formality` API\\nparameter](https://www.deepl.com/docs-api/translate-text):\\n\\n>
      Sets whether the translated text should lean towards formal or\\n> informal
      language. This feature currently only works for target\\n> languages DE (German),
      FR (French), IT (Italian), ES (Spanish), NL\\n> (Dutch), PL (Polish), PT-BR
      and PT-PT (Portuguese), JA (Japanese), and\\n> RU (Russian). (...) Setting this
      parameter with a target language that\\n> does not support formality will fail,
      unless one of the prefer\\\\_...\\n> options are used.\\n\\nTherefore to be
      sure a translation will work, instead of writing\\n`formality = \\\"less\\\"`
      you can write `formality = \\\"prefer_less\\\"` which\\nwill only use formality
      if available.\\n\\n## Conclusion\\n\\nIn this post we explained how to translate
      a Hugo blog post using\\nbabeldown.Although the gist is to use one call to\\n`babeldown::deepl_translate_hugo()`,\\n\\n-
      one needs to indicate the API URL and key,\\n- one can improve results by using
      the function's different arguments,\\n- we recommend pairing the translation
      with a Git + GitHub (or GitLab,\\n  gitea...) workflow.\\n\\nbabeldown has\\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\\nfor
      translating Quarto book chapters, any Markdown file, and any\\nMarkdown string,
      with similar arguments and recommended usage, so\\nexplore its reference!\\n\\nWe'd
      be happy to hear about your [use cases](/usecases/).\\n\\n::: {.footnotes role=\\\"doc-endnotes\\\"}\\n\\n------------------------------------------------------------------------\\n\\n1.
      \ ::: {#fn:1}\\n    But you should refer to [tinkr\\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\\n    see what might change in the Markdown syntax\\n    style.\_[\u21A9\uFE0E](#fnref:1){.footnote-backref
      role=\\\"doc-backlink\\\"}\\n    :::\\n\\n2.  ::: {#fn:2}\\n    adding code
      to handle Hugo's [\\\"bewildering array of possible config\\n    locations\\\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\\n
      \   and two possible formats (YAML and TOML) is out of scope for\\n    babeldown
      at this point.\_[\u21A9\uFE0E](#fnref:2){.footnote-backref\\n    role=\\\"doc-backlink\\\"}\\n
      \   :::\\n:::\\n\",\"relationships\":[],\"archive_url\":null,\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"updated\":false,\"category\":null,\"abstract\":null,\"status\":\"active\",\"rid\":\"hc1tq-gq010\",\"has_content\":false,\"registered_at\":0}]"
    headers:
      access-control-allow-origin:
      - '*'
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 9045fc2c8c58f95a-DUS
      content-encoding:
      - gzip
      content-profile:
      - public
      content-range:
      - 0-0/*
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 19 Jan 2025 10:01:43 GMT
      preference-applied:
      - return=representation
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - zggonsjmmfozmfxlrjmg
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-kong-proxy-latency:
      - '0'
      x-kong-upstream-latency:
      - '3'
    http_version: HTTP/2
    status_code: 200
- request:
    body: '{}'
    headers:
      accept:
      - application/vnd.pgrst.object+json
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-length:
      - '2'
      content-profile:
      - public
      content-type:
      - application/json
      host:
      - zggonsjmmfozmfxlrjmg.supabase.co
      user-agent:
      - python-httpx/0.27.2
      x-client-info:
      - supabase-py/2.11.0
    method: GET
    uri: https://zggonsjmmfozmfxlrjmg.supabase.co/rest/v1/posts?select=id%2C%20guid%2C%20doi%2C%20url%2C%20archive_url%2C%20title%2C%20summary%2C%20abstract%2C%20content_text%2C%20published_at%2C%20updated_at%2C%20registered_at%2C%20indexed_at%2C%20authors%2C%20image%2C%20tags%2C%20language%2C%20reference%2C%20relationships%2C%20blog_name%2C%20blog_slug%2C%20rid%2C%20blog%3A%20blogs%21inner%28%2A%29&guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F
  response:
    content: "{\"id\":\"78af77d1-72ba-4d9d-92aa-9dc258bbf00a\",\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"doi\":\"https://doi.org/10.59350/evaf9-2qf48\",\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"archive_url\":null,\"title\":\"How
      to Translate a Hugo Blog Post with Babeldown\",\"summary\":\"<p>As part of our
      <a href=\\\"/multilingual-publishing/\\\">multilingual publishing project</a>,
      and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"abstract\":null,\"content_text\":\"As
      part of our [multilingual publishing\\nproject](/multilingual-publishing/),
      and with [funding from the R\\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\\nwe've
      worked on the R package\\n[babeldown](https://docs.ropensci.org/babeldown/)
      for translating\\nMarkdown-based content using the DeepL API.In this tech note,
      we'll show\\nhow you can use babeldown to translate a Hugo blog post!\\n\\n##
      Motivation\\n\\nTranslating a Markdown blog post from your R console is not
      only more\\ncomfortable (when you've already written said blog post in R), but
      also\\nless frustrating.With babeldown, compared to copy-pasting the content
      of\\na blog post into some translation service, the Markdown syntax won't be\\nbroken^[1](#fn:1){.footnote-ref
      role=\\\"doc-noteref\\\"}^, and code chunks\\nwon't be translated.This works,
      because under the hood, babeldown uses\\n[tinkr](https://docs.ropensci.org/tinkr)
      to produce XML which it then\\nsends to the DeepL API, flagging some tags as
      not to be translated. It\\nthen converts the XML translated by DeepL back into
      Markdown again.\\n\\nNow, as you might expect this machine-translated content
      isn't perfect\\nyet!You will still need a human or two to review and amend the\\ntranslation.Why
      not have the humans translate the post from scratch\\nthen?We have observed
      that editing an automatic translation is faster\\nthan translating the whole
      post, and that it frees up mental space for\\nfocusing on implementing translation
      rules such as gender-neutral\\nphrasing.\\n\\n## Setup\\n\\n### Pre-requisites
      on the Hugo website\\n\\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\\nassumes
      the Hugo website uses\\n\\n- leaf bundles (each post in a folder,\\n  `content/path-to-leaf-bundle/index.md`);\\n-
      multilingualism so that a post in (for example) Spanish lives in\\n  `content/path-to-leaf-bundle/index.es.md`.\\n\\nbabeldown
      could be extended work with other Hugo multilingual setups. If\\nyou'd be interested
      in using babeldown with a different setup, please\\nopen an issue in the [babeldown\\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\\n\\nNote
      that babeldown won't be able to determine the default language of\\nyour website^[2](#fn:2){.footnote-ref
      role=\\\"doc-noteref\\\"}^ so even if\\nyour website's default language is English,
      babeldown will place an\\nEnglish translation in a file called \\\".en.md\\\"
      not \\\".md\\\".Hugo will\\nrecognize the new file all the same (at least in
      our setup).\\n\\n### DeepL pre-requisites\\n\\nFirst check that your desired
      source and target languages are supported\\nby the DeepL API!Look up the [docs
      of the `source_lang` and\\n`target_lang` API\\nparameters](https://www.deepl.com/docs-api/translate-text)
      for a full\\nlist.\\n\\nOnce you know you'll be able to take advantage of the
      DeepL API, you'll\\nneed to create an account for [DeepL's translation service\\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\\naccount requires registering a payment method with
      them.\\n\\n### R pre-requisites\\n\\nYou'll need to install babeldown from rOpenSci
      R-universe:\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ninstall.packages('babeldown',
      repos = c('https://ropensci.r-universe.dev', 'https://cloud.r-project.org'))\\n```\\n:::\\n\\nThen,
      in each R session, set your DeepL API key via the environment\\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\\nretrieve it in your scripts like so:\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\\\"deepl\\\"))\\n```\\n:::\\n\\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\\neach R session/script
      via\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(\\\"DEEPL_API_URL\\\"
      = \\\"https://api.deepl.com\\\")\\n```\\n:::\\n\\n## Translation!\\n\\nYou could
      run the code below\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ post_path = <path-to-post>,   source_lang = \\\"EN\\\",  target_lang = \\\"ES\\\",
      \ formality = \\\"less\\\" # that's how we roll here!)\\n```\\n:::\\n\\nbut
      we'd recommend a tad more work for your own good.\\n\\n## Translation using
      a Git/GitHub workflow\\n\\nIf you use version control, having the translation
      as a diff is very\\nhandy!\\n\\n### First: In words and pictures\\n\\n- In the
      branch of your post (let's call it \\\"new-post\\\") create a\\n  placeholder:
      save your original blog post (`index.es.md`) under the\\n  target blog post
      name (`index.en.md`) and commit it, then push.\\n\\n<figure>\\n<img src=\\\"placeholder.png\\\"\\nalt=\\\"Diagram
      with on the left the leaf folder in the new-post branch with the post in Spanish
      with the text &#39;Hola&#39; and an image; on the right the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;hola&#39;, the post
      with the English target filename with the text &#39;hola&#39;, and the image.\\\"
      />\\n</figure>\\n\\n- Create a new branch, \\\"auto-translate\\\" for instance.\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n<figure>\\n<img
      src=\\\"translate.png\\\"\\nalt=\\\"Diagram with on the left the leaf folder
      in the auto-translate branch with the post in Spanish with the text &#39;hola&#39;,
      the post with the English target filename with the text &#39;hola&#39;, and
      the image; on the right the only thing that changed is that the content of the
      post with the English target filename is now &#39;hello&#39;.\\\" />\\n</figure>\\n\\n-
      Commit and push the result.\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of your post. The diff for the
      target blog\\n  post will be the diff between the source and target languages!
      If you\\n  have the good habit to start a new line after each sentence / sentence\\n
      \ part, it's even better.\\n\\n<figure>\\n<img src=\\\"pr.png\\\"\\nalt=\\\"Drawing
      of the pull request from the auto-translate to the new-post branch where the
      difference is that the content of the post with the English target filename
      has now been translated to English.\\\" />\\n</figure>\\n\\n- The human translators
      can then a open a second PR to the translation\\n  branch with their edits!
      Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Again: In code\\n\\nNow let's go over this again, but with a coding workflow.
      Here, we'll\\nuse fs and gert (but you do you!), and we'll assume your current\\ndirectory
      is the root of the website folder, and also the root of the\\ngit repository.\\n\\n-
      In the post branch, (again, let's call it \\\"new-post\\\"), save your\\n  original
      blog post (`index.es.md`) under the target blog post name\\n  (`index.en.md`)
      and commit it, then push.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nfs::file_copy(
      \ file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.en.md\\\"))gert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation placeholder\\\")gert::git_push()\\n```\\n:::\\n\\n- Create a new
      branch, \\\"auto-translate\\\" for instance.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_branch_create(\\\"translation-tech-note\\\")\\n```\\n:::\\n\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(  post_path =
      file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\",
      \\\"tags\\\"),  source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\nYou
      can also omit the `post_path` argument if you're running the code\\nfrom RStudio
      IDE and if the open and focused file (the one you see above\\nyour console)
      is the post to be translated.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\", \\\"tags\\\"),
      \ source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\n-
      Commit the result with the code below.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation\\\")gert::git_push()\\n```\\n:::\\n\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of\\n  `\\\"content/blog/2023-10-01-r-universe-interviews/index.en.md\\\"`.\\n\\n-
      The human translators can then a open a *second* PR to the translation\\n  branch
      with their edits! Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Summary of branches and PRs\\n\\nIn the end there should be two to three branches:\\n\\n-
      branch A with blog post in Spanish and placeholder blog post for\\n  English
      (with Spanish content) -- PR to main;\\n- branch B with blog post automatically
      translated to English -- PR to\\n  branch A;\\n- Optionally branch C with blog
      post's English automatic translation\\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\\n  by a human are made as PR review suggestions
      in the PR from B to A.\\n\\nThe PR are merged in this order:\\n\\n- PR to branch
      B;\\n- PR to branch A;\\n- PR to main.\\n\\n### Real example\\n\\n- [PR adding
      a post to the rOpenSci\\n  blog](https://github.com/ropensci/roweb3/pull/629),
      notice it's a PR\\n  from the **\\\"r-universe-interviews\\\"** branch to the
      **\\\"main\\\"\\n  (default)** branch;\\n- [PR adding the automatic\\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it's\\n  a PR to the **\\\"r-universe-interviews\\\"** branch.\\n\\n<figure>\\n<img
      src=\\\"pr-diff.png\\\"\\nalt=\\\"Screenshot of the files tab of the pull request
      adding the automatic translation, where we observe Spanish text in the YAML
      metadata and Markdown content has been translated to English.\\\" />\\n</figure>\\n\\nYanina
      tweaked the automatic translation by suggesting changes on the\\nPR, then accepting
      them.\\n\\n<figure>\\n<img src=\\\"pr-comments.png\\\"\\nalt=\\\"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word &#39;article&#39; with &#39;blog
      post&#39; and fixing the name of &#39;R-universe&#39;.\\\" />\\n</figure>\\n\\n###
      YAML fields\\n\\nBy default babeldown translates the YAML fields \\\"title\\\"
      and\\n\\\"description\\\".If you have text in more of them, use the `yaml_fields`\\nargument
      of `babeldown::deepl_translate_hugo()`.\\n\\nNote that if babeldown translates
      the title, it updates the slug.\\n\\n### Glossary\\n\\nImagine you have a few
      preferences for some words -- something you'll\\nbuild up over time.\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nreadr::read_csv(  system.file(\\\"example-es-en.csv\\\",
      package = \\\"babeldown\\\"),   show_col_types = FALSE)\\n```\\n:::\\n\\n```
      {tabindex=\\\"0\\\"}\\n## # A tibble: 2 \xD7 2##   Spanish     English   ##
      \  <chr>       <chr>     ## 1 paquete     package   ## 2 repositorio repository\\n```\\n\\nYou
      can record these preferred translations in a glossary in your DeepL\\naccount\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ndeepl_upsert_glossary(  <path-to-csv-file>,
      \ glossary_name = \\\"rstats-glosario\\\",  target_lang = \\\"Spanish\\\",  source_lang
      = \\\"English\\\")\\n```\\n:::\\n\\nYou'd use the exact same code to *update*
      the glossary hence the name\\n\\\"upsert\\\" for the function.You need one glossary
      per source language /\\ntarget language pair: the English-Spanish glossary can't
      be used for\\nSpanish to English for instance.\\n\\nIn your `babeldown::deepl_translate_hugo()`
      call you then use the\\nglossary name (here \\\"rstats-glosario\\\") for the
      `glossary` argument.\\n\\n### Formality\\n\\n`deepl_translate_hugo()` has a
      `formality` argument.Now, the DeepL API\\nonly supports this for some languages
      as explained in the [documentation\\nof the `formality` API\\nparameter](https://www.deepl.com/docs-api/translate-text):\\n\\n>
      Sets whether the translated text should lean towards formal or\\n> informal
      language. This feature currently only works for target\\n> languages DE (German),
      FR (French), IT (Italian), ES (Spanish), NL\\n> (Dutch), PL (Polish), PT-BR
      and PT-PT (Portuguese), JA (Japanese), and\\n> RU (Russian). (...) Setting this
      parameter with a target language that\\n> does not support formality will fail,
      unless one of the prefer\\\\_...\\n> options are used.\\n\\nTherefore to be
      sure a translation will work, instead of writing\\n`formality = \\\"less\\\"`
      you can write `formality = \\\"prefer_less\\\"` which\\nwill only use formality
      if available.\\n\\n## Conclusion\\n\\nIn this post we explained how to translate
      a Hugo blog post using\\nbabeldown.Although the gist is to use one call to\\n`babeldown::deepl_translate_hugo()`,\\n\\n-
      one needs to indicate the API URL and key,\\n- one can improve results by using
      the function's different arguments,\\n- we recommend pairing the translation
      with a Git + GitHub (or GitLab,\\n  gitea...) workflow.\\n\\nbabeldown has\\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\\nfor
      translating Quarto book chapters, any Markdown file, and any\\nMarkdown string,
      with similar arguments and recommended usage, so\\nexplore its reference!\\n\\nWe'd
      be happy to hear about your [use cases](/usecases/).\\n\\n::: {.footnotes role=\\\"doc-endnotes\\\"}\\n\\n------------------------------------------------------------------------\\n\\n1.
      \ ::: {#fn:1}\\n    But you should refer to [tinkr\\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\\n    see what might change in the Markdown syntax\\n    style.\_[\u21A9\uFE0E](#fnref:1){.footnote-backref
      role=\\\"doc-backlink\\\"}\\n    :::\\n\\n2.  ::: {#fn:2}\\n    adding code
      to handle Hugo's [\\\"bewildering array of possible config\\n    locations\\\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\\n
      \   and two possible formats (YAML and TOML) is out of scope for\\n    babeldown
      at this point.\_[\u21A9\uFE0E](#fnref:2){.footnote-backref\\n    role=\\\"doc-backlink\\\"}\\n
      \   :::\\n:::\\n\",\"published_at\":1695686400,\"updated_at\":1695713432,\"registered_at\":0,\"indexed_at\":1731078596,\"authors\":[{\"url\":
      \"https://orcid.org/0000-0002-2815-0399\", \"name\": \"Ma\xEBlle Salmon\"},
      {\"url\": \"https://orcid.org/0000-0002-4522-7466\", \"name\": \"Yanina Bellini
      Saibene\"}],\"image\":\"placeholder.png\",\"tags\":[\"Tech Notes\",\"Multilingual\"],\"language\":\"en\",\"reference\":[],\"relationships\":[],\"blog_name\":\"rOpenSci
      - open tools for open science\",\"blog_slug\":\"ropensci\",\"rid\":\"hc1tq-gq010\",\"blog\":{\"id\":
      \"ba402233-14af-48e4-b8b1-6fd22ac75a0c\", \"ror\": null, \"issn\": null, \"slug\":
      \"ropensci\", \"title\": \"rOpenSci - open tools for open science\", \"filter\":
      null, \"prefix\": \"10.59350\", \"secure\": true, \"status\": \"active\", \"authors\":
      [{\"name\": \"The rOpenSci Team\"}], \"favicon\": \"https://ropensci.org/apple-touch-icon.png\",
      \"funding\": null, \"indexed\": false, \"license\": \"https://creativecommons.org/licenses/by/4.0/legalcode\",
      \"use_api\": null, \"user_id\": \"3ea9676b-41b6-4e57-aeda-44a7d7fe1dba\", \"category\":
      \"computerAndInformationSciences\", \"feed_url\": \"https://ropensci.org/blog/index.json\",
      \"language\": \"en\", \"mastodon\": null, \"generator\": \"Hugo\", \"created_at\":
      1693440000, \"updated_at\": 1734596407, \"description\": \"Open Tools and R
      Packages for Open Science\", \"feed_format\": \"application/feed+json\", \"community_id\":
      \"1e70f18f-d85d-4b86-af0c-0dc375b091bc\", \"relative_url\": null, \"use_mastodon\":
      false, \"canonical_url\": null, \"generator_raw\": \"Hugo -- gohugo.io\", \"home_page_url\":
      \"https://ropensci.org/blog\", \"registered_at\": 1729793201, \"archive_prefix\":
      \"https://wayback.archive-it.org/22126/20231105110646/\", \"current_feed_url\":
      null}}"
    headers:
      access-control-allow-origin:
      - '*'
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 9045fc2d1c86f95c-DUS
      content-location:
      - /posts?guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F&select=id%2C%20guid%2C%20doi%2C%20url%2C%20archive_url%2C%20title%2C%20summary%2C%20abstract%2C%20content_text%2C%20published_at%2C%20updated_at%2C%20registered_at%2C%20indexed_at%2C%20authors%2C%20image%2C%20tags%2C%20language%2C%20reference%2C%20relationships%2C%20blog_name%2C%20blog_slug%2C%20rid%2C%20blog%3A%20blogs%21inner%28%2A%29
      content-profile:
      - public
      content-range:
      - 0-0/*
      content-type:
      - application/vnd.pgrst.object+json; charset=utf-8
      date:
      - Sun, 19 Jan 2025 10:01:43 GMT
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - zggonsjmmfozmfxlrjmg
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-kong-proxy-latency:
      - '1'
      x-kong-upstream-latency:
      - '6'
    http_version: HTTP/2
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      connection:
      - keep-alive
      host:
      - rogue-scholar.org
      user-agent:
      - python-httpx/0.27.2
    method: GET
    uri: https://rogue-scholar.org/api/records?q=doi:10.59350%2Fevaf9-2qf48
  response:
    content: '{"hits": {"hits": [{"id": "hc1tq-gq010", "created": "2024-10-13T18:08:39.114064+00:00",
      "updated": "2025-01-19T09:41:19.262359+00:00", "links": {"self": "https://rogue-scholar.org/api/records/hc1tq-gq010",
      "self_html": "https://rogue-scholar.org/records/hc1tq-gq010", "self_doi": "https://rogue-scholar.org/doi/10.59350/evaf9-2qf48",
      "doi": "https://handle.stage.datacite.org/10.59350/evaf9-2qf48", "parent": "https://rogue-scholar.org/api/records/eqa30-aqm27",
      "parent_html": "https://rogue-scholar.org/records/eqa30-aqm27", "self_iiif_manifest":
      "https://rogue-scholar.org/api/iiif/record:hc1tq-gq010/manifest", "self_iiif_sequence":
      "https://rogue-scholar.org/api/iiif/record:hc1tq-gq010/sequence/default", "files":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/files", "media_files": "https://rogue-scholar.org/api/records/hc1tq-gq010/media-files",
      "archive": "https://rogue-scholar.org/api/records/hc1tq-gq010/files-archive",
      "archive_media": "https://rogue-scholar.org/api/records/hc1tq-gq010/media-files-archive",
      "latest": "https://rogue-scholar.org/api/records/hc1tq-gq010/versions/latest",
      "latest_html": "https://rogue-scholar.org/records/hc1tq-gq010/latest", "draft":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft", "versions": "https://rogue-scholar.org/api/records/hc1tq-gq010/versions",
      "access_links": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/links",
      "access_grants": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/grants",
      "access_users": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/users",
      "access_groups": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/groups",
      "access_request": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/request",
      "access": "https://rogue-scholar.org/api/records/hc1tq-gq010/access", "reserve_doi":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/pids/doi", "communities":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/communities", "communities-suggestions":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/communities-suggestions",
      "requests": "https://rogue-scholar.org/api/records/hc1tq-gq010/requests"}, "revision_id":
      17, "parent": {"id": "eqa30-aqm27", "access": {"grants": [], "owned_by": {"user":
      "4"}, "links": [], "settings": {"allow_user_requests": false, "allow_guest_requests":
      false, "accept_conditions_text": null, "secret_link_expiration": 0}}, "communities":
      {"ids": ["19c501a7-647b-4a11-9f5e-cf400817cce3", "734b8591-2695-421b-b9df-1895cd787c4e",
      "9a3fd0d3-9da5-4d61-9ae7-cd83b72caa24"], "default": "19c501a7-647b-4a11-9f5e-cf400817cce3",
      "entries": [{"id": "19c501a7-647b-4a11-9f5e-cf400817cce3", "created": "2024-10-05T18:45:09.152768+00:00",
      "updated": "2025-01-18T07:38:30.007347+00:00", "links": {}, "revision_id": 218,
      "slug": "ropensci", "metadata": {"title": "rOpenSci - open tools for open science",
      "type": {"id": "blog", "title": {"de": "Blog", "en": "Blog", "sv": "Blogg"}},
      "website": "https://ropensci.org/blog"}, "access": {"visibility": "public",
      "members_visibility": "public", "member_policy": "open", "record_policy": "open",
      "review_policy": "closed"}, "is_verified": false, "deletion_status": {"is_deleted":
      false, "status": "P"}, "children": {"allow": false}}, {"id": "734b8591-2695-421b-b9df-1895cd787c4e",
      "created": "2024-12-13T12:10:14.635020+00:00", "updated": "2024-12-13T12:12:14.129259+00:00",
      "links": {}, "revision_id": 6, "slug": "markdown", "metadata": {"title": "Markdown",
      "type": {"id": "topic", "title": {"de": "Thema", "en": "Topic", "sv": "Tema"}}},
      "access": {"visibility": "public", "members_visibility": "public", "member_policy":
      "open", "record_policy": "open", "review_policy": "closed"}, "is_verified":
      false, "deletion_status": {"is_deleted": false, "status": "P"}, "children":
      {"allow": false}}, {"id": "9a3fd0d3-9da5-4d61-9ae7-cd83b72caa24", "created":
      "2024-10-28T20:01:45.704392+00:00", "updated": "2024-11-08T12:53:47.860049+00:00",
      "links": {}, "revision_id": 6, "slug": "hugo", "metadata": {"title": "Hugo",
      "type": {"id": "topic", "title": {"de": "Thema", "en": "Topic", "sv": "Tema"}}},
      "access": {"visibility": "public", "members_visibility": "public", "member_policy":
      "open", "record_policy": "open", "review_policy": "closed"}, "is_verified":
      false, "deletion_status": {"is_deleted": false, "status": "P"}, "children":
      {"allow": false}}]}, "pids": {}, "is_verified": false}, "versions": {"is_latest":
      true, "is_latest_draft": true, "index": 1}, "is_published": true, "is_draft":
      false, "pids": {"doi": {"identifier": "10.59350/evaf9-2qf48", "provider": "external"},
      "oai": {"identifier": "oai:invenio-rdm:hc1tq-gq010", "provider": "oai"}}, "metadata":
      {"resource_type": {"id": "publication-preprint", "title": {"de": "Preprint",
      "en": "Preprint", "sv": "Preprint"}}, "creators": [{"person_or_org": {"type":
      "personal", "name": "Salmon, Ma\u00eblle", "given_name": "Ma\u00eblle", "family_name":
      "Salmon", "identifiers": [{"identifier": "0000-0002-2815-0399", "scheme": "orcid"}]}},
      {"person_or_org": {"type": "personal", "name": "Saibene, Yanina Bellini", "given_name":
      "Yanina Bellini", "family_name": "Saibene", "identifiers": [{"identifier": "0000-0002-4522-7466",
      "scheme": "orcid"}]}}], "title": "How to Translate a Hugo Blog Post with Babeldown",
      "publication_date": "2023-09-26", "subjects": [{"id": "http://www.oecd.org/science/inno/38235147.pdf?1.2",
      "subject": "Computer and information sciences", "scheme": "FOS"}, {"subject":
      "Tech Notes"}, {"subject": "Multilingual"}], "dates": [{"date": "2023-09-26T02:00:00",
      "type": {"id": "issued", "title": {"de": "Ver\u00f6ffentlicht", "en": "Issued",
      "sv": "Utf\u00e4rdad"}}}, {"date": "2023-09-26T09:30:32", "type": {"id": "updated",
      "title": {"de": "Aktualisiert", "en": "Updated", "sv": "Uppdaterad"}}}], "languages":
      [{"id": "eng", "title": {"en": "English"}}], "identifiers": [{"identifier":
      "78af77d1-72ba-4d9d-92aa-9dc258bbf00a", "scheme": "uuid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/",
      "scheme": "guid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown",
      "scheme": "url"}], "rights": [{"id": "cc-by-4.0", "title": {"en": "Creative
      Commons Attribution 4.0 International"}, "description": {"en": "The Creative
      Commons Attribution license allows re-distribution and re-use of a licensed
      work on the condition that the creator is appropriately credited."}, "icon":
      "cc-by-icon", "props": {"url": "https://creativecommons.org/licenses/by/4.0/",
      "scheme": "spdx"}}], "description": "As part of our multilingual publishing
      project, and with funding from the R Consortium, we''ve worked on the R package
      babeldown for translating Markdown-based content using the DeepL API.In this
      tech note, we''ll show how you can use babeldown to translate a Hugo blog post!Motivation
      Translating a Markdown blog post from your R console is not only more comfortable
      (when you''ve already written said blog post in R), but also less frustrating.With"},
      "custom_fields": {"journal:journal": {"title": "rOpenSci - open tools for open
      science"}, "rs:content_text": "As part of our [multilingual publishing\nproject](/multilingual-publishing/),
      and with [funding from the R\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\nwe''ve
      worked on the R package\n[babeldown](https://docs.ropensci.org/babeldown/) for
      translating\nMarkdown-based content using the DeepL API.In this tech note, we''ll
      show\nhow you can use babeldown to translate a Hugo blog post!\n\n## Motivation\n\nTranslating
      a Markdown blog post from your R console is not only more\ncomfortable (when
      you''ve already written said blog post in R), but also\nless frustrating.With
      babeldown, compared to copy-pasting the content of\na blog post into some translation
      service, the Markdown syntax won''t be\nbroken^[^1]^, and code chunks won''t
      be translated.This works, because\nunder the hood, babeldown uses [tinkr](https://docs.ropensci.org/tinkr)\nto
      produce XML which it then sends to the DeepL API, flagging some tags\nas not
      to be translated. It then converts the XML translated by DeepL\nback into Markdown
      again.\n\nNow, as you might expect this machine-translated content isn''t perfect\nyet!You
      will still need a human or two to review and amend the\ntranslation.Why not
      have the humans translate the post from scratch\nthen?We have observed that
      editing an automatic translation is faster\nthan translating the whole post,
      and that it frees up mental space for\nfocusing on implementing translation
      rules such as gender-neutral\nphrasing.\n\n## Setup\n\n### Pre-requisites on
      the Hugo website\n\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\nassumes
      the Hugo website uses\n\n- leaf bundles (each post in a folder,\n  `content/path-to-leaf-bundle/index.md`);\n-
      multilingualism so that a post in (for example) Spanish lives in\n  `content/path-to-leaf-bundle/index.es.md`.\n\nbabeldown
      could be extended work with other Hugo multilingual setups. If\nyou''d be interested
      in using babeldown with a different setup, please\nopen an issue in the [babeldown\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\n\nNote
      that babeldown won''t be able to determine the default language of\nyour website^[^2]^
      so even if your website''s default language is\nEnglish, babeldown will place
      an English translation in a file called\n\".en.md\" not \".md\".Hugo will recognize
      the new file all the same (at\nleast in our setup).\n\n### DeepL pre-requisites\n\nFirst
      check that your desired source and target languages are supported\nby the DeepL
      API!Look up the [docs of the `source_lang` and\n`target_lang` API\nparameters](https://www.deepl.com/docs-api/translate-text)
      for a full\nlist.\n\nOnce you know you''ll be able to take advantage of the
      DeepL API, you''ll\nneed to create an account for [DeepL''s translation service\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\naccount requires registering a payment method with
      them.\n\n### R pre-requisites\n\nYou''ll need to install babeldown from rOpenSci
      R-universe:\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ninstall.packages(''babeldown'',
      repos = c(''https://ropensci.r-universe.dev'', ''https://cloud.r-project.org''))\n```\n:::\n\nThen,
      in each R session, set your DeepL API key via the environment\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\nretrieve it in your scripts like so:\n\n::: {.highlight}\n``` {.chroma
      tabindex=\"0\"}\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\"deepl\"))\n```\n:::\n\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\neach R session/script
      via\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nSys.setenv(\"DEEPL_API_URL\"
      = \"https://api.deepl.com\")\n```\n:::\n\n## Translation!\n\nYou could run the
      code below\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path
      = <path-to-post>,   source_lang = \"EN\",  target_lang = \"ES\",  formality
      = \"less\" # that''s how we roll here!)\n```\n:::\n\nbut we''d recommend a tad
      more work for your own good.\n\n## Translation using a Git/GitHub workflow\n\nIf
      you use version control, having the translation as a diff is very\nhandy!\n\n###
      First: In words and pictures\n\n- In the branch of your post (let''s call it
      \"new-post\") create a\n  placeholder: save your original blog post (`index.es.md`)
      under the\n  target blog post name (`index.en.md`) and commit it, then push.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/placeholder.png\"\nalt=\"Diagram
      with on the left the leaf folder in the new-post branch with the post in Spanish
      with the text &#39;Hola&#39; and an image; on the right the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;hola&#39;, the post
      with the English target filename with the text &#39;hola&#39;, and the image.\"
      />\n</figure>\n\n- Create a new branch, \"auto-translate\" for instance.\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/translate.png\"\nalt=\"Diagram
      with on the left the leaf folder in the auto-translate branch with the post
      in Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image; on the right the only thing that
      changed is that the content of the post with the English target filename is
      now &#39;hello&#39;.\" />\n</figure>\n\n- Commit and push the result.\n- Open
      a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of your post. The diff for the target blog\n  post will be the diff between
      the source and target languages! If you\n  have the good habit to start a new
      line after each sentence / sentence\n  part, it''s even better.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/pr.png\"\nalt=\"Drawing
      of the pull request from the auto-translate to the new-post branch where the
      difference is that the content of the post with the English target filename
      has now been translated to English.\" />\n</figure>\n\n- The human translators
      can then a open a second PR to the translation\n  branch with their edits! Or
      they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Again: In code\n\nNow let''s go over this again, but with a coding workflow.
      Here, we''ll\nuse fs and gert (but you do you!), and we''ll assume your current\ndirectory
      is the root of the website folder, and also the root of the\ngit repository.\n\n-
      In the post branch, (again, let''s call it \"new-post\"), save your\n  original
      blog post (`index.es.md`) under the target blog post name\n  (`index.en.md`)
      and commit it, then push.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nfs::file_copy(  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_add(file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_commit(\"Add
      translation placeholder\")gert::git_push()\n```\n:::\n\n- Create a new branch,
      \"auto-translate\" for instance.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ngert::git_branch_create(\"translation-tech-note\")\n```\n:::\n\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path = file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\nYou can also omit the `post_path` argument if you''re
      running the code\nfrom RStudio IDE and if the open and focused file (the one
      you see above\nyour console) is the post to be translated.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\n- Commit the result with the code below.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ngert::git_add(file.path(\"content\", \"blog\", \"2023-10-01-r-universe-interviews\",
      \"index.en.md\"))gert::git_commit(\"Add translation\")gert::git_push()\n```\n:::\n\n-
      Open a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of\n  `\"content/blog/2023-10-01-r-universe-interviews/index.en.md\"`.\n\n-
      The human translators can then a open a *second* PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Summary of branches and PRs\n\nIn the end there should be two to three branches:\n\n-
      branch A with blog post in Spanish and placeholder blog post for\n  English
      (with Spanish content) -- PR to main;\n- branch B with blog post automatically
      translated to English -- PR to\n  branch A;\n- Optionally branch C with blog
      post''s English automatic translation\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\n  by a human are made as PR review suggestions
      in the PR from B to A.\n\nThe PR are merged in this order:\n\n- PR to branch
      B;\n- PR to branch A;\n- PR to main.\n\n### Real example\n\n- [PR adding a post
      to the rOpenSci\n  blog](https://github.com/ropensci/roweb3/pull/629), notice
      it''s a PR\n  from the **\"r-universe-interviews\"** branch to the **\"main\"\n  (default)**
      branch;\n- [PR adding the automatic\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it''s\n  a PR to the **\"r-universe-interviews\"** branch.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/pr-diff.png\"\nalt=\"Screenshot
      of the files tab of the pull request adding the automatic translation, where
      we observe Spanish text in the YAML metadata and Markdown content has been translated
      to English.\" />\n</figure>\n\nYanina tweaked the automatic translation by suggesting
      changes on the\nPR, then accepting them.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/pr-comments.png\"\nalt=\"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word &#39;article&#39; with &#39;blog
      post&#39; and fixing the name of &#39;R-universe&#39;.\" />\n</figure>\n\n###
      YAML fields\n\nBy default babeldown translates the YAML fields \"title\" and\n\"description\".If
      you have text in more of them, use the `yaml_fields`\nargument of `babeldown::deepl_translate_hugo()`.\n\nNote
      that if babeldown translates the title, it updates the slug.\n\n### Glossary\n\nImagine
      you have a few preferences for some words -- something you''ll\nbuild up over
      time.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nreadr::read_csv(  system.file(\"example-es-en.csv\",
      package = \"babeldown\"),   show_col_types = FALSE)\n```\n:::\n\n``` {tabindex=\"0\"}\n##
      # A tibble: 2 \u00d7 2##   Spanish     English   ##   <chr>       <chr>     ##
      1 paquete     package   ## 2 repositorio repository\n```\n\nYou can record these
      preferred translations in a glossary in your DeepL\naccount\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ndeepl_upsert_glossary(  <path-to-csv-file>,  glossary_name
      = \"rstats-glosario\",  target_lang = \"Spanish\",  source_lang = \"English\")\n```\n:::\n\nYou''d
      use the exact same code to *update* the glossary hence the name\n\"upsert\"
      for the function.You need one glossary per source language /\ntarget language
      pair: the English-Spanish glossary can''t be used for\nSpanish to English for
      instance.\n\nIn your `babeldown::deepl_translate_hugo()` call you then use the\nglossary
      name (here \"rstats-glosario\") for the `glossary` argument.\n\n### Formality\n\n`deepl_translate_hugo()`
      has a `formality` argument.Now, the DeepL API\nonly supports this for some languages
      as explained in the [documentation\nof the `formality` API\nparameter](https://www.deepl.com/docs-api/translate-text):\n\n>
      Sets whether the translated text should lean towards formal or\n> informal language.
      This feature currently only works for target\n> languages DE (German), FR (French),
      IT (Italian), ES (Spanish), NL\n> (Dutch), PL (Polish), PT-BR and PT-PT (Portuguese),
      JA (Japanese), and\n> RU (Russian). (...) Setting this parameter with a target
      language that\n> does not support formality will fail, unless one of the prefer\\_...\n>
      options are used.\n\nTherefore to be sure a translation will work, instead of
      writing\n`formality = \"less\"` you can write `formality = \"prefer_less\"`
      which\nwill only use formality if available.\n\n## Conclusion\n\nIn this post
      we explained how to translate a Hugo blog post using\nbabeldown.Although the
      gist is to use one call to\n`babeldown::deepl_translate_hugo()`,\n\n- one needs
      to indicate the API URL and key,\n- one can improve results by using the function''s
      different arguments,\n- we recommend pairing the translation with a Git + GitHub
      (or GitLab,\n  gitea...) workflow.\n\nbabeldown has\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\nfor
      translating Quarto book chapters, any Markdown file, and any\nMarkdown string,
      with similar arguments and recommended usage, so\nexplore its reference!\n\nWe''d
      be happy to hear about your [use cases](/usecases/).\n\n[^1]: But you should
      refer to [tinkr\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\n    see what might change in the Markdown syntax style.\u00a0\n\n[^2]: adding
      code to handle Hugo''s [\"bewildering array of possible\n    config\n    locations\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\n    and
      two possible formats (YAML and TOML) is out of scope for\n    babeldown at this
      point.", "rs:image": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/placeholder.png"},
      "access": {"record": "public", "files": "public", "embargo": {"active": false,
      "reason": null}, "status": "metadata-only"}, "files": {"enabled": false, "order":
      [], "count": 0, "total_bytes": 0, "entries": {}}, "media_files": {"enabled":
      false, "order": [], "count": 0, "total_bytes": 0, "entries": {}}, "status":
      "published", "deletion_status": {"is_deleted": false, "status": "P"}, "stats":
      {"this_version": {"views": 2, "unique_views": 2, "downloads": 0, "unique_downloads":
      0, "data_volume": 0.0}, "all_versions": {"views": 2, "unique_views": 2, "downloads":
      0, "unique_downloads": 0, "data_volume": 0.0}}}], "total": 1}, "aggregations":
      {"language": {"buckets": [{"key": "eng", "doc_count": 1, "label": "English",
      "is_selected": false}], "label": "Languages"}, "subject": {"buckets": [{"key":
      "Computer and information sciences", "doc_count": 1, "label": "Computer and
      information sciences", "is_selected": false}, {"key": "Multilingual", "doc_count":
      1, "label": "Multilingual", "is_selected": false}, {"key": "Tech Notes", "doc_count":
      1, "label": "Tech Notes", "is_selected": false}], "label": "Subjects"}}, "sortBy":
      "bestmatch", "links": {"self": "https://rogue-scholar.org/api/records?page=1&q=doi%3A10.59350%2Fevaf9-2qf48&size=25&sort=bestmatch"}}'
    headers:
      connection:
      - close
      content-encoding:
      - br
      content-security-policy:
      - 'default-src ''self'' data: ''unsafe-inline'' blob: fly.storage.tigris.dev;
        img-src *'
      content-type:
      - application/json
      date:
      - Sun, 19 Jan 2025 10:01:43 GMT
      fly-request-id:
      - 01JHZ05PAPZVG9R9FD3V7FVSAA-arn
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '1'
      server:
      - Fly/a3e18ae92 (2025-01-16)
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      transfer-encoding:
      - chunked
      via:
      - 1.1 fly.io
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '900'
      x-ratelimit-remaining:
      - '849'
      x-ratelimit-reset:
      - '1737280905'
      x-user-id:
      - '4'
      x-xss-protection:
      - 1; mode=block
    http_version: HTTP/1.1
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      connection:
      - keep-alive
      host:
      - rogue-scholar.org
      user-agent:
      - python-httpx/0.27.2
    method: GET
    uri: https://rogue-scholar.org/api/communities?q=slug:ropensci
  response:
    content: '{"hits": {"hits": [{"id": "19c501a7-647b-4a11-9f5e-cf400817cce3", "created":
      "2024-10-05T18:45:09.152768+00:00", "updated": "2025-01-18T07:38:28.860321+00:00",
      "links": {"featured": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/featured",
      "self": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3",
      "self_html": "https://rogue-scholar.org/communities/ropensci", "settings_html":
      "https://rogue-scholar.org/communities/ropensci/settings", "logo": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/logo",
      "rename": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/rename",
      "members": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/members",
      "public_members": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/members/public",
      "invitations": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/invitations",
      "requests": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/requests",
      "records": "https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/records"},
      "revision_id": 217, "slug": "ropensci", "metadata": {"title": "rOpenSci - open
      tools for open science", "description": "Open Tools and R Packages for Open
      Science", "type": {"id": "blog", "title": {"de": "Blog", "en": "Blog", "sv":
      "Blogg"}}, "website": "https://ropensci.org/blog"}, "access": {"visibility":
      "public", "members_visibility": "public", "member_policy": "open", "record_policy":
      "open", "review_policy": "open"}, "custom_fields": {"rs:feed_url": "https://ropensci.org/blog/index.json",
      "rs:feed_format": "application/feed+json", "rs:generator": "Hugo", "rs:prefix":
      "10.59350", "rs:license": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "rs:joined": "August 31, 2023", "rs:language": "English", "rs:category": "Computer
      and information sciences"}, "is_verified": false, "deletion_status": {"is_deleted":
      false, "status": "P"}, "children": {"allow": false}}], "total": 1}, "aggregations":
      {"type": {"buckets": [{"key": "blog", "doc_count": 1, "label": "blog", "is_selected":
      false}], "label": "Type"}, "visibility": {"buckets": [{"key": "public", "doc_count":
      1, "label": "Public", "is_selected": false}], "label": "Visibility"}}, "sortBy":
      "bestmatch", "links": {"self": "https://rogue-scholar.org/api/communities?page=1&q=slug%3Aropensci&size=25&sort=bestmatch"}}'
    headers:
      connection:
      - close
      content-encoding:
      - br
      content-security-policy:
      - 'default-src ''self'' data: ''unsafe-inline'' blob: fly.storage.tigris.dev;
        img-src *'
      content-type:
      - application/json
      date:
      - Sun, 19 Jan 2025 10:01:44 GMT
      fly-request-id:
      - 01JHZ05PY9KVA960YQC4K4CFNQ-arn
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '0'
      server:
      - Fly/a3e18ae92 (2025-01-16)
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      transfer-encoding:
      - chunked
      via:
      - 1.1 fly.io
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '900'
      x-ratelimit-remaining:
      - '848'
      x-ratelimit-reset:
      - '1737280905'
      x-user-id:
      - '4'
      x-xss-protection:
      - 1; mode=block
    http_version: HTTP/1.1
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      connection:
      - keep-alive
      content-length:
      - '0'
      host:
      - rogue-scholar.org
      user-agent:
      - python-httpx/0.27.2
    method: POST
    uri: https://rogue-scholar.org/api/records/hc1tq-gq010/draft
  response:
    content: '{"id": "hc1tq-gq010", "created": "2025-01-19T08:53:22.486535+00:00",
      "updated": "2025-01-19T10:01:45.075431+00:00", "links": {"self": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft",
      "self_html": "https://rogue-scholar.org/uploads/hc1tq-gq010", "doi": "https://handle.stage.datacite.org/10.59350/evaf9-2qf48",
      "self_iiif_manifest": "https://rogue-scholar.org/api/iiif/draft:hc1tq-gq010/manifest",
      "self_iiif_sequence": "https://rogue-scholar.org/api/iiif/draft:hc1tq-gq010/sequence/default",
      "files": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/files", "media_files":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/media-files", "archive":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/files-archive", "archive_media":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/media-files-archive",
      "record": "https://rogue-scholar.org/api/records/hc1tq-gq010", "record_html":
      "https://rogue-scholar.org/records/hc1tq-gq010", "publish": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/actions/publish",
      "review": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/review",
      "versions": "https://rogue-scholar.org/api/records/hc1tq-gq010/versions", "access_links":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/links", "access_grants":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/grants", "access_users":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/users", "access_groups":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/groups", "access_request":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/request", "access":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access", "reserve_doi": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/pids/doi",
      "communities": "https://rogue-scholar.org/api/records/hc1tq-gq010/communities",
      "communities-suggestions": "https://rogue-scholar.org/api/records/hc1tq-gq010/communities-suggestions",
      "requests": "https://rogue-scholar.org/api/records/hc1tq-gq010/requests"}, "revision_id":
      24, "parent": {"id": "eqa30-aqm27", "access": {"grants": [], "owned_by": {"user":
      "4"}, "links": [], "settings": {"allow_user_requests": false, "allow_guest_requests":
      false, "accept_conditions_text": null, "secret_link_expiration": 0}}, "communities":
      {"ids": ["19c501a7-647b-4a11-9f5e-cf400817cce3", "734b8591-2695-421b-b9df-1895cd787c4e",
      "9a3fd0d3-9da5-4d61-9ae7-cd83b72caa24"], "default": "19c501a7-647b-4a11-9f5e-cf400817cce3",
      "entries": [{"id": "19c501a7-647b-4a11-9f5e-cf400817cce3", "created": "2024-10-05T18:45:09.152768+00:00",
      "updated": "2025-01-18T07:38:30.007347+00:00", "links": {}, "revision_id": 218,
      "slug": "ropensci", "metadata": {"title": "rOpenSci - open tools for open science",
      "description": "Open Tools and R Packages for Open Science", "type": {"id":
      "blog", "title": {"de": "Blog", "en": "Blog", "sv": "Blogg"}}, "website": "https://ropensci.org/blog"},
      "access": {"visibility": "public", "members_visibility": "public", "member_policy":
      "open", "record_policy": "open", "review_policy": "open"}, "custom_fields":
      {"rs:feed_url": "https://ropensci.org/blog/index.json", "rs:feed_format": "application/feed+json",
      "rs:generator": "Hugo", "rs:prefix": "10.59350", "rs:license": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "rs:joined": "August 31, 2023", "rs:language": "English", "rs:category": "Computer
      and information sciences"}, "is_verified": false, "deletion_status": {"is_deleted":
      false, "status": "P"}, "children": {"allow": false}}, {"id": "734b8591-2695-421b-b9df-1895cd787c4e",
      "created": "2024-12-13T12:10:14.635020+00:00", "updated": "2024-12-13T12:12:14.129259+00:00",
      "links": {}, "revision_id": 6, "slug": "markdown", "metadata": {"title": "Markdown",
      "description": "Blog posts about (scholarly) markdown.", "type": {"id": "topic",
      "title": {"de": "Thema", "en": "Topic", "sv": "Tema"}}}, "access": {"visibility":
      "public", "members_visibility": "public", "member_policy": "open", "record_policy":
      "open", "review_policy": "open"}, "custom_fields": {}, "is_verified": false,
      "deletion_status": {"is_deleted": false, "status": "P"}, "children": {"allow":
      false}}, {"id": "9a3fd0d3-9da5-4d61-9ae7-cd83b72caa24", "created": "2024-10-28T20:01:45.704392+00:00",
      "updated": "2024-11-08T12:53:47.860049+00:00", "links": {}, "revision_id": 6,
      "slug": "hugo", "metadata": {"title": "Hugo", "description": "Blog posts about
      the Hugo blogging platform.", "type": {"id": "topic", "title": {"de": "Thema",
      "en": "Topic", "sv": "Tema"}}}, "access": {"visibility": "public", "members_visibility":
      "public", "member_policy": "open", "record_policy": "open", "review_policy":
      "open"}, "custom_fields": {}, "is_verified": false, "deletion_status": {"is_deleted":
      false, "status": "P"}, "children": {"allow": false}}]}, "pids": {}, "is_verified":
      false}, "versions": {"is_latest": true, "is_latest_draft": true, "index": 1},
      "is_published": true, "is_draft": true, "expires_at": "2025-01-19 08:53:22.486548",
      "pids": {"doi": {"identifier": "10.59350/evaf9-2qf48", "provider": "external"},
      "oai": {"identifier": "oai:invenio-rdm:hc1tq-gq010", "provider": "oai"}}, "metadata":
      {"resource_type": {"id": "publication-preprint", "title": {"de": "Preprint",
      "en": "Preprint", "sv": "Preprint"}}, "creators": [{"person_or_org": {"type":
      "personal", "name": "Salmon, Ma\u00eblle", "given_name": "Ma\u00eblle", "family_name":
      "Salmon", "identifiers": [{"identifier": "0000-0002-2815-0399", "scheme": "orcid"}]}},
      {"person_or_org": {"type": "personal", "name": "Saibene, Yanina Bellini", "given_name":
      "Yanina Bellini", "family_name": "Saibene", "identifiers": [{"identifier": "0000-0002-4522-7466",
      "scheme": "orcid"}]}}], "title": "How to Translate a Hugo Blog Post with Babeldown",
      "publication_date": "2023-09-26", "subjects": [{"id": "http://www.oecd.org/science/inno/38235147.pdf?1.2",
      "subject": "Computer and information sciences", "scheme": "FOS"}, {"subject":
      "Tech Notes"}, {"subject": "Multilingual"}], "dates": [{"date": "2023-09-26T02:00:00",
      "type": {"id": "issued", "title": {"de": "Ver\u00f6ffentlicht", "en": "Issued",
      "sv": "Utf\u00e4rdad"}}}, {"date": "2023-09-26T09:30:32", "type": {"id": "updated",
      "title": {"de": "Aktualisiert", "en": "Updated", "sv": "Uppdaterad"}}}], "languages":
      [{"id": "eng", "title": {"en": "English"}}], "identifiers": [{"identifier":
      "78af77d1-72ba-4d9d-92aa-9dc258bbf00a", "scheme": "uuid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/",
      "scheme": "guid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown",
      "scheme": "url"}], "rights": [{"id": "cc-by-4.0", "title": {"en": "Creative
      Commons Attribution 4.0 International"}, "description": {"en": "The Creative
      Commons Attribution license allows re-distribution and re-use of a licensed
      work on the condition that the creator is appropriately credited."}, "icon":
      "cc-by-icon", "props": {"url": "https://creativecommons.org/licenses/by/4.0/",
      "scheme": "spdx"}}], "description": "As part of our multilingual publishing
      project, and with funding from the R Consortium, we''ve worked on the R package
      babeldown for translating Markdown-based content using the DeepL API.In this
      tech note, we''ll show how you can use babeldown to translate a Hugo blog post!Motivation
      Translating a Markdown blog post from your R console is not only more comfortable
      (when you''ve already written said blog post in R), but also less frustrating.With"},
      "custom_fields": {"journal:journal": {"title": "rOpenSci - open tools for open
      science"}, "rs:content_text": "As part of our [multilingual publishing\nproject](/multilingual-publishing/),
      and with [funding from the R\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\nwe''ve
      worked on the R package\n[babeldown](https://docs.ropensci.org/babeldown/) for
      translating\nMarkdown-based content using the DeepL API.In this tech note, we''ll
      show\nhow you can use babeldown to translate a Hugo blog post!\n\n## Motivation\n\nTranslating
      a Markdown blog post from your R console is not only more\ncomfortable (when
      you''ve already written said blog post in R), but also\nless frustrating.With
      babeldown, compared to copy-pasting the content of\na blog post into some translation
      service, the Markdown syntax won''t be\nbroken^[^1]^, and code chunks won''t
      be translated.This works, because\nunder the hood, babeldown uses [tinkr](https://docs.ropensci.org/tinkr)\nto
      produce XML which it then sends to the DeepL API, flagging some tags\nas not
      to be translated. It then converts the XML translated by DeepL\nback into Markdown
      again.\n\nNow, as you might expect this machine-translated content isn''t perfect\nyet!You
      will still need a human or two to review and amend the\ntranslation.Why not
      have the humans translate the post from scratch\nthen?We have observed that
      editing an automatic translation is faster\nthan translating the whole post,
      and that it frees up mental space for\nfocusing on implementing translation
      rules such as gender-neutral\nphrasing.\n\n## Setup\n\n### Pre-requisites on
      the Hugo website\n\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\nassumes
      the Hugo website uses\n\n- leaf bundles (each post in a folder,\n  `content/path-to-leaf-bundle/index.md`);\n-
      multilingualism so that a post in (for example) Spanish lives in\n  `content/path-to-leaf-bundle/index.es.md`.\n\nbabeldown
      could be extended work with other Hugo multilingual setups. If\nyou''d be interested
      in using babeldown with a different setup, please\nopen an issue in the [babeldown\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\n\nNote
      that babeldown won''t be able to determine the default language of\nyour website^[^2]^
      so even if your website''s default language is\nEnglish, babeldown will place
      an English translation in a file called\n\".en.md\" not \".md\".Hugo will recognize
      the new file all the same (at\nleast in our setup).\n\n### DeepL pre-requisites\n\nFirst
      check that your desired source and target languages are supported\nby the DeepL
      API!Look up the [docs of the `source_lang` and\n`target_lang` API\nparameters](https://www.deepl.com/docs-api/translate-text)
      for a full\nlist.\n\nOnce you know you''ll be able to take advantage of the
      DeepL API, you''ll\nneed to create an account for [DeepL''s translation service\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\naccount requires registering a payment method with
      them.\n\n### R pre-requisites\n\nYou''ll need to install babeldown from rOpenSci
      R-universe:\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ninstall.packages(''babeldown'',
      repos = c(''https://ropensci.r-universe.dev'', ''https://cloud.r-project.org''))\n```\n:::\n\nThen,
      in each R session, set your DeepL API key via the environment\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\nretrieve it in your scripts like so:\n\n::: {.highlight}\n``` {.chroma
      tabindex=\"0\"}\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\"deepl\"))\n```\n:::\n\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\neach R session/script
      via\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nSys.setenv(\"DEEPL_API_URL\"
      = \"https://api.deepl.com\")\n```\n:::\n\n## Translation!\n\nYou could run the
      code below\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path
      = <path-to-post>,   source_lang = \"EN\",  target_lang = \"ES\",  formality
      = \"less\" # that''s how we roll here!)\n```\n:::\n\nbut we''d recommend a tad
      more work for your own good.\n\n## Translation using a Git/GitHub workflow\n\nIf
      you use version control, having the translation as a diff is very\nhandy!\n\n###
      First: In words and pictures\n\n- In the branch of your post (let''s call it
      \"new-post\") create a\n  placeholder: save your original blog post (`index.es.md`)
      under the\n  target blog post name (`index.en.md`) and commit it, then push.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/placeholder.png\"\nalt=\"Diagram
      with on the left the leaf folder in the new-post branch with the post in Spanish
      with the text &#39;Hola&#39; and an image; on the right the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;hola&#39;, the post
      with the English target filename with the text &#39;hola&#39;, and the image.\"
      />\n</figure>\n\n- Create a new branch, \"auto-translate\" for instance.\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/translate.png\"\nalt=\"Diagram
      with on the left the leaf folder in the auto-translate branch with the post
      in Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image; on the right the only thing that
      changed is that the content of the post with the English target filename is
      now &#39;hello&#39;.\" />\n</figure>\n\n- Commit and push the result.\n- Open
      a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of your post. The diff for the target blog\n  post will be the diff between
      the source and target languages! If you\n  have the good habit to start a new
      line after each sentence / sentence\n  part, it''s even better.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/pr.png\"\nalt=\"Drawing
      of the pull request from the auto-translate to the new-post branch where the
      difference is that the content of the post with the English target filename
      has now been translated to English.\" />\n</figure>\n\n- The human translators
      can then a open a second PR to the translation\n  branch with their edits! Or
      they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Again: In code\n\nNow let''s go over this again, but with a coding workflow.
      Here, we''ll\nuse fs and gert (but you do you!), and we''ll assume your current\ndirectory
      is the root of the website folder, and also the root of the\ngit repository.\n\n-
      In the post branch, (again, let''s call it \"new-post\"), save your\n  original
      blog post (`index.es.md`) under the target blog post name\n  (`index.en.md`)
      and commit it, then push.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nfs::file_copy(  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_add(file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_commit(\"Add
      translation placeholder\")gert::git_push()\n```\n:::\n\n- Create a new branch,
      \"auto-translate\" for instance.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ngert::git_branch_create(\"translation-tech-note\")\n```\n:::\n\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path = file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\nYou can also omit the `post_path` argument if you''re
      running the code\nfrom RStudio IDE and if the open and focused file (the one
      you see above\nyour console) is the post to be translated.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\n- Commit the result with the code below.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ngert::git_add(file.path(\"content\", \"blog\", \"2023-10-01-r-universe-interviews\",
      \"index.en.md\"))gert::git_commit(\"Add translation\")gert::git_push()\n```\n:::\n\n-
      Open a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of\n  `\"content/blog/2023-10-01-r-universe-interviews/index.en.md\"`.\n\n-
      The human translators can then a open a *second* PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Summary of branches and PRs\n\nIn the end there should be two to three branches:\n\n-
      branch A with blog post in Spanish and placeholder blog post for\n  English
      (with Spanish content) -- PR to main;\n- branch B with blog post automatically
      translated to English -- PR to\n  branch A;\n- Optionally branch C with blog
      post''s English automatic translation\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\n  by a human are made as PR review suggestions
      in the PR from B to A.\n\nThe PR are merged in this order:\n\n- PR to branch
      B;\n- PR to branch A;\n- PR to main.\n\n### Real example\n\n- [PR adding a post
      to the rOpenSci\n  blog](https://github.com/ropensci/roweb3/pull/629), notice
      it''s a PR\n  from the **\"r-universe-interviews\"** branch to the **\"main\"\n  (default)**
      branch;\n- [PR adding the automatic\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it''s\n  a PR to the **\"r-universe-interviews\"** branch.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/pr-diff.png\"\nalt=\"Screenshot
      of the files tab of the pull request adding the automatic translation, where
      we observe Spanish text in the YAML metadata and Markdown content has been translated
      to English.\" />\n</figure>\n\nYanina tweaked the automatic translation by suggesting
      changes on the\nPR, then accepting them.\n\n<figure>\n<img\nsrc=\"/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/pr-comments.png\"\nalt=\"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word &#39;article&#39; with &#39;blog
      post&#39; and fixing the name of &#39;R-universe&#39;.\" />\n</figure>\n\n###
      YAML fields\n\nBy default babeldown translates the YAML fields \"title\" and\n\"description\".If
      you have text in more of them, use the `yaml_fields`\nargument of `babeldown::deepl_translate_hugo()`.\n\nNote
      that if babeldown translates the title, it updates the slug.\n\n### Glossary\n\nImagine
      you have a few preferences for some words -- something you''ll\nbuild up over
      time.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nreadr::read_csv(  system.file(\"example-es-en.csv\",
      package = \"babeldown\"),   show_col_types = FALSE)\n```\n:::\n\n``` {tabindex=\"0\"}\n##
      # A tibble: 2 \u00d7 2##   Spanish     English   ##   <chr>       <chr>     ##
      1 paquete     package   ## 2 repositorio repository\n```\n\nYou can record these
      preferred translations in a glossary in your DeepL\naccount\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ndeepl_upsert_glossary(  <path-to-csv-file>,  glossary_name
      = \"rstats-glosario\",  target_lang = \"Spanish\",  source_lang = \"English\")\n```\n:::\n\nYou''d
      use the exact same code to *update* the glossary hence the name\n\"upsert\"
      for the function.You need one glossary per source language /\ntarget language
      pair: the English-Spanish glossary can''t be used for\nSpanish to English for
      instance.\n\nIn your `babeldown::deepl_translate_hugo()` call you then use the\nglossary
      name (here \"rstats-glosario\") for the `glossary` argument.\n\n### Formality\n\n`deepl_translate_hugo()`
      has a `formality` argument.Now, the DeepL API\nonly supports this for some languages
      as explained in the [documentation\nof the `formality` API\nparameter](https://www.deepl.com/docs-api/translate-text):\n\n>
      Sets whether the translated text should lean towards formal or\n> informal language.
      This feature currently only works for target\n> languages DE (German), FR (French),
      IT (Italian), ES (Spanish), NL\n> (Dutch), PL (Polish), PT-BR and PT-PT (Portuguese),
      JA (Japanese), and\n> RU (Russian). (...) Setting this parameter with a target
      language that\n> does not support formality will fail, unless one of the prefer\\_...\n>
      options are used.\n\nTherefore to be sure a translation will work, instead of
      writing\n`formality = \"less\"` you can write `formality = \"prefer_less\"`
      which\nwill only use formality if available.\n\n## Conclusion\n\nIn this post
      we explained how to translate a Hugo blog post using\nbabeldown.Although the
      gist is to use one call to\n`babeldown::deepl_translate_hugo()`,\n\n- one needs
      to indicate the API URL and key,\n- one can improve results by using the function''s
      different arguments,\n- we recommend pairing the translation with a Git + GitHub
      (or GitLab,\n  gitea...) workflow.\n\nbabeldown has\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\nfor
      translating Quarto book chapters, any Markdown file, and any\nMarkdown string,
      with similar arguments and recommended usage, so\nexplore its reference!\n\nWe''d
      be happy to hear about your [use cases](/usecases/).\n\n[^1]: But you should
      refer to [tinkr\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\n    see what might change in the Markdown syntax style.\u00a0\n\n[^2]: adding
      code to handle Hugo''s [\"bewildering array of possible\n    config\n    locations\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\n    and
      two possible formats (YAML and TOML) is out of scope for\n    babeldown at this
      point.", "rs:image": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/placeholder.png"},
      "access": {"record": "public", "files": "public", "embargo": {"active": false,
      "reason": null}, "status": "metadata-only"}, "files": {"enabled": false, "order":
      [], "count": 0, "total_bytes": 0, "entries": {}}, "media_files": {"enabled":
      false, "order": [], "count": 0, "total_bytes": 0, "entries": {}}, "status":
      "published"}'
    headers:
      connection:
      - close
      content-encoding:
      - br
      content-security-policy:
      - 'default-src ''self'' data: ''unsafe-inline'' blob: fly.storage.tigris.dev;
        img-src *'
      content-type:
      - application/json
      date:
      - Sun, 19 Jan 2025 10:01:45 GMT
      etag:
      - '"24"'
      fly-request-id:
      - 01JHZ05QETCTE42XJ0ZFDF97YX-arn
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '0'
      server:
      - Fly/a3e18ae92 (2025-01-16)
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTczNzI4MDkwNSwiZXhwIjoxNzM3MzY3MzA1fQ.IjhtTFZNZ2RLUDd6TlBSZXRPVWo4b3N3YjE0N21aUUtpIg.WNc34KjV_2CiW_UT9oOOzBv9fDCJY38FQY1tss6qhCTQl5qiinifSZElRUAd-d10xqd1HhSnUpbVU6rp2rYDSg;
        Expires=Sun, 26 Jan 2025 10:01:45 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      transfer-encoding:
      - chunked
      via:
      - 1.1 fly.io
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '900'
      x-ratelimit-remaining:
      - '849'
      x-ratelimit-reset:
      - '1737280906'
      x-user-id:
      - '4'
      x-xss-protection:
      - 1; mode=block
    http_version: HTTP/1.1
    status_code: 201
- request:
    body: '{"pids": {"doi": {"identifier": "10.59350/evaf9-2qf48", "provider": "external"}},
      "access": {"record": "public", "files": "public"}, "files": {"enabled": false},
      "metadata": {"resource_type": {"id": "publication-preprint"}, "creators": [{"person_or_org":
      {"name": "Salmon, Ma\u00eblle", "given_name": "Ma\u00eblle", "family_name":
      "Salmon", "type": "personal", "identifiers": [{"identifier": "0000-0002-2815-0399",
      "scheme": "orcid"}]}}, {"person_or_org": {"name": "Saibene, Yanina Bellini",
      "given_name": "Yanina Bellini", "family_name": "Saibene", "type": "personal",
      "identifiers": [{"identifier": "0000-0002-4522-7466", "scheme": "orcid"}]}}],
      "title": "How to Translate a Hugo Blog Post with Babeldown", "publication_date":
      "2023-09-26", "dates": [{"date": "2023-09-26T02:00:00", "type": {"id": "issued"}},
      {"date": "2023-09-26T09:30:32", "type": {"id": "updated"}}], "subjects": [{"id":
      "http://www.oecd.org/science/inno/38235147.pdf?1.2", "subject": "Computer and
      information sciences"}, {"subject": "Tech Notes"}, {"subject": "Multilingual"}],
      "description": "As part of our multilingual publishing project, and with funding
      from the R Consortium, we\u2019ve worked on the R package babeldown for translating
      Markdown-based content using the DeepL API.In this tech note, we\u2019ll show
      how you can use babeldown to translate a Hugo blog post!", "rights": [{"id":
      "cc-by-4.0"}], "languages": [{"id": "eng"}], "identifiers": [{"identifier":
      "78af77d1-72ba-4d9d-92aa-9dc258bbf00a", "scheme": "uuid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/",
      "scheme": "guid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown",
      "scheme": "url"}]}, "custom_fields": {"journal:journal": {"title": "rOpenSci
      - open tools for open science"}, "rs:content_text": "As part of our [multilingual
      publishing\nproject](/multilingual-publishing/), and with [funding from the
      R\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\nwe''ve
      worked on the R package\n[babeldown](https://docs.ropensci.org/babeldown/) for
      translating\nMarkdown-based content using the DeepL API.In this tech note, we''ll
      show\nhow you can use babeldown to translate a Hugo blog post!\n\n## Motivation\n\nTranslating
      a Markdown blog post from your R console is not only more\ncomfortable (when
      you''ve already written said blog post in R), but also\nless frustrating.With
      babeldown, compared to copy-pasting the content of\na blog post into some translation
      service, the Markdown syntax won''t be\nbroken^[1](#fn:1){.footnote-ref role=\"doc-noteref\"}^,
      and code chunks\nwon''t be translated.This works, because under the hood, babeldown
      uses\n[tinkr](https://docs.ropensci.org/tinkr) to produce XML which it then\nsends
      to the DeepL API, flagging some tags as not to be translated. It\nthen converts
      the XML translated by DeepL back into Markdown again.\n\nNow, as you might expect
      this machine-translated content isn''t perfect\nyet!You will still need a human
      or two to review and amend the\ntranslation.Why not have the humans translate
      the post from scratch\nthen?We have observed that editing an automatic translation
      is faster\nthan translating the whole post, and that it frees up mental space
      for\nfocusing on implementing translation rules such as gender-neutral\nphrasing.\n\n##
      Setup\n\n### Pre-requisites on the Hugo website\n\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\nassumes
      the Hugo website uses\n\n- leaf bundles (each post in a folder,\n  `content/path-to-leaf-bundle/index.md`);\n-
      multilingualism so that a post in (for example) Spanish lives in\n  `content/path-to-leaf-bundle/index.es.md`.\n\nbabeldown
      could be extended work with other Hugo multilingual setups. If\nyou''d be interested
      in using babeldown with a different setup, please\nopen an issue in the [babeldown\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\n\nNote
      that babeldown won''t be able to determine the default language of\nyour website^[2](#fn:2){.footnote-ref
      role=\"doc-noteref\"}^ so even if\nyour website''s default language is English,
      babeldown will place an\nEnglish translation in a file called \".en.md\" not
      \".md\".Hugo will\nrecognize the new file all the same (at least in our setup).\n\n###
      DeepL pre-requisites\n\nFirst check that your desired source and target languages
      are supported\nby the DeepL API!Look up the [docs of the `source_lang` and\n`target_lang`
      API\nparameters](https://www.deepl.com/docs-api/translate-text) for a full\nlist.\n\nOnce
      you know you''ll be able to take advantage of the DeepL API, you''ll\nneed to
      create an account for [DeepL''s translation service\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\naccount requires registering a payment method with
      them.\n\n### R pre-requisites\n\nYou''ll need to install babeldown from rOpenSci
      R-universe:\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ninstall.packages(''babeldown'',
      repos = c(''https://ropensci.r-universe.dev'', ''https://cloud.r-project.org''))\n```\n:::\n\nThen,
      in each R session, set your DeepL API key via the environment\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\nretrieve it in your scripts like so:\n\n::: {.highlight}\n``` {.chroma
      tabindex=\"0\"}\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\"deepl\"))\n```\n:::\n\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\neach R session/script
      via\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nSys.setenv(\"DEEPL_API_URL\"
      = \"https://api.deepl.com\")\n```\n:::\n\n## Translation!\n\nYou could run the
      code below\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path
      = <path-to-post>,   source_lang = \"EN\",  target_lang = \"ES\",  formality
      = \"less\" # that''s how we roll here!)\n```\n:::\n\nbut we''d recommend a tad
      more work for your own good.\n\n## Translation using a Git/GitHub workflow\n\nIf
      you use version control, having the translation as a diff is very\nhandy!\n\n###
      First: In words and pictures\n\n- In the branch of your post (let''s call it
      \"new-post\") create a\n  placeholder: save your original blog post (`index.es.md`)
      under the\n  target blog post name (`index.en.md`) and commit it, then push.\n\n<figure>\n<img
      src=\"placeholder.png\"\nalt=\"Diagram with on the left the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;Hola&#39; and an
      image; on the right the leaf folder in the new-post branch with the post in
      Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image.\" />\n</figure>\n\n- Create a new
      branch, \"auto-translate\" for instance.\n- Run `babeldown::deepl_translate_hugo()`
      with `force = TRUE`.\n\n<figure>\n<img src=\"translate.png\"\nalt=\"Diagram
      with on the left the leaf folder in the auto-translate branch with the post
      in Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image; on the right the only thing that
      changed is that the content of the post with the English target filename is
      now &#39;hello&#39;.\" />\n</figure>\n\n- Commit and push the result.\n- Open
      a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of your post. The diff for the target blog\n  post will be the diff between
      the source and target languages! If you\n  have the good habit to start a new
      line after each sentence / sentence\n  part, it''s even better.\n\n<figure>\n<img
      src=\"pr.png\"\nalt=\"Drawing of the pull request from the auto-translate to
      the new-post branch where the difference is that the content of the post with
      the English target filename has now been translated to English.\" />\n</figure>\n\n-
      The human translators can then a open a second PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Again: In code\n\nNow let''s go over this again, but with a coding workflow.
      Here, we''ll\nuse fs and gert (but you do you!), and we''ll assume your current\ndirectory
      is the root of the website folder, and also the root of the\ngit repository.\n\n-
      In the post branch, (again, let''s call it \"new-post\"), save your\n  original
      blog post (`index.es.md`) under the target blog post name\n  (`index.en.md`)
      and commit it, then push.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nfs::file_copy(  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_add(file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_commit(\"Add
      translation placeholder\")gert::git_push()\n```\n:::\n\n- Create a new branch,
      \"auto-translate\" for instance.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ngert::git_branch_create(\"translation-tech-note\")\n```\n:::\n\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path = file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\nYou can also omit the `post_path` argument if you''re
      running the code\nfrom RStudio IDE and if the open and focused file (the one
      you see above\nyour console) is the post to be translated.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\n- Commit the result with the code below.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ngert::git_add(file.path(\"content\", \"blog\", \"2023-10-01-r-universe-interviews\",
      \"index.en.md\"))gert::git_commit(\"Add translation\")gert::git_push()\n```\n:::\n\n-
      Open a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of\n  `\"content/blog/2023-10-01-r-universe-interviews/index.en.md\"`.\n\n-
      The human translators can then a open a *second* PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Summary of branches and PRs\n\nIn the end there should be two to three branches:\n\n-
      branch A with blog post in Spanish and placeholder blog post for\n  English
      (with Spanish content) -- PR to main;\n- branch B with blog post automatically
      translated to English -- PR to\n  branch A;\n- Optionally branch C with blog
      post''s English automatic translation\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\n  by a human are made as PR review suggestions
      in the PR from B to A.\n\nThe PR are merged in this order:\n\n- PR to branch
      B;\n- PR to branch A;\n- PR to main.\n\n### Real example\n\n- [PR adding a post
      to the rOpenSci\n  blog](https://github.com/ropensci/roweb3/pull/629), notice
      it''s a PR\n  from the **\"r-universe-interviews\"** branch to the **\"main\"\n  (default)**
      branch;\n- [PR adding the automatic\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it''s\n  a PR to the **\"r-universe-interviews\"** branch.\n\n<figure>\n<img
      src=\"pr-diff.png\"\nalt=\"Screenshot of the files tab of the pull request adding
      the automatic translation, where we observe Spanish text in the YAML metadata
      and Markdown content has been translated to English.\" />\n</figure>\n\nYanina
      tweaked the automatic translation by suggesting changes on the\nPR, then accepting
      them.\n\n<figure>\n<img src=\"pr-comments.png\"\nalt=\"Screenshot of the main
      tab of the pull request adding the automatic translation, where we observe a
      comment by Yanina replacing the word &#39;article&#39; with &#39;blog post&#39;
      and fixing the name of &#39;R-universe&#39;.\" />\n</figure>\n\n### YAML fields\n\nBy
      default babeldown translates the YAML fields \"title\" and\n\"description\".If
      you have text in more of them, use the `yaml_fields`\nargument of `babeldown::deepl_translate_hugo()`.\n\nNote
      that if babeldown translates the title, it updates the slug.\n\n### Glossary\n\nImagine
      you have a few preferences for some words -- something you''ll\nbuild up over
      time.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nreadr::read_csv(  system.file(\"example-es-en.csv\",
      package = \"babeldown\"),   show_col_types = FALSE)\n```\n:::\n\n``` {tabindex=\"0\"}\n##
      # A tibble: 2 \u00d7 2##   Spanish     English   ##   <chr>       <chr>     ##
      1 paquete     package   ## 2 repositorio repository\n```\n\nYou can record these
      preferred translations in a glossary in your DeepL\naccount\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ndeepl_upsert_glossary(  <path-to-csv-file>,  glossary_name
      = \"rstats-glosario\",  target_lang = \"Spanish\",  source_lang = \"English\")\n```\n:::\n\nYou''d
      use the exact same code to *update* the glossary hence the name\n\"upsert\"
      for the function.You need one glossary per source language /\ntarget language
      pair: the English-Spanish glossary can''t be used for\nSpanish to English for
      instance.\n\nIn your `babeldown::deepl_translate_hugo()` call you then use the\nglossary
      name (here \"rstats-glosario\") for the `glossary` argument.\n\n### Formality\n\n`deepl_translate_hugo()`
      has a `formality` argument.Now, the DeepL API\nonly supports this for some languages
      as explained in the [documentation\nof the `formality` API\nparameter](https://www.deepl.com/docs-api/translate-text):\n\n>
      Sets whether the translated text should lean towards formal or\n> informal language.
      This feature currently only works for target\n> languages DE (German), FR (French),
      IT (Italian), ES (Spanish), NL\n> (Dutch), PL (Polish), PT-BR and PT-PT (Portuguese),
      JA (Japanese), and\n> RU (Russian). (...) Setting this parameter with a target
      language that\n> does not support formality will fail, unless one of the prefer\\_...\n>
      options are used.\n\nTherefore to be sure a translation will work, instead of
      writing\n`formality = \"less\"` you can write `formality = \"prefer_less\"`
      which\nwill only use formality if available.\n\n## Conclusion\n\nIn this post
      we explained how to translate a Hugo blog post using\nbabeldown.Although the
      gist is to use one call to\n`babeldown::deepl_translate_hugo()`,\n\n- one needs
      to indicate the API URL and key,\n- one can improve results by using the function''s
      different arguments,\n- we recommend pairing the translation with a Git + GitHub
      (or GitLab,\n  gitea...) workflow.\n\nbabeldown has\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\nfor
      translating Quarto book chapters, any Markdown file, and any\nMarkdown string,
      with similar arguments and recommended usage, so\nexplore its reference!\n\nWe''d
      be happy to hear about your [use cases](/usecases/).\n\n::: {.footnotes role=\"doc-endnotes\"}\n\n------------------------------------------------------------------------\n\n1.  :::
      {#fn:1}\n    But you should refer to [tinkr\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\n    see what might change in the Markdown syntax\n    style.\u00a0[\u21a9\ufe0e](#fnref:1){.footnote-backref
      role=\"doc-backlink\"}\n    :::\n\n2.  ::: {#fn:2}\n    adding code to handle
      Hugo''s [\"bewildering array of possible config\n    locations\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\n    and
      two possible formats (YAML and TOML) is out of scope for\n    babeldown at this
      point.\u00a0[\u21a9\ufe0e](#fnref:2){.footnote-backref\n    role=\"doc-backlink\"}\n    :::\n:::\n",
      "rs:image": "placeholder.png"}}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      connection:
      - keep-alive
      content-length:
      - '16439'
      content-type:
      - application/json
      host:
      - rogue-scholar.org
      user-agent:
      - python-httpx/0.27.2
    method: PUT
    uri: https://rogue-scholar.org/api/records/hc1tq-gq010/draft
  response:
    content: '{"id": "hc1tq-gq010", "created": "2025-01-19T08:53:22.486535+00:00",
      "updated": "2025-01-19T10:01:46.348860+00:00", "links": {"self": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft",
      "self_html": "https://rogue-scholar.org/uploads/hc1tq-gq010", "doi": "https://handle.stage.datacite.org/10.59350/evaf9-2qf48",
      "self_iiif_manifest": "https://rogue-scholar.org/api/iiif/draft:hc1tq-gq010/manifest",
      "self_iiif_sequence": "https://rogue-scholar.org/api/iiif/draft:hc1tq-gq010/sequence/default",
      "files": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/files", "media_files":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/media-files", "archive":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/files-archive", "archive_media":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/media-files-archive",
      "record": "https://rogue-scholar.org/api/records/hc1tq-gq010", "record_html":
      "https://rogue-scholar.org/records/hc1tq-gq010", "publish": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/actions/publish",
      "review": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/review",
      "versions": "https://rogue-scholar.org/api/records/hc1tq-gq010/versions", "access_links":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/links", "access_grants":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/grants", "access_users":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/users", "access_groups":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/groups", "access_request":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access/request", "access":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/access", "reserve_doi": "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/pids/doi",
      "communities": "https://rogue-scholar.org/api/records/hc1tq-gq010/communities",
      "communities-suggestions": "https://rogue-scholar.org/api/records/hc1tq-gq010/communities-suggestions",
      "requests": "https://rogue-scholar.org/api/records/hc1tq-gq010/requests"}, "revision_id":
      26, "parent": {"id": "eqa30-aqm27", "access": {"grants": [], "owned_by": {"user":
      "4"}, "links": [], "settings": {"allow_user_requests": false, "allow_guest_requests":
      false, "accept_conditions_text": null, "secret_link_expiration": 0}}, "communities":
      {"ids": ["19c501a7-647b-4a11-9f5e-cf400817cce3", "734b8591-2695-421b-b9df-1895cd787c4e",
      "9a3fd0d3-9da5-4d61-9ae7-cd83b72caa24"], "default": "19c501a7-647b-4a11-9f5e-cf400817cce3",
      "entries": [{"id": "19c501a7-647b-4a11-9f5e-cf400817cce3", "created": "2024-10-05T18:45:09.152768+00:00",
      "updated": "2025-01-18T07:38:30.007347+00:00", "links": {}, "revision_id": 218,
      "slug": "ropensci", "metadata": {"title": "rOpenSci - open tools for open science",
      "description": "Open Tools and R Packages for Open Science", "type": {"id":
      "blog", "title": {"de": "Blog", "en": "Blog", "sv": "Blogg"}}, "website": "https://ropensci.org/blog"},
      "access": {"visibility": "public", "members_visibility": "public", "member_policy":
      "open", "record_policy": "open", "review_policy": "open"}, "custom_fields":
      {"rs:feed_url": "https://ropensci.org/blog/index.json", "rs:feed_format": "application/feed+json",
      "rs:generator": "Hugo", "rs:prefix": "10.59350", "rs:license": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "rs:joined": "August 31, 2023", "rs:language": "English", "rs:category": "Computer
      and information sciences"}, "is_verified": false, "deletion_status": {"is_deleted":
      false, "status": "P"}, "children": {"allow": false}}, {"id": "734b8591-2695-421b-b9df-1895cd787c4e",
      "created": "2024-12-13T12:10:14.635020+00:00", "updated": "2024-12-13T12:12:14.129259+00:00",
      "links": {}, "revision_id": 6, "slug": "markdown", "metadata": {"title": "Markdown",
      "description": "Blog posts about (scholarly) markdown.", "type": {"id": "topic",
      "title": {"de": "Thema", "en": "Topic", "sv": "Tema"}}}, "access": {"visibility":
      "public", "members_visibility": "public", "member_policy": "open", "record_policy":
      "open", "review_policy": "open"}, "custom_fields": {}, "is_verified": false,
      "deletion_status": {"is_deleted": false, "status": "P"}, "children": {"allow":
      false}}, {"id": "9a3fd0d3-9da5-4d61-9ae7-cd83b72caa24", "created": "2024-10-28T20:01:45.704392+00:00",
      "updated": "2024-11-08T12:53:47.860049+00:00", "links": {}, "revision_id": 6,
      "slug": "hugo", "metadata": {"title": "Hugo", "description": "Blog posts about
      the Hugo blogging platform.", "type": {"id": "topic", "title": {"de": "Thema",
      "en": "Topic", "sv": "Tema"}}}, "access": {"visibility": "public", "members_visibility":
      "public", "member_policy": "open", "record_policy": "open", "review_policy":
      "open"}, "custom_fields": {}, "is_verified": false, "deletion_status": {"is_deleted":
      false, "status": "P"}, "children": {"allow": false}}]}, "pids": {}, "is_verified":
      false}, "versions": {"is_latest": true, "is_latest_draft": true, "index": 1},
      "is_published": true, "is_draft": true, "expires_at": "2025-01-19 08:53:22.486548",
      "pids": {"doi": {"identifier": "10.59350/evaf9-2qf48", "provider": "external"}},
      "metadata": {"resource_type": {"id": "publication-preprint", "title": {"de":
      "Preprint", "en": "Preprint", "sv": "Preprint"}}, "creators": [{"person_or_org":
      {"type": "personal", "name": "Salmon, Ma\u00eblle", "given_name": "Ma\u00eblle",
      "family_name": "Salmon", "identifiers": [{"identifier": "0000-0002-2815-0399",
      "scheme": "orcid"}]}}, {"person_or_org": {"type": "personal", "name": "Saibene,
      Yanina Bellini", "given_name": "Yanina Bellini", "family_name": "Saibene", "identifiers":
      [{"identifier": "0000-0002-4522-7466", "scheme": "orcid"}]}}], "title": "How
      to Translate a Hugo Blog Post with Babeldown", "publication_date": "2023-09-26",
      "subjects": [{"id": "http://www.oecd.org/science/inno/38235147.pdf?1.2", "subject":
      "Computer and information sciences", "scheme": "FOS"}, {"subject": "Tech Notes"},
      {"subject": "Multilingual"}], "dates": [{"date": "2023-09-26T02:00:00", "type":
      {"id": "issued", "title": {"de": "Ver\u00f6ffentlicht", "en": "Issued", "sv":
      "Utf\u00e4rdad"}}}, {"date": "2023-09-26T09:30:32", "type": {"id": "updated",
      "title": {"de": "Aktualisiert", "en": "Updated", "sv": "Uppdaterad"}}}], "languages":
      [{"id": "eng", "title": {"en": "English"}}], "identifiers": [{"identifier":
      "78af77d1-72ba-4d9d-92aa-9dc258bbf00a", "scheme": "uuid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/",
      "scheme": "guid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown",
      "scheme": "url"}], "rights": [{"id": "cc-by-4.0", "title": {"en": "Creative
      Commons Attribution 4.0 International"}, "description": {"en": "The Creative
      Commons Attribution license allows re-distribution and re-use of a licensed
      work on the condition that the creator is appropriately credited."}, "icon":
      "cc-by-icon", "props": {"url": "https://creativecommons.org/licenses/by/4.0/",
      "scheme": "spdx"}}], "description": "As part of our multilingual publishing
      project, and with funding from the R Consortium, we''ve worked on the R package
      babeldown for translating Markdown-based content using the DeepL API.In this
      tech note, we''ll show how you can use babeldown to translate a Hugo blog post!"},
      "custom_fields": {"journal:journal": {"title": "rOpenSci - open tools for open
      science"}, "rs:content_text": "As part of our [multilingual publishing\nproject](/multilingual-publishing/),
      and with [funding from the R\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\nwe''ve
      worked on the R package\n[babeldown](https://docs.ropensci.org/babeldown/) for
      translating\nMarkdown-based content using the DeepL API.In this tech note, we''ll
      show\nhow you can use babeldown to translate a Hugo blog post!\n\n## Motivation\n\nTranslating
      a Markdown blog post from your R console is not only more\ncomfortable (when
      you''ve already written said blog post in R), but also\nless frustrating.With
      babeldown, compared to copy-pasting the content of\na blog post into some translation
      service, the Markdown syntax won''t be\nbroken^[1](#fn:1){.footnote-ref role=\"doc-noteref\"}^,
      and code chunks\nwon''t be translated.This works, because under the hood, babeldown
      uses\n[tinkr](https://docs.ropensci.org/tinkr) to produce XML which it then\nsends
      to the DeepL API, flagging some tags as not to be translated. It\nthen converts
      the XML translated by DeepL back into Markdown again.\n\nNow, as you might expect
      this machine-translated content isn''t perfect\nyet!You will still need a human
      or two to review and amend the\ntranslation.Why not have the humans translate
      the post from scratch\nthen?We have observed that editing an automatic translation
      is faster\nthan translating the whole post, and that it frees up mental space
      for\nfocusing on implementing translation rules such as gender-neutral\nphrasing.\n\n##
      Setup\n\n### Pre-requisites on the Hugo website\n\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\nassumes
      the Hugo website uses\n\n- leaf bundles (each post in a folder,\n  `content/path-to-leaf-bundle/index.md`);\n-
      multilingualism so that a post in (for example) Spanish lives in\n  `content/path-to-leaf-bundle/index.es.md`.\n\nbabeldown
      could be extended work with other Hugo multilingual setups. If\nyou''d be interested
      in using babeldown with a different setup, please\nopen an issue in the [babeldown\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\n\nNote
      that babeldown won''t be able to determine the default language of\nyour website^[2](#fn:2){.footnote-ref
      role=\"doc-noteref\"}^ so even if\nyour website''s default language is English,
      babeldown will place an\nEnglish translation in a file called \".en.md\" not
      \".md\".Hugo will\nrecognize the new file all the same (at least in our setup).\n\n###
      DeepL pre-requisites\n\nFirst check that your desired source and target languages
      are supported\nby the DeepL API!Look up the [docs of the `source_lang` and\n`target_lang`
      API\nparameters](https://www.deepl.com/docs-api/translate-text) for a full\nlist.\n\nOnce
      you know you''ll be able to take advantage of the DeepL API, you''ll\nneed to
      create an account for [DeepL''s translation service\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\naccount requires registering a payment method with
      them.\n\n### R pre-requisites\n\nYou''ll need to install babeldown from rOpenSci
      R-universe:\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ninstall.packages(''babeldown'',
      repos = c(''https://ropensci.r-universe.dev'', ''https://cloud.r-project.org''))\n```\n:::\n\nThen,
      in each R session, set your DeepL API key via the environment\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\nretrieve it in your scripts like so:\n\n::: {.highlight}\n``` {.chroma
      tabindex=\"0\"}\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\"deepl\"))\n```\n:::\n\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\neach R session/script
      via\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nSys.setenv(\"DEEPL_API_URL\"
      = \"https://api.deepl.com\")\n```\n:::\n\n## Translation!\n\nYou could run the
      code below\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path
      = <path-to-post>,   source_lang = \"EN\",  target_lang = \"ES\",  formality
      = \"less\" # that''s how we roll here!)\n```\n:::\n\nbut we''d recommend a tad
      more work for your own good.\n\n## Translation using a Git/GitHub workflow\n\nIf
      you use version control, having the translation as a diff is very\nhandy!\n\n###
      First: In words and pictures\n\n- In the branch of your post (let''s call it
      \"new-post\") create a\n  placeholder: save your original blog post (`index.es.md`)
      under the\n  target blog post name (`index.en.md`) and commit it, then push.\n\n<figure>\n<img
      src=\"placeholder.png\"\nalt=\"Diagram with on the left the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;Hola&#39; and an
      image; on the right the leaf folder in the new-post branch with the post in
      Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image.\" />\n</figure>\n\n- Create a new
      branch, \"auto-translate\" for instance.\n- Run `babeldown::deepl_translate_hugo()`
      with `force = TRUE`.\n\n<figure>\n<img src=\"translate.png\"\nalt=\"Diagram
      with on the left the leaf folder in the auto-translate branch with the post
      in Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image; on the right the only thing that
      changed is that the content of the post with the English target filename is
      now &#39;hello&#39;.\" />\n</figure>\n\n- Commit and push the result.\n- Open
      a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of your post. The diff for the target blog\n  post will be the diff between
      the source and target languages! If you\n  have the good habit to start a new
      line after each sentence / sentence\n  part, it''s even better.\n\n<figure>\n<img
      src=\"pr.png\"\nalt=\"Drawing of the pull request from the auto-translate to
      the new-post branch where the difference is that the content of the post with
      the English target filename has now been translated to English.\" />\n</figure>\n\n-
      The human translators can then a open a second PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Again: In code\n\nNow let''s go over this again, but with a coding workflow.
      Here, we''ll\nuse fs and gert (but you do you!), and we''ll assume your current\ndirectory
      is the root of the website folder, and also the root of the\ngit repository.\n\n-
      In the post branch, (again, let''s call it \"new-post\"), save your\n  original
      blog post (`index.es.md`) under the target blog post name\n  (`index.en.md`)
      and commit it, then push.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nfs::file_copy(  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_add(file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_commit(\"Add
      translation placeholder\")gert::git_push()\n```\n:::\n\n- Create a new branch,
      \"auto-translate\" for instance.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ngert::git_branch_create(\"translation-tech-note\")\n```\n:::\n\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path = file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\nYou can also omit the `post_path` argument if you''re
      running the code\nfrom RStudio IDE and if the open and focused file (the one
      you see above\nyour console) is the post to be translated.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\n- Commit the result with the code below.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ngert::git_add(file.path(\"content\", \"blog\", \"2023-10-01-r-universe-interviews\",
      \"index.en.md\"))gert::git_commit(\"Add translation\")gert::git_push()\n```\n:::\n\n-
      Open a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of\n  `\"content/blog/2023-10-01-r-universe-interviews/index.en.md\"`.\n\n-
      The human translators can then a open a *second* PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Summary of branches and PRs\n\nIn the end there should be two to three branches:\n\n-
      branch A with blog post in Spanish and placeholder blog post for\n  English
      (with Spanish content) -- PR to main;\n- branch B with blog post automatically
      translated to English -- PR to\n  branch A;\n- Optionally branch C with blog
      post''s English automatic translation\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\n  by a human are made as PR review suggestions
      in the PR from B to A.\n\nThe PR are merged in this order:\n\n- PR to branch
      B;\n- PR to branch A;\n- PR to main.\n\n### Real example\n\n- [PR adding a post
      to the rOpenSci\n  blog](https://github.com/ropensci/roweb3/pull/629), notice
      it''s a PR\n  from the **\"r-universe-interviews\"** branch to the **\"main\"\n  (default)**
      branch;\n- [PR adding the automatic\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it''s\n  a PR to the **\"r-universe-interviews\"** branch.\n\n<figure>\n<img
      src=\"pr-diff.png\"\nalt=\"Screenshot of the files tab of the pull request adding
      the automatic translation, where we observe Spanish text in the YAML metadata
      and Markdown content has been translated to English.\" />\n</figure>\n\nYanina
      tweaked the automatic translation by suggesting changes on the\nPR, then accepting
      them.\n\n<figure>\n<img src=\"pr-comments.png\"\nalt=\"Screenshot of the main
      tab of the pull request adding the automatic translation, where we observe a
      comment by Yanina replacing the word &#39;article&#39; with &#39;blog post&#39;
      and fixing the name of &#39;R-universe&#39;.\" />\n</figure>\n\n### YAML fields\n\nBy
      default babeldown translates the YAML fields \"title\" and\n\"description\".If
      you have text in more of them, use the `yaml_fields`\nargument of `babeldown::deepl_translate_hugo()`.\n\nNote
      that if babeldown translates the title, it updates the slug.\n\n### Glossary\n\nImagine
      you have a few preferences for some words -- something you''ll\nbuild up over
      time.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nreadr::read_csv(  system.file(\"example-es-en.csv\",
      package = \"babeldown\"),   show_col_types = FALSE)\n```\n:::\n\n``` {tabindex=\"0\"}\n##
      # A tibble: 2 \u00d7 2##   Spanish     English   ##   <chr>       <chr>     ##
      1 paquete     package   ## 2 repositorio repository\n```\n\nYou can record these
      preferred translations in a glossary in your DeepL\naccount\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ndeepl_upsert_glossary(  <path-to-csv-file>,  glossary_name
      = \"rstats-glosario\",  target_lang = \"Spanish\",  source_lang = \"English\")\n```\n:::\n\nYou''d
      use the exact same code to *update* the glossary hence the name\n\"upsert\"
      for the function.You need one glossary per source language /\ntarget language
      pair: the English-Spanish glossary can''t be used for\nSpanish to English for
      instance.\n\nIn your `babeldown::deepl_translate_hugo()` call you then use the\nglossary
      name (here \"rstats-glosario\") for the `glossary` argument.\n\n### Formality\n\n`deepl_translate_hugo()`
      has a `formality` argument.Now, the DeepL API\nonly supports this for some languages
      as explained in the [documentation\nof the `formality` API\nparameter](https://www.deepl.com/docs-api/translate-text):\n\n>
      Sets whether the translated text should lean towards formal or\n> informal language.
      This feature currently only works for target\n> languages DE (German), FR (French),
      IT (Italian), ES (Spanish), NL\n> (Dutch), PL (Polish), PT-BR and PT-PT (Portuguese),
      JA (Japanese), and\n> RU (Russian). (...) Setting this parameter with a target
      language that\n> does not support formality will fail, unless one of the prefer\\_...\n>
      options are used.\n\nTherefore to be sure a translation will work, instead of
      writing\n`formality = \"less\"` you can write `formality = \"prefer_less\"`
      which\nwill only use formality if available.\n\n## Conclusion\n\nIn this post
      we explained how to translate a Hugo blog post using\nbabeldown.Although the
      gist is to use one call to\n`babeldown::deepl_translate_hugo()`,\n\n- one needs
      to indicate the API URL and key,\n- one can improve results by using the function''s
      different arguments,\n- we recommend pairing the translation with a Git + GitHub
      (or GitLab,\n  gitea...) workflow.\n\nbabeldown has\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\nfor
      translating Quarto book chapters, any Markdown file, and any\nMarkdown string,
      with similar arguments and recommended usage, so\nexplore its reference!\n\nWe''d
      be happy to hear about your [use cases](/usecases/).\n\n::: {.footnotes role=\"doc-endnotes\"}\n\n------------------------------------------------------------------------\n\n1.  :::
      {#fn:1}\n    But you should refer to [tinkr\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\n    see what might change in the Markdown syntax\n    style.\u00a0[\u21a9\ufe0e](#fnref:1){.footnote-backref
      role=\"doc-backlink\"}\n    :::\n\n2.  ::: {#fn:2}\n    adding code to handle
      Hugo''s [\"bewildering array of possible config\n    locations\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\n    and
      two possible formats (YAML and TOML) is out of scope for\n    babeldown at this
      point.\u00a0[\u21a9\ufe0e](#fnref:2){.footnote-backref\n    role=\"doc-backlink\"}\n    :::\n:::"},
      "access": {"record": "public", "files": "public", "embargo": {"active": false,
      "reason": null}, "status": "metadata-only"}, "files": {"enabled": false, "order":
      [], "count": 0, "total_bytes": 0, "entries": {}}, "media_files": {"enabled":
      false, "order": [], "count": 0, "total_bytes": 0, "entries": {}}, "status":
      "published", "errors": [{"field": "custom_fields.rs:image", "messages": ["Not
      a valid URL."]}]}'
    headers:
      connection:
      - close
      content-encoding:
      - br
      content-security-policy:
      - 'default-src ''self'' data: ''unsafe-inline'' blob: fly.storage.tigris.dev;
        img-src *'
      content-type:
      - application/json
      date:
      - Sun, 19 Jan 2025 10:01:46 GMT
      etag:
      - '"26"'
      fly-request-id:
      - 01JHZ05RNTHR7WGM8P1887VGSP-arn
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '0'
      server:
      - Fly/a3e18ae92 (2025-01-16)
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTczNzI4MDkwNiwiZXhwIjoxNzM3MzY3MzA2fQ.InF6WnZqZGlaUjY3aTBNaDZqUnA0ekhpVUxxcnpla1puIg.ml6syC2qfyDv6lvqK4Hk8jWI7oqvd8X5AIQX4NOKdxAOPefIVkSMPAYej7yK_hUnyP7_AYsB_7vlL6zJUb7u3Q;
        Expires=Sun, 26 Jan 2025 10:01:46 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      transfer-encoding:
      - chunked
      via:
      - 1.1 fly.io
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '900'
      x-ratelimit-remaining:
      - '850'
      x-ratelimit-reset:
      - '1737280907'
      x-user-id:
      - '4'
      x-xss-protection:
      - 1; mode=block
    http_version: HTTP/1.1
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      connection:
      - keep-alive
      content-length:
      - '0'
      host:
      - rogue-scholar.org
      user-agent:
      - python-httpx/0.27.2
    method: POST
    uri: https://rogue-scholar.org/api/records/hc1tq-gq010/draft/actions/publish
  response:
    content: '{"id": "hc1tq-gq010", "created": "2024-10-13T18:08:39.114064+00:00",
      "updated": "2025-01-19T10:01:47.764225+00:00", "links": {"self": "https://rogue-scholar.org/api/records/hc1tq-gq010",
      "self_html": "https://rogue-scholar.org/records/hc1tq-gq010", "self_doi": "https://rogue-scholar.org/doi/10.59350/evaf9-2qf48",
      "doi": "https://handle.stage.datacite.org/10.59350/evaf9-2qf48", "parent": "https://rogue-scholar.org/api/records/eqa30-aqm27",
      "parent_html": "https://rogue-scholar.org/records/eqa30-aqm27", "self_iiif_manifest":
      "https://rogue-scholar.org/api/iiif/record:hc1tq-gq010/manifest", "self_iiif_sequence":
      "https://rogue-scholar.org/api/iiif/record:hc1tq-gq010/sequence/default", "files":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/files", "media_files": "https://rogue-scholar.org/api/records/hc1tq-gq010/media-files",
      "archive": "https://rogue-scholar.org/api/records/hc1tq-gq010/files-archive",
      "archive_media": "https://rogue-scholar.org/api/records/hc1tq-gq010/media-files-archive",
      "latest": "https://rogue-scholar.org/api/records/hc1tq-gq010/versions/latest",
      "latest_html": "https://rogue-scholar.org/records/hc1tq-gq010/latest", "draft":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft", "versions": "https://rogue-scholar.org/api/records/hc1tq-gq010/versions",
      "access_links": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/links",
      "access_grants": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/grants",
      "access_users": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/users",
      "access_groups": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/groups",
      "access_request": "https://rogue-scholar.org/api/records/hc1tq-gq010/access/request",
      "access": "https://rogue-scholar.org/api/records/hc1tq-gq010/access", "reserve_doi":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/draft/pids/doi", "communities":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/communities", "communities-suggestions":
      "https://rogue-scholar.org/api/records/hc1tq-gq010/communities-suggestions",
      "requests": "https://rogue-scholar.org/api/records/hc1tq-gq010/requests"}, "revision_id":
      19, "parent": {"id": "eqa30-aqm27", "access": {"grants": [], "owned_by": {"user":
      "4"}, "links": [], "settings": {"allow_user_requests": false, "allow_guest_requests":
      false, "accept_conditions_text": null, "secret_link_expiration": 0}}, "communities":
      {"ids": ["19c501a7-647b-4a11-9f5e-cf400817cce3", "734b8591-2695-421b-b9df-1895cd787c4e",
      "9a3fd0d3-9da5-4d61-9ae7-cd83b72caa24"], "default": "19c501a7-647b-4a11-9f5e-cf400817cce3",
      "entries": [{"id": "19c501a7-647b-4a11-9f5e-cf400817cce3", "created": "2024-10-05T18:45:09.152768+00:00",
      "updated": "2025-01-18T07:38:30.007347+00:00", "links": {}, "revision_id": 218,
      "slug": "ropensci", "metadata": {"title": "rOpenSci - open tools for open science",
      "description": "Open Tools and R Packages for Open Science", "type": {"id":
      "blog", "title": {"de": "Blog", "en": "Blog", "sv": "Blogg"}}, "website": "https://ropensci.org/blog"},
      "access": {"visibility": "public", "members_visibility": "public", "member_policy":
      "open", "record_policy": "open", "review_policy": "open"}, "custom_fields":
      {"rs:feed_url": "https://ropensci.org/blog/index.json", "rs:feed_format": "application/feed+json",
      "rs:generator": "Hugo", "rs:prefix": "10.59350", "rs:license": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "rs:joined": "August 31, 2023", "rs:language": "English", "rs:category": "Computer
      and information sciences"}, "is_verified": false, "deletion_status": {"is_deleted":
      false, "status": "P"}, "children": {"allow": false}}, {"id": "734b8591-2695-421b-b9df-1895cd787c4e",
      "created": "2024-12-13T12:10:14.635020+00:00", "updated": "2024-12-13T12:12:14.129259+00:00",
      "links": {}, "revision_id": 6, "slug": "markdown", "metadata": {"title": "Markdown",
      "description": "Blog posts about (scholarly) markdown.", "type": {"id": "topic",
      "title": {"de": "Thema", "en": "Topic", "sv": "Tema"}}}, "access": {"visibility":
      "public", "members_visibility": "public", "member_policy": "open", "record_policy":
      "open", "review_policy": "open"}, "custom_fields": {}, "is_verified": false,
      "deletion_status": {"is_deleted": false, "status": "P"}, "children": {"allow":
      false}}, {"id": "9a3fd0d3-9da5-4d61-9ae7-cd83b72caa24", "created": "2024-10-28T20:01:45.704392+00:00",
      "updated": "2024-11-08T12:53:47.860049+00:00", "links": {}, "revision_id": 6,
      "slug": "hugo", "metadata": {"title": "Hugo", "description": "Blog posts about
      the Hugo blogging platform.", "type": {"id": "topic", "title": {"de": "Thema",
      "en": "Topic", "sv": "Tema"}}}, "access": {"visibility": "public", "members_visibility":
      "public", "member_policy": "open", "record_policy": "open", "review_policy":
      "open"}, "custom_fields": {}, "is_verified": false, "deletion_status": {"is_deleted":
      false, "status": "P"}, "children": {"allow": false}}]}, "pids": {}, "is_verified":
      false}, "versions": {"is_latest": true, "is_latest_draft": true, "index": 1},
      "is_published": true, "is_draft": false, "pids": {"doi": {"identifier": "10.59350/evaf9-2qf48",
      "provider": "external"}, "oai": {"identifier": "oai:invenio-rdm:hc1tq-gq010",
      "provider": "oai"}}, "metadata": {"resource_type": {"id": "publication-preprint",
      "title": {"de": "Preprint", "en": "Preprint", "sv": "Preprint"}}, "creators":
      [{"person_or_org": {"type": "personal", "name": "Salmon, Ma\u00eblle", "given_name":
      "Ma\u00eblle", "family_name": "Salmon", "identifiers": [{"identifier": "0000-0002-2815-0399",
      "scheme": "orcid"}]}}, {"person_or_org": {"type": "personal", "name": "Saibene,
      Yanina Bellini", "given_name": "Yanina Bellini", "family_name": "Saibene", "identifiers":
      [{"identifier": "0000-0002-4522-7466", "scheme": "orcid"}]}}], "title": "How
      to Translate a Hugo Blog Post with Babeldown", "publication_date": "2023-09-26",
      "subjects": [{"id": "http://www.oecd.org/science/inno/38235147.pdf?1.2", "subject":
      "Computer and information sciences", "scheme": "FOS"}, {"subject": "Tech Notes"},
      {"subject": "Multilingual"}], "dates": [{"date": "2023-09-26T02:00:00", "type":
      {"id": "issued", "title": {"de": "Ver\u00f6ffentlicht", "en": "Issued", "sv":
      "Utf\u00e4rdad"}}}, {"date": "2023-09-26T09:30:32", "type": {"id": "updated",
      "title": {"de": "Aktualisiert", "en": "Updated", "sv": "Uppdaterad"}}}], "languages":
      [{"id": "eng", "title": {"en": "English"}}], "identifiers": [{"identifier":
      "78af77d1-72ba-4d9d-92aa-9dc258bbf00a", "scheme": "uuid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/",
      "scheme": "guid"}, {"identifier": "https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown",
      "scheme": "url"}], "rights": [{"id": "cc-by-4.0", "title": {"en": "Creative
      Commons Attribution 4.0 International"}, "description": {"en": "The Creative
      Commons Attribution license allows re-distribution and re-use of a licensed
      work on the condition that the creator is appropriately credited."}, "icon":
      "cc-by-icon", "props": {"url": "https://creativecommons.org/licenses/by/4.0/",
      "scheme": "spdx"}}], "description": "As part of our multilingual publishing
      project, and with funding from the R Consortium, we''ve worked on the R package
      babeldown for translating Markdown-based content using the DeepL API.In this
      tech note, we''ll show how you can use babeldown to translate a Hugo blog post!"},
      "custom_fields": {"journal:journal": {"title": "rOpenSci - open tools for open
      science"}, "rs:content_text": "As part of our [multilingual publishing\nproject](/multilingual-publishing/),
      and with [funding from the R\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\nwe''ve
      worked on the R package\n[babeldown](https://docs.ropensci.org/babeldown/) for
      translating\nMarkdown-based content using the DeepL API.In this tech note, we''ll
      show\nhow you can use babeldown to translate a Hugo blog post!\n\n## Motivation\n\nTranslating
      a Markdown blog post from your R console is not only more\ncomfortable (when
      you''ve already written said blog post in R), but also\nless frustrating.With
      babeldown, compared to copy-pasting the content of\na blog post into some translation
      service, the Markdown syntax won''t be\nbroken^[1](#fn:1){.footnote-ref role=\"doc-noteref\"}^,
      and code chunks\nwon''t be translated.This works, because under the hood, babeldown
      uses\n[tinkr](https://docs.ropensci.org/tinkr) to produce XML which it then\nsends
      to the DeepL API, flagging some tags as not to be translated. It\nthen converts
      the XML translated by DeepL back into Markdown again.\n\nNow, as you might expect
      this machine-translated content isn''t perfect\nyet!You will still need a human
      or two to review and amend the\ntranslation.Why not have the humans translate
      the post from scratch\nthen?We have observed that editing an automatic translation
      is faster\nthan translating the whole post, and that it frees up mental space
      for\nfocusing on implementing translation rules such as gender-neutral\nphrasing.\n\n##
      Setup\n\n### Pre-requisites on the Hugo website\n\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\nassumes
      the Hugo website uses\n\n- leaf bundles (each post in a folder,\n  `content/path-to-leaf-bundle/index.md`);\n-
      multilingualism so that a post in (for example) Spanish lives in\n  `content/path-to-leaf-bundle/index.es.md`.\n\nbabeldown
      could be extended work with other Hugo multilingual setups. If\nyou''d be interested
      in using babeldown with a different setup, please\nopen an issue in the [babeldown\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\n\nNote
      that babeldown won''t be able to determine the default language of\nyour website^[2](#fn:2){.footnote-ref
      role=\"doc-noteref\"}^ so even if\nyour website''s default language is English,
      babeldown will place an\nEnglish translation in a file called \".en.md\" not
      \".md\".Hugo will\nrecognize the new file all the same (at least in our setup).\n\n###
      DeepL pre-requisites\n\nFirst check that your desired source and target languages
      are supported\nby the DeepL API!Look up the [docs of the `source_lang` and\n`target_lang`
      API\nparameters](https://www.deepl.com/docs-api/translate-text) for a full\nlist.\n\nOnce
      you know you''ll be able to take advantage of the DeepL API, you''ll\nneed to
      create an account for [DeepL''s translation service\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\naccount requires registering a payment method with
      them.\n\n### R pre-requisites\n\nYou''ll need to install babeldown from rOpenSci
      R-universe:\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ninstall.packages(''babeldown'',
      repos = c(''https://ropensci.r-universe.dev'', ''https://cloud.r-project.org''))\n```\n:::\n\nThen,
      in each R session, set your DeepL API key via the environment\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\nretrieve it in your scripts like so:\n\n::: {.highlight}\n``` {.chroma
      tabindex=\"0\"}\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\"deepl\"))\n```\n:::\n\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\neach R session/script
      via\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nSys.setenv(\"DEEPL_API_URL\"
      = \"https://api.deepl.com\")\n```\n:::\n\n## Translation!\n\nYou could run the
      code below\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path
      = <path-to-post>,   source_lang = \"EN\",  target_lang = \"ES\",  formality
      = \"less\" # that''s how we roll here!)\n```\n:::\n\nbut we''d recommend a tad
      more work for your own good.\n\n## Translation using a Git/GitHub workflow\n\nIf
      you use version control, having the translation as a diff is very\nhandy!\n\n###
      First: In words and pictures\n\n- In the branch of your post (let''s call it
      \"new-post\") create a\n  placeholder: save your original blog post (`index.es.md`)
      under the\n  target blog post name (`index.en.md`) and commit it, then push.\n\n<figure>\n<img
      src=\"placeholder.png\"\nalt=\"Diagram with on the left the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;Hola&#39; and an
      image; on the right the leaf folder in the new-post branch with the post in
      Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image.\" />\n</figure>\n\n- Create a new
      branch, \"auto-translate\" for instance.\n- Run `babeldown::deepl_translate_hugo()`
      with `force = TRUE`.\n\n<figure>\n<img src=\"translate.png\"\nalt=\"Diagram
      with on the left the leaf folder in the auto-translate branch with the post
      in Spanish with the text &#39;hola&#39;, the post with the English target filename
      with the text &#39;hola&#39;, and the image; on the right the only thing that
      changed is that the content of the post with the English target filename is
      now &#39;hello&#39;.\" />\n</figure>\n\n- Commit and push the result.\n- Open
      a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of your post. The diff for the target blog\n  post will be the diff between
      the source and target languages! If you\n  have the good habit to start a new
      line after each sentence / sentence\n  part, it''s even better.\n\n<figure>\n<img
      src=\"pr.png\"\nalt=\"Drawing of the pull request from the auto-translate to
      the new-post branch where the difference is that the content of the post with
      the English target filename has now been translated to English.\" />\n</figure>\n\n-
      The human translators can then a open a second PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Again: In code\n\nNow let''s go over this again, but with a coding workflow.
      Here, we''ll\nuse fs and gert (but you do you!), and we''ll assume your current\ndirectory
      is the root of the website folder, and also the root of the\ngit repository.\n\n-
      In the post branch, (again, let''s call it \"new-post\"), save your\n  original
      blog post (`index.es.md`) under the target blog post name\n  (`index.en.md`)
      and commit it, then push.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nfs::file_copy(  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_add(file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.en.md\"))gert::git_commit(\"Add
      translation placeholder\")gert::git_push()\n```\n:::\n\n- Create a new branch,
      \"auto-translate\" for instance.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\ngert::git_branch_create(\"translation-tech-note\")\n```\n:::\n\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  post_path = file.path(\"content\",
      \"blog\", \"2023-10-01-r-universe-interviews\", \"index.es.md\"),  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\nYou can also omit the `post_path` argument if you''re
      running the code\nfrom RStudio IDE and if the open and focused file (the one
      you see above\nyour console) is the post to be translated.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\nbabeldown::deepl_translate_hugo(  force = TRUE,  yaml_fields
      = c(\"title\", \"description\", \"tags\"),  source_lang = \"ES\",  target_lang
      = \"EN-US\")\n```\n:::\n\n- Commit the result with the code below.\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ngert::git_add(file.path(\"content\", \"blog\", \"2023-10-01-r-universe-interviews\",
      \"index.en.md\"))gert::git_commit(\"Add translation\")gert::git_push()\n```\n:::\n\n-
      Open a PR from the **\"translation-tech-note\"** branch to the\n  **\"new-post\"**
      branch.The only difference between the two branches is\n  the automatic translation
      of\n  `\"content/blog/2023-10-01-r-universe-interviews/index.en.md\"`.\n\n-
      The human translators can then a open a *second* PR to the translation\n  branch
      with their edits! Or they can add their edits as [PR\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\n\n###
      Summary of branches and PRs\n\nIn the end there should be two to three branches:\n\n-
      branch A with blog post in Spanish and placeholder blog post for\n  English
      (with Spanish content) -- PR to main;\n- branch B with blog post automatically
      translated to English -- PR to\n  branch A;\n- Optionally branch C with blog
      post''s English automatic translation\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\n  by a human are made as PR review suggestions
      in the PR from B to A.\n\nThe PR are merged in this order:\n\n- PR to branch
      B;\n- PR to branch A;\n- PR to main.\n\n### Real example\n\n- [PR adding a post
      to the rOpenSci\n  blog](https://github.com/ropensci/roweb3/pull/629), notice
      it''s a PR\n  from the **\"r-universe-interviews\"** branch to the **\"main\"\n  (default)**
      branch;\n- [PR adding the automatic\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it''s\n  a PR to the **\"r-universe-interviews\"** branch.\n\n<figure>\n<img
      src=\"pr-diff.png\"\nalt=\"Screenshot of the files tab of the pull request adding
      the automatic translation, where we observe Spanish text in the YAML metadata
      and Markdown content has been translated to English.\" />\n</figure>\n\nYanina
      tweaked the automatic translation by suggesting changes on the\nPR, then accepting
      them.\n\n<figure>\n<img src=\"pr-comments.png\"\nalt=\"Screenshot of the main
      tab of the pull request adding the automatic translation, where we observe a
      comment by Yanina replacing the word &#39;article&#39; with &#39;blog post&#39;
      and fixing the name of &#39;R-universe&#39;.\" />\n</figure>\n\n### YAML fields\n\nBy
      default babeldown translates the YAML fields \"title\" and\n\"description\".If
      you have text in more of them, use the `yaml_fields`\nargument of `babeldown::deepl_translate_hugo()`.\n\nNote
      that if babeldown translates the title, it updates the slug.\n\n### Glossary\n\nImagine
      you have a few preferences for some words -- something you''ll\nbuild up over
      time.\n\n::: {.highlight}\n``` {.chroma tabindex=\"0\"}\nreadr::read_csv(  system.file(\"example-es-en.csv\",
      package = \"babeldown\"),   show_col_types = FALSE)\n```\n:::\n\n``` {tabindex=\"0\"}\n##
      # A tibble: 2 \u00d7 2##   Spanish     English   ##   <chr>       <chr>     ##
      1 paquete     package   ## 2 repositorio repository\n```\n\nYou can record these
      preferred translations in a glossary in your DeepL\naccount\n\n::: {.highlight}\n```
      {.chroma tabindex=\"0\"}\ndeepl_upsert_glossary(  <path-to-csv-file>,  glossary_name
      = \"rstats-glosario\",  target_lang = \"Spanish\",  source_lang = \"English\")\n```\n:::\n\nYou''d
      use the exact same code to *update* the glossary hence the name\n\"upsert\"
      for the function.You need one glossary per source language /\ntarget language
      pair: the English-Spanish glossary can''t be used for\nSpanish to English for
      instance.\n\nIn your `babeldown::deepl_translate_hugo()` call you then use the\nglossary
      name (here \"rstats-glosario\") for the `glossary` argument.\n\n### Formality\n\n`deepl_translate_hugo()`
      has a `formality` argument.Now, the DeepL API\nonly supports this for some languages
      as explained in the [documentation\nof the `formality` API\nparameter](https://www.deepl.com/docs-api/translate-text):\n\n>
      Sets whether the translated text should lean towards formal or\n> informal language.
      This feature currently only works for target\n> languages DE (German), FR (French),
      IT (Italian), ES (Spanish), NL\n> (Dutch), PL (Polish), PT-BR and PT-PT (Portuguese),
      JA (Japanese), and\n> RU (Russian). (...) Setting this parameter with a target
      language that\n> does not support formality will fail, unless one of the prefer\\_...\n>
      options are used.\n\nTherefore to be sure a translation will work, instead of
      writing\n`formality = \"less\"` you can write `formality = \"prefer_less\"`
      which\nwill only use formality if available.\n\n## Conclusion\n\nIn this post
      we explained how to translate a Hugo blog post using\nbabeldown.Although the
      gist is to use one call to\n`babeldown::deepl_translate_hugo()`,\n\n- one needs
      to indicate the API URL and key,\n- one can improve results by using the function''s
      different arguments,\n- we recommend pairing the translation with a Git + GitHub
      (or GitLab,\n  gitea...) workflow.\n\nbabeldown has\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\nfor
      translating Quarto book chapters, any Markdown file, and any\nMarkdown string,
      with similar arguments and recommended usage, so\nexplore its reference!\n\nWe''d
      be happy to hear about your [use cases](/usecases/).\n\n::: {.footnotes role=\"doc-endnotes\"}\n\n------------------------------------------------------------------------\n\n1.  :::
      {#fn:1}\n    But you should refer to [tinkr\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\n    see what might change in the Markdown syntax\n    style.\u00a0[\u21a9\ufe0e](#fnref:1){.footnote-backref
      role=\"doc-backlink\"}\n    :::\n\n2.  ::: {#fn:2}\n    adding code to handle
      Hugo''s [\"bewildering array of possible config\n    locations\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\n    and
      two possible formats (YAML and TOML) is out of scope for\n    babeldown at this
      point.\u00a0[\u21a9\ufe0e](#fnref:2){.footnote-backref\n    role=\"doc-backlink\"}\n    :::\n:::"},
      "access": {"record": "public", "files": "public", "embargo": {"active": false,
      "reason": null}, "status": "metadata-only"}, "files": {"enabled": false, "order":
      [], "count": 0, "total_bytes": 0, "entries": {}}, "media_files": {"enabled":
      false, "order": [], "count": 0, "total_bytes": 0, "entries": {}}, "status":
      "published", "deletion_status": {"is_deleted": false, "status": "P"}, "stats":
      {"this_version": {"views": 2, "unique_views": 2, "downloads": 0, "unique_downloads":
      0, "data_volume": 0.0}, "all_versions": {"views": 2, "unique_views": 2, "downloads":
      0, "unique_downloads": 0, "data_volume": 0.0}}}'
    headers:
      connection:
      - close
      content-encoding:
      - br
      content-security-policy:
      - 'default-src ''self'' data: ''unsafe-inline'' blob: fly.storage.tigris.dev;
        img-src *'
      content-type:
      - application/json
      date:
      - Sun, 19 Jan 2025 10:01:48 GMT
      etag:
      - '"19"'
      fly-request-id:
      - 01JHZ05SQKHE0E7MSVKFRGDM0T-arn
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '1'
      server:
      - Fly/a3e18ae92 (2025-01-16)
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTczNzI4MDkwOCwiZXhwIjoxNzM3MzY3MzA4fQ.IlRKMDVhbFRiMEk5Sk1Hd1NXRXZTWjRiYWh3VjZGY1VaIg.rjB4JeDwKUHxvGGCsvSRt7e8ZptUzd61LUTtk4AMEhdQan8CgIvC-x0j4IvsvZaZDviaeKJfw5mJaB5csOyPvQ;
        Expires=Sun, 26 Jan 2025 10:01:48 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      transfer-encoding:
      - chunked
      via:
      - 1.1 fly.io
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '900'
      x-ratelimit-remaining:
      - '850'
      x-ratelimit-reset:
      - '1737280910'
      x-user-id:
      - '4'
      x-xss-protection:
      - 1; mode=block
    http_version: HTTP/1.1
    status_code: 202
- request:
    body: '{"rid": "hc1tq-gq010"}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-length:
      - '22'
      content-profile:
      - public
      content-type:
      - application/json
      host:
      - zggonsjmmfozmfxlrjmg.supabase.co
      prefer:
      - return=representation
      user-agent:
      - python-httpx/0.27.2
      x-client-info:
      - supabase-py/2.11.0
    method: PATCH
    uri: https://zggonsjmmfozmfxlrjmg.supabase.co/rest/v1/posts?guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F
  response:
    content: "[{\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"title\":\"How
      to Translate a Hugo Blog Post with Babeldown\",\"summary\":\"<p>As part of our
      <a href=\\\"/multilingual-publishing/\\\">multilingual publishing project</a>,
      and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"image\":\"placeholder.png\",\"tags\":[\"Tech
      Notes\",\"Multilingual\"],\"language\":\"en\",\"authors\":[{\"url\": \"https://orcid.org/0000-0002-2815-0399\",
      \"name\": \"Ma\xEBlle Salmon\"}, {\"url\": \"https://orcid.org/0000-0002-4522-7466\",
      \"name\": \"Yanina Bellini Saibene\"}],\"doi\":\"https://doi.org/10.59350/evaf9-2qf48\",\"id\":\"78af77d1-72ba-4d9d-92aa-9dc258bbf00a\",\"reference\":[],\"updated_at\":1695713432,\"published_at\":1695686400,\"blog_name\":\"rOpenSci
      - open tools for open science\",\"indexed_at\":1731078596,\"indexed\":true,\"images\":[{\"alt\":
      \"Diagram with on the left the leaf folder in the new-post branch with the post
      in Spanish with the text 'Hola' and an image; on the right the leaf folder in
      the new-post branch with the post in Spanish with the text 'hola', the post
      with the English target filename with the text 'hola', and the image.\", \"src\":
      \"placeholder.png\"}, {\"alt\": \"Diagram with on the left the leaf folder in
      the auto-translate branch with the post in Spanish with the text 'hola', the
      post with the English target filename with the text 'hola', and the image; on
      the right the only thing that changed is that the content of the post with the
      English target filename is now 'hello'.\", \"src\": \"translate.png\"}, {\"alt\":
      \"Drawing of the pull request from the auto-translate to the new-post branch
      where the difference is that the content of the post with the English target
      filename has now been translated to English.\", \"src\": \"pr.png\"}, {\"alt\":
      \"Screenshot of the files tab of the pull request adding the automatic translation,
      where we observe Spanish text in the YAML metadata and Markdown content has
      been translated to English.\", \"src\": \"pr-diff.png\"}, {\"alt\": \"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word 'article' with 'blog post'
      and fixing the name of 'R-universe'.\", \"src\": \"pr-comments.png\"}],\"blog_slug\":\"ropensci\",\"content_text\":\"As
      part of our [multilingual publishing\\nproject](/multilingual-publishing/),
      and with [funding from the R\\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\\nwe've
      worked on the R package\\n[babeldown](https://docs.ropensci.org/babeldown/)
      for translating\\nMarkdown-based content using the DeepL API.In this tech note,
      we'll show\\nhow you can use babeldown to translate a Hugo blog post!\\n\\n##
      Motivation\\n\\nTranslating a Markdown blog post from your R console is not
      only more\\ncomfortable (when you've already written said blog post in R), but
      also\\nless frustrating.With babeldown, compared to copy-pasting the content
      of\\na blog post into some translation service, the Markdown syntax won't be\\nbroken^[1](#fn:1){.footnote-ref
      role=\\\"doc-noteref\\\"}^, and code chunks\\nwon't be translated.This works,
      because under the hood, babeldown uses\\n[tinkr](https://docs.ropensci.org/tinkr)
      to produce XML which it then\\nsends to the DeepL API, flagging some tags as
      not to be translated. It\\nthen converts the XML translated by DeepL back into
      Markdown again.\\n\\nNow, as you might expect this machine-translated content
      isn't perfect\\nyet!You will still need a human or two to review and amend the\\ntranslation.Why
      not have the humans translate the post from scratch\\nthen?We have observed
      that editing an automatic translation is faster\\nthan translating the whole
      post, and that it frees up mental space for\\nfocusing on implementing translation
      rules such as gender-neutral\\nphrasing.\\n\\n## Setup\\n\\n### Pre-requisites
      on the Hugo website\\n\\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\\nassumes
      the Hugo website uses\\n\\n- leaf bundles (each post in a folder,\\n  `content/path-to-leaf-bundle/index.md`);\\n-
      multilingualism so that a post in (for example) Spanish lives in\\n  `content/path-to-leaf-bundle/index.es.md`.\\n\\nbabeldown
      could be extended work with other Hugo multilingual setups. If\\nyou'd be interested
      in using babeldown with a different setup, please\\nopen an issue in the [babeldown\\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\\n\\nNote
      that babeldown won't be able to determine the default language of\\nyour website^[2](#fn:2){.footnote-ref
      role=\\\"doc-noteref\\\"}^ so even if\\nyour website's default language is English,
      babeldown will place an\\nEnglish translation in a file called \\\".en.md\\\"
      not \\\".md\\\".Hugo will\\nrecognize the new file all the same (at least in
      our setup).\\n\\n### DeepL pre-requisites\\n\\nFirst check that your desired
      source and target languages are supported\\nby the DeepL API!Look up the [docs
      of the `source_lang` and\\n`target_lang` API\\nparameters](https://www.deepl.com/docs-api/translate-text)
      for a full\\nlist.\\n\\nOnce you know you'll be able to take advantage of the
      DeepL API, you'll\\nneed to create an account for [DeepL's translation service\\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\\naccount requires registering a payment method with
      them.\\n\\n### R pre-requisites\\n\\nYou'll need to install babeldown from rOpenSci
      R-universe:\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ninstall.packages('babeldown',
      repos = c('https://ropensci.r-universe.dev', 'https://cloud.r-project.org'))\\n```\\n:::\\n\\nThen,
      in each R session, set your DeepL API key via the environment\\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\\nretrieve it in your scripts like so:\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\\\"deepl\\\"))\\n```\\n:::\\n\\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\\neach R session/script
      via\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(\\\"DEEPL_API_URL\\\"
      = \\\"https://api.deepl.com\\\")\\n```\\n:::\\n\\n## Translation!\\n\\nYou could
      run the code below\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ post_path = <path-to-post>,   source_lang = \\\"EN\\\",  target_lang = \\\"ES\\\",
      \ formality = \\\"less\\\" # that's how we roll here!)\\n```\\n:::\\n\\nbut
      we'd recommend a tad more work for your own good.\\n\\n## Translation using
      a Git/GitHub workflow\\n\\nIf you use version control, having the translation
      as a diff is very\\nhandy!\\n\\n### First: In words and pictures\\n\\n- In the
      branch of your post (let's call it \\\"new-post\\\") create a\\n  placeholder:
      save your original blog post (`index.es.md`) under the\\n  target blog post
      name (`index.en.md`) and commit it, then push.\\n\\n<figure>\\n<img src=\\\"placeholder.png\\\"\\nalt=\\\"Diagram
      with on the left the leaf folder in the new-post branch with the post in Spanish
      with the text &#39;Hola&#39; and an image; on the right the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;hola&#39;, the post
      with the English target filename with the text &#39;hola&#39;, and the image.\\\"
      />\\n</figure>\\n\\n- Create a new branch, \\\"auto-translate\\\" for instance.\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n<figure>\\n<img
      src=\\\"translate.png\\\"\\nalt=\\\"Diagram with on the left the leaf folder
      in the auto-translate branch with the post in Spanish with the text &#39;hola&#39;,
      the post with the English target filename with the text &#39;hola&#39;, and
      the image; on the right the only thing that changed is that the content of the
      post with the English target filename is now &#39;hello&#39;.\\\" />\\n</figure>\\n\\n-
      Commit and push the result.\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of your post. The diff for the
      target blog\\n  post will be the diff between the source and target languages!
      If you\\n  have the good habit to start a new line after each sentence / sentence\\n
      \ part, it's even better.\\n\\n<figure>\\n<img src=\\\"pr.png\\\"\\nalt=\\\"Drawing
      of the pull request from the auto-translate to the new-post branch where the
      difference is that the content of the post with the English target filename
      has now been translated to English.\\\" />\\n</figure>\\n\\n- The human translators
      can then a open a second PR to the translation\\n  branch with their edits!
      Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Again: In code\\n\\nNow let's go over this again, but with a coding workflow.
      Here, we'll\\nuse fs and gert (but you do you!), and we'll assume your current\\ndirectory
      is the root of the website folder, and also the root of the\\ngit repository.\\n\\n-
      In the post branch, (again, let's call it \\\"new-post\\\"), save your\\n  original
      blog post (`index.es.md`) under the target blog post name\\n  (`index.en.md`)
      and commit it, then push.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nfs::file_copy(
      \ file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.en.md\\\"))gert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation placeholder\\\")gert::git_push()\\n```\\n:::\\n\\n- Create a new
      branch, \\\"auto-translate\\\" for instance.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_branch_create(\\\"translation-tech-note\\\")\\n```\\n:::\\n\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(  post_path =
      file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\",
      \\\"tags\\\"),  source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\nYou
      can also omit the `post_path` argument if you're running the code\\nfrom RStudio
      IDE and if the open and focused file (the one you see above\\nyour console)
      is the post to be translated.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\", \\\"tags\\\"),
      \ source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\n-
      Commit the result with the code below.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation\\\")gert::git_push()\\n```\\n:::\\n\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of\\n  `\\\"content/blog/2023-10-01-r-universe-interviews/index.en.md\\\"`.\\n\\n-
      The human translators can then a open a *second* PR to the translation\\n  branch
      with their edits! Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Summary of branches and PRs\\n\\nIn the end there should be two to three branches:\\n\\n-
      branch A with blog post in Spanish and placeholder blog post for\\n  English
      (with Spanish content) -- PR to main;\\n- branch B with blog post automatically
      translated to English -- PR to\\n  branch A;\\n- Optionally branch C with blog
      post's English automatic translation\\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\\n  by a human are made as PR review suggestions
      in the PR from B to A.\\n\\nThe PR are merged in this order:\\n\\n- PR to branch
      B;\\n- PR to branch A;\\n- PR to main.\\n\\n### Real example\\n\\n- [PR adding
      a post to the rOpenSci\\n  blog](https://github.com/ropensci/roweb3/pull/629),
      notice it's a PR\\n  from the **\\\"r-universe-interviews\\\"** branch to the
      **\\\"main\\\"\\n  (default)** branch;\\n- [PR adding the automatic\\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it's\\n  a PR to the **\\\"r-universe-interviews\\\"** branch.\\n\\n<figure>\\n<img
      src=\\\"pr-diff.png\\\"\\nalt=\\\"Screenshot of the files tab of the pull request
      adding the automatic translation, where we observe Spanish text in the YAML
      metadata and Markdown content has been translated to English.\\\" />\\n</figure>\\n\\nYanina
      tweaked the automatic translation by suggesting changes on the\\nPR, then accepting
      them.\\n\\n<figure>\\n<img src=\\\"pr-comments.png\\\"\\nalt=\\\"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word &#39;article&#39; with &#39;blog
      post&#39; and fixing the name of &#39;R-universe&#39;.\\\" />\\n</figure>\\n\\n###
      YAML fields\\n\\nBy default babeldown translates the YAML fields \\\"title\\\"
      and\\n\\\"description\\\".If you have text in more of them, use the `yaml_fields`\\nargument
      of `babeldown::deepl_translate_hugo()`.\\n\\nNote that if babeldown translates
      the title, it updates the slug.\\n\\n### Glossary\\n\\nImagine you have a few
      preferences for some words -- something you'll\\nbuild up over time.\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nreadr::read_csv(  system.file(\\\"example-es-en.csv\\\",
      package = \\\"babeldown\\\"),   show_col_types = FALSE)\\n```\\n:::\\n\\n```
      {tabindex=\\\"0\\\"}\\n## # A tibble: 2 \xD7 2##   Spanish     English   ##
      \  <chr>       <chr>     ## 1 paquete     package   ## 2 repositorio repository\\n```\\n\\nYou
      can record these preferred translations in a glossary in your DeepL\\naccount\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ndeepl_upsert_glossary(  <path-to-csv-file>,
      \ glossary_name = \\\"rstats-glosario\\\",  target_lang = \\\"Spanish\\\",  source_lang
      = \\\"English\\\")\\n```\\n:::\\n\\nYou'd use the exact same code to *update*
      the glossary hence the name\\n\\\"upsert\\\" for the function.You need one glossary
      per source language /\\ntarget language pair: the English-Spanish glossary can't
      be used for\\nSpanish to English for instance.\\n\\nIn your `babeldown::deepl_translate_hugo()`
      call you then use the\\nglossary name (here \\\"rstats-glosario\\\") for the
      `glossary` argument.\\n\\n### Formality\\n\\n`deepl_translate_hugo()` has a
      `formality` argument.Now, the DeepL API\\nonly supports this for some languages
      as explained in the [documentation\\nof the `formality` API\\nparameter](https://www.deepl.com/docs-api/translate-text):\\n\\n>
      Sets whether the translated text should lean towards formal or\\n> informal
      language. This feature currently only works for target\\n> languages DE (German),
      FR (French), IT (Italian), ES (Spanish), NL\\n> (Dutch), PL (Polish), PT-BR
      and PT-PT (Portuguese), JA (Japanese), and\\n> RU (Russian). (...) Setting this
      parameter with a target language that\\n> does not support formality will fail,
      unless one of the prefer\\\\_...\\n> options are used.\\n\\nTherefore to be
      sure a translation will work, instead of writing\\n`formality = \\\"less\\\"`
      you can write `formality = \\\"prefer_less\\\"` which\\nwill only use formality
      if available.\\n\\n## Conclusion\\n\\nIn this post we explained how to translate
      a Hugo blog post using\\nbabeldown.Although the gist is to use one call to\\n`babeldown::deepl_translate_hugo()`,\\n\\n-
      one needs to indicate the API URL and key,\\n- one can improve results by using
      the function's different arguments,\\n- we recommend pairing the translation
      with a Git + GitHub (or GitLab,\\n  gitea...) workflow.\\n\\nbabeldown has\\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\\nfor
      translating Quarto book chapters, any Markdown file, and any\\nMarkdown string,
      with similar arguments and recommended usage, so\\nexplore its reference!\\n\\nWe'd
      be happy to hear about your [use cases](/usecases/).\\n\\n::: {.footnotes role=\\\"doc-endnotes\\\"}\\n\\n------------------------------------------------------------------------\\n\\n1.
      \ ::: {#fn:1}\\n    But you should refer to [tinkr\\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\\n    see what might change in the Markdown syntax\\n    style.\_[\u21A9\uFE0E](#fnref:1){.footnote-backref
      role=\\\"doc-backlink\\\"}\\n    :::\\n\\n2.  ::: {#fn:2}\\n    adding code
      to handle Hugo's [\\\"bewildering array of possible config\\n    locations\\\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\\n
      \   and two possible formats (YAML and TOML) is out of scope for\\n    babeldown
      at this point.\_[\u21A9\uFE0E](#fnref:2){.footnote-backref\\n    role=\\\"doc-backlink\\\"}\\n
      \   :::\\n:::\\n\",\"relationships\":[],\"archive_url\":null,\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"updated\":false,\"category\":null,\"abstract\":null,\"status\":\"active\",\"rid\":\"hc1tq-gq010\",\"has_content\":false,\"registered_at\":0}]"
    headers:
      access-control-allow-origin:
      - '*'
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 9045fc504d23f950-DUS
      content-encoding:
      - gzip
      content-profile:
      - public
      content-range:
      - 0-0/*
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 19 Jan 2025 10:01:48 GMT
      preference-applied:
      - return=representation
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - zggonsjmmfozmfxlrjmg
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-kong-proxy-latency:
      - '0'
      x-kong-upstream-latency:
      - '3'
    http_version: HTTP/2
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - application/vnd.pgrst.object+json
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-profile:
      - public
      host:
      - zggonsjmmfozmfxlrjmg.supabase.co
      user-agent:
      - python-httpx/0.28.1
      x-client-info:
      - supabase-py/2.12.0
    method: GET
    uri: https://zggonsjmmfozmfxlrjmg.supabase.co/rest/v1/posts?select=id%2Cguid%2Cdoi%2Curl%2Carchive_url%2Ctitle%2Csummary%2Cabstract%2Ccontent_text%2Cpublished_at%2Cupdated_at%2Cregistered_at%2Cindexed_at%2Cauthors%2Cimage%2Ctags%2Clanguage%2Creference%2Crelationships%2Cblog_name%2Cblog_slug%2Crid%2Cblog%3Ablogs%21inner%28%2A%29%2Ccitations%3Acitations%21inner%28citation%2Cunstructured%2Cvalidated%2Cupdated_at%2Cpublished_at%29&guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F
  response:
    content: '{"code":"PGRST116","details":"The result contains 0 rows","hint":null,"message":"JSON
      object requested, multiple (or no) rows returned"}'
    headers:
      access-control-allow-origin:
      - '*'
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 90f60a824b79cb2f-DUS
      content-type:
      - application/vnd.pgrst.object+json; charset=utf-8
      date:
      - Sun, 09 Feb 2025 18:49:44 GMT
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - zggonsjmmfozmfxlrjmg
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-kong-proxy-latency:
      - '0'
      x-kong-upstream-latency:
      - '6'
    http_version: HTTP/2
    status_code: 406
- request:
    body: ''
    headers:
      accept:
      - application/vnd.pgrst.object+json
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-profile:
      - public
      host:
      - zggonsjmmfozmfxlrjmg.supabase.co
      user-agent:
      - python-httpx/0.28.1
      x-client-info:
      - supabase-py/2.12.0
    method: GET
    uri: https://zggonsjmmfozmfxlrjmg.supabase.co/rest/v1/posts?select=id%2Cguid%2Cdoi%2Curl%2Carchive_url%2Ctitle%2Csummary%2Cabstract%2Ccontent_text%2Cpublished_at%2Cupdated_at%2Cregistered_at%2Cindexed_at%2Cauthors%2Cimage%2Ctags%2Clanguage%2Creference%2Crelationships%2Cblog_name%2Cblog_slug%2Crid%2Cblog%3Ablogs%21inner%28%2A%29&guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F
  response:
    content: "{\"id\":\"78af77d1-72ba-4d9d-92aa-9dc258bbf00a\",\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"doi\":\"https://doi.org/10.59350/evaf9-2qf48\",\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"archive_url\":null,\"title\":\"How
      to Translate a Hugo Blog Post with Babeldown\",\"summary\":\"<p>As part of our
      <a href=\\\"/multilingual-publishing/\\\">multilingual publishing project</a>,
      and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"abstract\":null,\"content_text\":\"As
      part of our [multilingual publishing\\nproject](/multilingual-publishing/),
      and with [funding from the R\\nConsortium](https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2),\\nwe've
      worked on the R package\\n[babeldown](https://docs.ropensci.org/babeldown/)
      for translating\\nMarkdown-based content using the DeepL API.In this tech note,
      we'll show\\nhow you can use babeldown to translate a Hugo blog post!\\n\\n##
      Motivation\\n\\nTranslating a Markdown blog post from your R console is not
      only more\\ncomfortable (when you've already written said blog post in R), but
      also\\nless frustrating.With babeldown, compared to copy-pasting the content
      of\\na blog post into some translation service, the Markdown syntax won't be\\nbroken^[1](#fn:1){.footnote-ref
      role=\\\"doc-noteref\\\"}^, and code chunks\\nwon't be translated.This works,
      because under the hood, babeldown uses\\n[tinkr](https://docs.ropensci.org/tinkr)
      to produce XML which it then\\nsends to the DeepL API, flagging some tags as
      not to be translated. It\\nthen converts the XML translated by DeepL back into
      Markdown again.\\n\\nNow, as you might expect this machine-translated content
      isn't perfect\\nyet!You will still need a human or two to review and amend the\\ntranslation.Why
      not have the humans translate the post from scratch\\nthen?We have observed
      that editing an automatic translation is faster\\nthan translating the whole
      post, and that it frees up mental space for\\nfocusing on implementing translation
      rules such as gender-neutral\\nphrasing.\\n\\n## Setup\\n\\n### Pre-requisites
      on the Hugo website\\n\\n[`babeldown::deepl_translate_hugo()`](https://docs.ropensci.org/babeldown/reference/deepl_translate_hugo.html)\\nassumes
      the Hugo website uses\\n\\n- leaf bundles (each post in a folder,\\n  `content/path-to-leaf-bundle/index.md`);\\n-
      multilingualism so that a post in (for example) Spanish lives in\\n  `content/path-to-leaf-bundle/index.es.md`.\\n\\nbabeldown
      could be extended work with other Hugo multilingual setups. If\\nyou'd be interested
      in using babeldown with a different setup, please\\nopen an issue in the [babeldown\\nrepository](https://github.com/ropensci-review-tools/babeldown/)!\\n\\nNote
      that babeldown won't be able to determine the default language of\\nyour website^[2](#fn:2){.footnote-ref
      role=\\\"doc-noteref\\\"}^ so even if\\nyour website's default language is English,
      babeldown will place an\\nEnglish translation in a file called \\\".en.md\\\"
      not \\\".md\\\".Hugo will\\nrecognize the new file all the same (at least in
      our setup).\\n\\n### DeepL pre-requisites\\n\\nFirst check that your desired
      source and target languages are supported\\nby the DeepL API!Look up the [docs
      of the `source_lang` and\\n`target_lang` API\\nparameters](https://www.deepl.com/docs-api/translate-text)
      for a full\\nlist.\\n\\nOnce you know you'll be able to take advantage of the
      DeepL API, you'll\\nneed to create an account for [DeepL's translation service\\nAPI](https://www.deepl.com/en/docs-api/).Note
      that even getting a free\\naccount requires registering a payment method with
      them.\\n\\n### R pre-requisites\\n\\nYou'll need to install babeldown from rOpenSci
      R-universe:\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ninstall.packages('babeldown',
      repos = c('https://ropensci.r-universe.dev', 'https://cloud.r-project.org'))\\n```\\n:::\\n\\nThen,
      in each R session, set your DeepL API key via the environment\\nvariable DEEPL_API_KEY.
      You could store it once and for all with the\\n[keyring](https://r-lib.github.io/keyring/index.html)
      package and\\nretrieve it in your scripts like so:\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(DEEPL_API_KEY = keyring::key_get(\\\"deepl\\\"))\\n```\\n:::\\n\\nLastly,
      the DeepL API URL depends on your API plan.babeldown uses the\\nDeepL free API
      URL by default.If you use a Pro plan, set the API URL in\\neach R session/script
      via\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nSys.setenv(\\\"DEEPL_API_URL\\\"
      = \\\"https://api.deepl.com\\\")\\n```\\n:::\\n\\n## Translation!\\n\\nYou could
      run the code below\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ post_path = <path-to-post>,   source_lang = \\\"EN\\\",  target_lang = \\\"ES\\\",
      \ formality = \\\"less\\\" # that's how we roll here!)\\n```\\n:::\\n\\nbut
      we'd recommend a tad more work for your own good.\\n\\n## Translation using
      a Git/GitHub workflow\\n\\nIf you use version control, having the translation
      as a diff is very\\nhandy!\\n\\n### First: In words and pictures\\n\\n- In the
      branch of your post (let's call it \\\"new-post\\\") create a\\n  placeholder:
      save your original blog post (`index.es.md`) under the\\n  target blog post
      name (`index.en.md`) and commit it, then push.\\n\\n<figure>\\n<img src=\\\"placeholder.png\\\"\\nalt=\\\"Diagram
      with on the left the leaf folder in the new-post branch with the post in Spanish
      with the text &#39;Hola&#39; and an image; on the right the leaf folder in the
      new-post branch with the post in Spanish with the text &#39;hola&#39;, the post
      with the English target filename with the text &#39;hola&#39;, and the image.\\\"
      />\\n</figure>\\n\\n- Create a new branch, \\\"auto-translate\\\" for instance.\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n<figure>\\n<img
      src=\\\"translate.png\\\"\\nalt=\\\"Diagram with on the left the leaf folder
      in the auto-translate branch with the post in Spanish with the text &#39;hola&#39;,
      the post with the English target filename with the text &#39;hola&#39;, and
      the image; on the right the only thing that changed is that the content of the
      post with the English target filename is now &#39;hello&#39;.\\\" />\\n</figure>\\n\\n-
      Commit and push the result.\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of your post. The diff for the
      target blog\\n  post will be the diff between the source and target languages!
      If you\\n  have the good habit to start a new line after each sentence / sentence\\n
      \ part, it's even better.\\n\\n<figure>\\n<img src=\\\"pr.png\\\"\\nalt=\\\"Drawing
      of the pull request from the auto-translate to the new-post branch where the
      difference is that the content of the post with the English target filename
      has now been translated to English.\\\" />\\n</figure>\\n\\n- The human translators
      can then a open a second PR to the translation\\n  branch with their edits!
      Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Again: In code\\n\\nNow let's go over this again, but with a coding workflow.
      Here, we'll\\nuse fs and gert (but you do you!), and we'll assume your current\\ndirectory
      is the root of the website folder, and also the root of the\\ngit repository.\\n\\n-
      In the post branch, (again, let's call it \\\"new-post\\\"), save your\\n  original
      blog post (`index.es.md`) under the target blog post name\\n  (`index.en.md`)
      and commit it, then push.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nfs::file_copy(
      \ file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.en.md\\\"))gert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation placeholder\\\")gert::git_push()\\n```\\n:::\\n\\n- Create a new
      branch, \\\"auto-translate\\\" for instance.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_branch_create(\\\"translation-tech-note\\\")\\n```\\n:::\\n\\n-
      Run `babeldown::deepl_translate_hugo()` with `force = TRUE`.\\n\\n::: {.highlight}\\n```
      {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(  post_path =
      file.path(\\\"content\\\", \\\"blog\\\", \\\"2023-10-01-r-universe-interviews\\\",
      \\\"index.es.md\\\"),  force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\",
      \\\"tags\\\"),  source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\nYou
      can also omit the `post_path` argument if you're running the code\\nfrom RStudio
      IDE and if the open and focused file (the one you see above\\nyour console)
      is the post to be translated.\\n\\n::: {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nbabeldown::deepl_translate_hugo(
      \ force = TRUE,  yaml_fields = c(\\\"title\\\", \\\"description\\\", \\\"tags\\\"),
      \ source_lang = \\\"ES\\\",  target_lang = \\\"EN-US\\\")\\n```\\n:::\\n\\n-
      Commit the result with the code below.\\n\\n::: {.highlight}\\n``` {.chroma
      tabindex=\\\"0\\\"}\\ngert::git_add(file.path(\\\"content\\\", \\\"blog\\\",
      \\\"2023-10-01-r-universe-interviews\\\", \\\"index.en.md\\\"))gert::git_commit(\\\"Add
      translation\\\")gert::git_push()\\n```\\n:::\\n\\n- Open a PR from the **\\\"translation-tech-note\\\"**
      branch to the\\n  **\\\"new-post\\\"** branch.The only difference between the
      two branches is\\n  the automatic translation of\\n  `\\\"content/blog/2023-10-01-r-universe-interviews/index.en.md\\\"`.\\n\\n-
      The human translators can then a open a *second* PR to the translation\\n  branch
      with their edits! Or they can add their edits as [PR\\n  suggestions](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/commenting-on-a-pull-request#adding-comments-to-a-pull-request).\\n\\n###
      Summary of branches and PRs\\n\\nIn the end there should be two to three branches:\\n\\n-
      branch A with blog post in Spanish and placeholder blog post for\\n  English
      (with Spanish content) -- PR to main;\\n- branch B with blog post automatically
      translated to English -- PR to\\n  branch A;\\n- Optionally branch C with blog
      post's English automatic translation\\n  edited by a human -- PR to branch B.
      If branch C does not exist, edits\\n  by a human are made as PR review suggestions
      in the PR from B to A.\\n\\nThe PR are merged in this order:\\n\\n- PR to branch
      B;\\n- PR to branch A;\\n- PR to main.\\n\\n### Real example\\n\\n- [PR adding
      a post to the rOpenSci\\n  blog](https://github.com/ropensci/roweb3/pull/629),
      notice it's a PR\\n  from the **\\\"r-universe-interviews\\\"** branch to the
      **\\\"main\\\"\\n  (default)** branch;\\n- [PR adding the automatic\\n  translation](https://github.com/ropensci/roweb3/pull/639),
      notice it's\\n  a PR to the **\\\"r-universe-interviews\\\"** branch.\\n\\n<figure>\\n<img
      src=\\\"pr-diff.png\\\"\\nalt=\\\"Screenshot of the files tab of the pull request
      adding the automatic translation, where we observe Spanish text in the YAML
      metadata and Markdown content has been translated to English.\\\" />\\n</figure>\\n\\nYanina
      tweaked the automatic translation by suggesting changes on the\\nPR, then accepting
      them.\\n\\n<figure>\\n<img src=\\\"pr-comments.png\\\"\\nalt=\\\"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word &#39;article&#39; with &#39;blog
      post&#39; and fixing the name of &#39;R-universe&#39;.\\\" />\\n</figure>\\n\\n###
      YAML fields\\n\\nBy default babeldown translates the YAML fields \\\"title\\\"
      and\\n\\\"description\\\".If you have text in more of them, use the `yaml_fields`\\nargument
      of `babeldown::deepl_translate_hugo()`.\\n\\nNote that if babeldown translates
      the title, it updates the slug.\\n\\n### Glossary\\n\\nImagine you have a few
      preferences for some words -- something you'll\\nbuild up over time.\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\nreadr::read_csv(  system.file(\\\"example-es-en.csv\\\",
      package = \\\"babeldown\\\"),   show_col_types = FALSE)\\n```\\n:::\\n\\n```
      {tabindex=\\\"0\\\"}\\n## # A tibble: 2 \xD7 2##   Spanish     English   ##
      \  <chr>       <chr>     ## 1 paquete     package   ## 2 repositorio repository\\n```\\n\\nYou
      can record these preferred translations in a glossary in your DeepL\\naccount\\n\\n:::
      {.highlight}\\n``` {.chroma tabindex=\\\"0\\\"}\\ndeepl_upsert_glossary(  <path-to-csv-file>,
      \ glossary_name = \\\"rstats-glosario\\\",  target_lang = \\\"Spanish\\\",  source_lang
      = \\\"English\\\")\\n```\\n:::\\n\\nYou'd use the exact same code to *update*
      the glossary hence the name\\n\\\"upsert\\\" for the function.You need one glossary
      per source language /\\ntarget language pair: the English-Spanish glossary can't
      be used for\\nSpanish to English for instance.\\n\\nIn your `babeldown::deepl_translate_hugo()`
      call you then use the\\nglossary name (here \\\"rstats-glosario\\\") for the
      `glossary` argument.\\n\\n### Formality\\n\\n`deepl_translate_hugo()` has a
      `formality` argument.Now, the DeepL API\\nonly supports this for some languages
      as explained in the [documentation\\nof the `formality` API\\nparameter](https://www.deepl.com/docs-api/translate-text):\\n\\n>
      Sets whether the translated text should lean towards formal or\\n> informal
      language. This feature currently only works for target\\n> languages DE (German),
      FR (French), IT (Italian), ES (Spanish), NL\\n> (Dutch), PL (Polish), PT-BR
      and PT-PT (Portuguese), JA (Japanese), and\\n> RU (Russian). (...) Setting this
      parameter with a target language that\\n> does not support formality will fail,
      unless one of the prefer\\\\_...\\n> options are used.\\n\\nTherefore to be
      sure a translation will work, instead of writing\\n`formality = \\\"less\\\"`
      you can write `formality = \\\"prefer_less\\\"` which\\nwill only use formality
      if available.\\n\\n## Conclusion\\n\\nIn this post we explained how to translate
      a Hugo blog post using\\nbabeldown.Although the gist is to use one call to\\n`babeldown::deepl_translate_hugo()`,\\n\\n-
      one needs to indicate the API URL and key,\\n- one can improve results by using
      the function's different arguments,\\n- we recommend pairing the translation
      with a Git + GitHub (or GitLab,\\n  gitea...) workflow.\\n\\nbabeldown has\\n[functions](https://docs.ropensci.org/babeldown/reference/index.html)\\nfor
      translating Quarto book chapters, any Markdown file, and any\\nMarkdown string,
      with similar arguments and recommended usage, so\\nexplore its reference!\\n\\nWe'd
      be happy to hear about your [use cases](/usecases/).\\n\\n::: {.footnotes role=\\\"doc-endnotes\\\"}\\n\\n------------------------------------------------------------------------\\n\\n1.
      \ ::: {#fn:1}\\n    But you should refer to [tinkr\\n    docs](https://docs.ropensci.org/tinkr/#loss-of-markdown-style)
      to\\n    see what might change in the Markdown syntax\\n    style.\_[\u21A9\uFE0E](#fnref:1){.footnote-backref
      role=\\\"doc-backlink\\\"}\\n    :::\\n\\n2.  ::: {#fn:2}\\n    adding code
      to handle Hugo's [\\\"bewildering array of possible config\\n    locations\\\"](https://github.com/r-lib/hugodown/issues/14#issuecomment-632850506)\\n
      \   and two possible formats (YAML and TOML) is out of scope for\\n    babeldown
      at this point.\_[\u21A9\uFE0E](#fnref:2){.footnote-backref\\n    role=\\\"doc-backlink\\\"}\\n
      \   :::\\n:::\\n\",\"published_at\":1695686400,\"updated_at\":1695713432,\"registered_at\":0,\"indexed_at\":1731078596,\"authors\":[{\"url\":
      \"https://orcid.org/0000-0002-2815-0399\", \"name\": \"Ma\xEBlle Salmon\"},
      {\"url\": \"https://orcid.org/0000-0002-4522-7466\", \"name\": \"Yanina Bellini
      Saibene\"}],\"image\":\"placeholder.png\",\"tags\":[\"Tech Notes\",\"Multilingual\"],\"language\":\"en\",\"reference\":[],\"relationships\":[],\"blog_name\":\"rOpenSci
      - open tools for open science\",\"blog_slug\":\"ropensci\",\"rid\":\"hc1tq-gq010\",\"blog\":{\"id\":
      \"ba402233-14af-48e4-b8b1-6fd22ac75a0c\", \"ror\": null, \"issn\": null, \"slug\":
      \"ropensci\", \"title\": \"rOpenSci - open tools for open science\", \"filter\":
      null, \"prefix\": \"10.59350\", \"secure\": true, \"status\": \"active\", \"authors\":
      [{\"name\": \"The rOpenSci Team\"}], \"favicon\": \"https://ropensci.org/apple-touch-icon.png\",
      \"funding\": null, \"indexed\": false, \"license\": \"https://creativecommons.org/licenses/by/4.0/legalcode\",
      \"use_api\": null, \"user_id\": \"3ea9676b-41b6-4e57-aeda-44a7d7fe1dba\", \"category\":
      \"computerAndInformationSciences\", \"feed_url\": \"https://ropensci.org/blog/index.json\",
      \"language\": \"en\", \"mastodon\": null, \"generator\": \"Hugo\", \"created_at\":
      1693440000, \"updated_at\": 1738768684, \"description\": \"Open Tools and R
      Packages for Open Science\", \"doi_as_guid\": false, \"feed_format\": \"application/feed+json\",
      \"community_id\": \"1e70f18f-d85d-4b86-af0c-0dc375b091bc\", \"relative_url\":
      null, \"use_mastodon\": false, \"canonical_url\": null, \"generator_raw\": \"Hugo
      -- gohugo.io\", \"home_page_url\": \"https://ropensci.org/blog\", \"registered_at\":
      1729793201, \"archive_prefix\": \"https://wayback.archive-it.org/22126/20231105110646/\",
      \"current_feed_url\": null}}"
    headers:
      access-control-allow-origin:
      - '*'
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 90f60a82ec46cb2f-DUS
      content-location:
      - /posts?guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F&select=id%2Cguid%2Cdoi%2Curl%2Carchive_url%2Ctitle%2Csummary%2Cabstract%2Ccontent_text%2Cpublished_at%2Cupdated_at%2Cregistered_at%2Cindexed_at%2Cauthors%2Cimage%2Ctags%2Clanguage%2Creference%2Crelationships%2Cblog_name%2Cblog_slug%2Crid%2Cblog%3Ablogs%21inner%28%2A%29
      content-profile:
      - public
      content-range:
      - 0-0/*
      content-type:
      - application/vnd.pgrst.object+json; charset=utf-8
      date:
      - Sun, 09 Feb 2025 18:49:44 GMT
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - zggonsjmmfozmfxlrjmg
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-kong-proxy-latency:
      - '0'
      x-kong-upstream-latency:
      - '5'
    http_version: HTTP/2
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      connection:
      - keep-alive
      host:
      - rogue-scholar.org
      user-agent:
      - python-httpx/0.28.1
    method: GET
    uri: 'https://rogue-scholar.org/api/communities?q=slug:'
  response:
    content: '{"hits": {"hits": [], "total": 0}, "aggregations": {"type": {"buckets":
      [], "label": "Type"}, "visibility": {"buckets": [], "label": "Visibility"}},
      "sortBy": "bestmatch", "links": {"self": "https://rogue-scholar.org/api/communities?page=1&q=slug%3A&size=25&sort=bestmatch"}}'
    headers:
      connection:
      - close
      content-encoding:
      - br
      content-security-policy:
      - 'default-src ''self'' data: ''unsafe-inline'' blob: fly.storage.tigris.dev;
        img-src *'
      content-type:
      - application/json
      date:
      - Sun, 09 Feb 2025 18:49:53 GMT
      fly-request-id:
      - 01JKP0QVZFME71WJRDSH90HK9Z-arn
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '59'
      server:
      - Fly/1ab217aa (2025-02-07)
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      transfer-encoding:
      - chunked
      via:
      - 1.1 fly.io
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '900'
      x-ratelimit-remaining:
      - '899'
      x-ratelimit-reset:
      - '1739127053'
      x-user-id:
      - '4'
      x-xss-protection:
      - 1; mode=block
    http_version: HTTP/1.1
    status_code: 200
- request:
    body: "{\"authors\":[{\"name\":\"Ma\xEBlle Salmon\",\"url\":\"https://orcid.org/0000-0002-2815-0399\"},{\"name\":\"Yanina
      Bellini Saibene\",\"url\":\"https://orcid.org/0000-0002-4522-7466\"}],\"blog_name\":\"rOpenSci
      - open tools for open science\",\"blog_slug\":\"ropensci\",\"content_html\":\"\",\"images\":[{\"src\":\"placeholder.png\",\"alt\":\"Diagram
      with on the left the leaf folder in the new-post branch with the post in Spanish
      with the text 'Hola' and an image; on the right the leaf folder in the new-post
      branch with the post in Spanish with the text 'hola', the post with the English
      target filename with the text 'hola', and the image.\"},{\"src\":\"translate.png\",\"alt\":\"Diagram
      with on the left the leaf folder in the auto-translate branch with the post
      in Spanish with the text 'hola', the post with the English target filename with
      the text 'hola', and the image; on the right the only thing that changed is
      that the content of the post with the English target filename is now 'hello'.\"},{\"src\":\"pr.png\",\"alt\":\"Drawing
      of the pull request from the auto-translate to the new-post branch where the
      difference is that the content of the post with the English target filename
      has now been translated to English.\"},{\"src\":\"pr-diff.png\",\"alt\":\"Screenshot
      of the files tab of the pull request adding the automatic translation, where
      we observe Spanish text in the YAML metadata and Markdown content has been translated
      to English.\"},{\"src\":\"pr-comments.png\",\"alt\":\"Screenshot of the main
      tab of the pull request adding the automatic translation, where we observe a
      comment by Yanina replacing the word 'article' with 'blog post' and fixing the
      name of 'R-universe'.\"}],\"updated_at\":1695713432,\"registered_at\":0,\"published_at\":1695686400,\"image\":\"placeholder.png\",\"language\":\"en\",\"category\":null,\"reference\":[],\"relationships\":[],\"funding_references\":null,\"summary\":\"<p>As
      part of our <a href=\\\"/multilingual-publishing/\\\">multilingual publishing
      project</a>, and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"abstract\":null,\"tags\":[\"Tech
      Notes\",\"Multilingual\"],\"title\":\"How to Translate a Hugo Blog Post with
      Babeldown\",\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"status\":\"active\",\"archive_url\":null}"
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-length:
      - '2638'
      content-profile:
      - public
      content-type:
      - application/json
      cookie:
      - __cf_bm=WooOR0w4hY4sV1mRQY8tbycg0A3_uIqpiIYSr1ekQYI-1754422859-1.0.1.1-Z9PWADFy4f8JwrfuqWvZT1G.p5v3ezWBJugvPkMZIZFNWgd6MXhb_o1Xd9AvqIk9YsZneDEKBnvyrDjbO0rNmmB0MZ3Of..U2B4BZhlIAtc
      host:
      - bosczcmeodcrajtcaddf.supabase.co
      prefer:
      - return=representation,resolution=merge-duplicates
      user-agent:
      - python-httpx/0.28.1
      x-client-info:
      - supabase-py/2.17.0
    method: POST
    uri: https://bosczcmeodcrajtcaddf.supabase.co/rest/v1/posts?on_conflict=guid
  response:
    content: "[{\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"title\":\"How
      to Translate a Hugo Blog Post with Babeldown\",\"summary\":\"<p>As part of our
      <a href=\\\"/multilingual-publishing/\\\">multilingual publishing project</a>,
      and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"image\":\"placeholder.png\",\"tags\":[\"Tech
      Notes\",\"Multilingual\"],\"language\":\"en\",\"authors\":[{\"url\": \"https://orcid.org/0000-0002-2815-0399\",
      \"name\": \"Ma\xEBlle Salmon\"}, {\"url\": \"https://orcid.org/0000-0002-4522-7466\",
      \"name\": \"Yanina Bellini Saibene\"}],\"doi\":null,\"id\":\"5cc085ac-768b-47cc-8f4f-c5474a97ecf5\",\"reference\":[],\"updated_at\":1695713432,\"published_at\":1695686400,\"blog_name\":\"rOpenSci
      - open tools for open science\",\"indexed_at\":0,\"indexed\":true,\"images\":[{\"alt\":
      \"Diagram with on the left the leaf folder in the new-post branch with the post
      in Spanish with the text 'Hola' and an image; on the right the leaf folder in
      the new-post branch with the post in Spanish with the text 'hola', the post
      with the English target filename with the text 'hola', and the image.\", \"src\":
      \"placeholder.png\"}, {\"alt\": \"Diagram with on the left the leaf folder in
      the auto-translate branch with the post in Spanish with the text 'hola', the
      post with the English target filename with the text 'hola', and the image; on
      the right the only thing that changed is that the content of the post with the
      English target filename is now 'hello'.\", \"src\": \"translate.png\"}, {\"alt\":
      \"Drawing of the pull request from the auto-translate to the new-post branch
      where the difference is that the content of the post with the English target
      filename has now been translated to English.\", \"src\": \"pr.png\"}, {\"alt\":
      \"Screenshot of the files tab of the pull request adding the automatic translation,
      where we observe Spanish text in the YAML metadata and Markdown content has
      been translated to English.\", \"src\": \"pr-diff.png\"}, {\"alt\": \"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word 'article' with 'blog post'
      and fixing the name of 'R-universe'.\", \"src\": \"pr-comments.png\"}],\"blog_slug\":\"ropensci\",\"relationships\":[],\"archive_url\":null,\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"updated\":true,\"category\":null,\"abstract\":null,\"status\":\"active\",\"rid\":null,\"has_content\":false,\"registered_at\":0,\"archived\":false,\"funding_references\":null,\"version\":null,\"parent_doi\":null,\"content_html\":\"\",\"registered\":true}]"
    headers:
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 96a8cb1abb77098f-FRA
      content-encoding:
      - gzip
      content-profile:
      - public
      content-range:
      - '*/*'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 05 Aug 2025 19:45:10 GMT
      preference-applied:
      - resolution=merge-duplicates, return=representation
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - bosczcmeodcrajtcaddf
      sb-request-id:
      - 01987bc4-2cbb-7717-8cac-7670584f8619
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-envoy-attempt-count:
      - '1'
      x-envoy-upstream-service-time:
      - '3'
    http_version: HTTP/2
    status_code: 201
- request:
    body: '{"indexed":false}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-length:
      - '17'
      content-profile:
      - public
      content-type:
      - application/json
      cookie:
      - __cf_bm=WooOR0w4hY4sV1mRQY8tbycg0A3_uIqpiIYSr1ekQYI-1754422859-1.0.1.1-Z9PWADFy4f8JwrfuqWvZT1G.p5v3ezWBJugvPkMZIZFNWgd6MXhb_o1Xd9AvqIk9YsZneDEKBnvyrDjbO0rNmmB0MZ3Of..U2B4BZhlIAtc
      host:
      - bosczcmeodcrajtcaddf.supabase.co
      prefer:
      - return=representation
      user-agent:
      - python-httpx/0.28.1
      x-client-info:
      - supabase-py/2.17.0
    method: PATCH
    uri: https://bosczcmeodcrajtcaddf.supabase.co/rest/v1/posts?id=eq.5cc085ac-768b-47cc-8f4f-c5474a97ecf5
  response:
    content: "[{\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"title\":\"How
      to Translate a Hugo Blog Post with Babeldown\",\"summary\":\"<p>As part of our
      <a href=\\\"/multilingual-publishing/\\\">multilingual publishing project</a>,
      and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"image\":\"placeholder.png\",\"tags\":[\"Tech
      Notes\",\"Multilingual\"],\"language\":\"en\",\"authors\":[{\"url\": \"https://orcid.org/0000-0002-2815-0399\",
      \"name\": \"Ma\xEBlle Salmon\"}, {\"url\": \"https://orcid.org/0000-0002-4522-7466\",
      \"name\": \"Yanina Bellini Saibene\"}],\"doi\":null,\"id\":\"5cc085ac-768b-47cc-8f4f-c5474a97ecf5\",\"reference\":[],\"updated_at\":1695713432,\"published_at\":1695686400,\"blog_name\":\"rOpenSci
      - open tools for open science\",\"indexed_at\":0,\"indexed\":false,\"images\":[{\"alt\":
      \"Diagram with on the left the leaf folder in the new-post branch with the post
      in Spanish with the text 'Hola' and an image; on the right the leaf folder in
      the new-post branch with the post in Spanish with the text 'hola', the post
      with the English target filename with the text 'hola', and the image.\", \"src\":
      \"placeholder.png\"}, {\"alt\": \"Diagram with on the left the leaf folder in
      the auto-translate branch with the post in Spanish with the text 'hola', the
      post with the English target filename with the text 'hola', and the image; on
      the right the only thing that changed is that the content of the post with the
      English target filename is now 'hello'.\", \"src\": \"translate.png\"}, {\"alt\":
      \"Drawing of the pull request from the auto-translate to the new-post branch
      where the difference is that the content of the post with the English target
      filename has now been translated to English.\", \"src\": \"pr.png\"}, {\"alt\":
      \"Screenshot of the files tab of the pull request adding the automatic translation,
      where we observe Spanish text in the YAML metadata and Markdown content has
      been translated to English.\", \"src\": \"pr-diff.png\"}, {\"alt\": \"Screenshot
      of the main tab of the pull request adding the automatic translation, where
      we observe a comment by Yanina replacing the word 'article' with 'blog post'
      and fixing the name of 'R-universe'.\", \"src\": \"pr-comments.png\"}],\"blog_slug\":\"ropensci\",\"relationships\":[],\"archive_url\":null,\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"updated\":true,\"category\":null,\"abstract\":null,\"status\":\"active\",\"rid\":null,\"has_content\":false,\"registered_at\":0,\"archived\":false,\"funding_references\":null,\"version\":null,\"parent_doi\":null,\"content_html\":\"\",\"registered\":true}]"
    headers:
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 96a8cb1b0c13098f-FRA
      content-encoding:
      - gzip
      content-profile:
      - public
      content-range:
      - 0-0/*
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 05 Aug 2025 19:45:10 GMT
      preference-applied:
      - return=representation
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - bosczcmeodcrajtcaddf
      sb-request-id:
      - 01987bc4-2ced-7e1f-af0c-fb2a6a3830da
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-envoy-attempt-count:
      - '1'
      x-envoy-upstream-service-time:
      - '3'
    http_version: HTTP/2
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - application/vnd.pgrst.object+json
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-profile:
      - public
      cookie:
      - __cf_bm=oSo220hO1pEdLL0JHHMUXC7T1juQdEvhcR6HRP6amag-1754422840-1.0.1.1-aXIb03vJ.GaKi0NR4L.pki54dDA1mat0hWn8SRMKMGLmkpoUxptfn5iiD9FQ_cZt3.6dfCu0yK2m17.A8dv10SVmmyOtkXpwL9TtCvOMYVk
      host:
      - bosczcmeodcrajtcaddf.supabase.co
      user-agent:
      - python-httpx/0.28.1
      x-client-info:
      - supabase-py/2.17.0
    method: GET
    uri: https://bosczcmeodcrajtcaddf.supabase.co/rest/v1/posts?select=id%2Cguid%2Cdoi%2Cparent_doi%2Curl%2Carchive_url%2Ctitle%2Csummary%2Cabstract%2Ccontent_html%2Cpublished_at%2Cupdated_at%2Cregistered_at%2Cindexed_at%2Cauthors%2Cimage%2Ctags%2Clanguage%2Creference%2Crelationships%2Cfunding_references%2Cblog_name%2Cblog_slug%2Crid%2Cversion%2Cblog%3Ablogs%21inner%28%2A%29%2Ccitations%3Acitations%21inner%28citation%2Cunstructured%2Cvalidated%2Cupdated_at%2Cpublished_at%29&guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F
  response:
    content: '{"code":"PGRST116","details":"The result contains 0 rows","hint":null,"message":"JSON
      object requested, multiple (or no) rows returned"}'
    headers:
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 96a8cb1b5a351965-FRA
      content-encoding:
      - gzip
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 05 Aug 2025 19:45:10 GMT
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - bosczcmeodcrajtcaddf
      sb-request-id:
      - 01987bc4-2d23-739e-8880-c4ee53e5ab14
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-envoy-attempt-count:
      - '1'
      x-envoy-upstream-service-time:
      - '8'
    http_version: HTTP/2
    status_code: 406
- request:
    body: ''
    headers:
      accept:
      - application/vnd.pgrst.object+json
      accept-encoding:
      - gzip, deflate, br
      accept-profile:
      - public
      connection:
      - keep-alive
      content-profile:
      - public
      cookie:
      - __cf_bm=oSo220hO1pEdLL0JHHMUXC7T1juQdEvhcR6HRP6amag-1754422840-1.0.1.1-aXIb03vJ.GaKi0NR4L.pki54dDA1mat0hWn8SRMKMGLmkpoUxptfn5iiD9FQ_cZt3.6dfCu0yK2m17.A8dv10SVmmyOtkXpwL9TtCvOMYVk
      host:
      - bosczcmeodcrajtcaddf.supabase.co
      user-agent:
      - python-httpx/0.28.1
      x-client-info:
      - supabase-py/2.17.0
    method: GET
    uri: https://bosczcmeodcrajtcaddf.supabase.co/rest/v1/posts?select=id%2Cguid%2Cdoi%2Cparent_doi%2Curl%2Carchive_url%2Ctitle%2Csummary%2Cabstract%2Ccontent_html%2Cpublished_at%2Cupdated_at%2Cregistered_at%2Cindexed_at%2Cauthors%2Cimage%2Ctags%2Clanguage%2Creference%2Crelationships%2Cfunding_references%2Cblog_name%2Cblog_slug%2Crid%2Cversion%2Cblog%3Ablogs%21inner%28%2A%29&guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F
  response:
    content: "{\"id\":\"5cc085ac-768b-47cc-8f4f-c5474a97ecf5\",\"guid\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown/\",\"doi\":null,\"parent_doi\":null,\"url\":\"https://ropensci.org/blog/2023/09/26/how-to-translate-a-hugo-blog-post-with-babeldown\",\"archive_url\":null,\"title\":\"How
      to Translate a Hugo Blog Post with Babeldown\",\"summary\":\"<p>As part of our
      <a href=\\\"/multilingual-publishing/\\\">multilingual publishing project</a>,
      and with <a href=\\\"https://www.r-consortium.org/all-projects/awarded-projects/2022-group-2\\\">funding
      from the R Consortium</a>, we&rsquo;ve worked on the R package <a href=\\\"https://docs.ropensci.org/babeldown/\\\">babeldown</a>
      for translating Markdown-based content using the DeepL API.In this tech note,
      we&rsquo;ll show how you can use babeldown to translate a Hugo blog post!\",\"abstract\":null,\"content_html\":\"\",\"published_at\":1695686400,\"updated_at\":1695713432,\"registered_at\":0,\"indexed_at\":0,\"authors\":[{\"url\":
      \"https://orcid.org/0000-0002-2815-0399\", \"name\": \"Ma\xEBlle Salmon\"},
      {\"url\": \"https://orcid.org/0000-0002-4522-7466\", \"name\": \"Yanina Bellini
      Saibene\"}],\"image\":\"placeholder.png\",\"tags\":[\"Tech Notes\",\"Multilingual\"],\"language\":\"en\",\"reference\":[],\"relationships\":[],\"funding_references\":null,\"blog_name\":\"rOpenSci
      - open tools for open science\",\"blog_slug\":\"ropensci\",\"rid\":null,\"version\":null,\"blog\":{\"id\":
      \"ba402233-14af-48e4-b8b1-6fd22ac75a0c\", \"ror\": null, \"issn\": null, \"slug\":
      \"ropensci\", \"title\": \"rOpenSci - open tools for open science\", \"filter\":
      null, \"prefix\": \"10.59350\", \"secure\": true, \"status\": \"active\", \"authors\":
      [{\"name\": \"The rOpenSci Team\"}], \"doi_reg\": true, \"favicon\": \"https://rogue-scholar.org/api/communities/19c501a7-647b-4a11-9f5e-cf400817cce3/logo\",
      \"funding\": null, \"indexed\": false, \"license\": \"https://creativecommons.org/licenses/by/4.0/legalcode\",
      \"use_api\": null, \"user_id\": \"3ea9676b-41b6-4e57-aeda-44a7d7fe1dba\", \"category\":
      \"computerAndInformationSciences\", \"feed_url\": \"https://ropensci.org/blog/index.json\",
      \"language\": \"en\", \"mastodon\": null, \"generator\": \"Hugo\", \"created_at\":
      1693440000, \"updated_at\": 1753256479, \"description\": \"Open Tools and R
      Packages for Open Science\", \"doi_as_guid\": false, \"feed_format\": \"application/feed+json\",
      \"archive_host\": null, \"community_id\": \"1e70f18f-d85d-4b86-af0c-0dc375b091bc\",
      \"relative_url\": null, \"use_mastodon\": false, \"canonical_url\": null, \"generator_raw\":
      \"Hugo -- gohugo.io\", \"home_page_url\": \"https://ropensci.org/blog\", \"registered_at\":
      1729793201, \"archive_prefix\": \"https://wayback.archive-it.org/22126/20231105110646/\",
      \"current_feed_url\": null, \"archive_collection\": 22126, \"archive_timestamps\":
      [20231105110646, 20240505190836, 20241105110650, 20250505110723]}}"
    headers:
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      cf-ray:
      - 96a8cb1bca8d1965-FRA
      content-encoding:
      - gzip
      content-location:
      - /posts?guid=eq.https%3A%2F%2Fropensci.org%2Fblog%2F2023%2F09%2F26%2Fhow-to-translate-a-hugo-blog-post-with-babeldown%2F&select=id%2Cguid%2Cdoi%2Cparent_doi%2Curl%2Carchive_url%2Ctitle%2Csummary%2Cabstract%2Ccontent_html%2Cpublished_at%2Cupdated_at%2Cregistered_at%2Cindexed_at%2Cauthors%2Cimage%2Ctags%2Clanguage%2Creference%2Crelationships%2Cfunding_references%2Cblog_name%2Cblog_slug%2Crid%2Cversion%2Cblog%3Ablogs%21inner%28%2A%29
      content-profile:
      - public
      content-range:
      - 0-0/*
      content-type:
      - application/vnd.pgrst.object+json; charset=utf-8
      date:
      - Tue, 05 Aug 2025 19:45:11 GMT
      sb-gateway-version:
      - '1'
      sb-project-ref:
      - bosczcmeodcrajtcaddf
      sb-request-id:
      - 01987bc4-2d6a-74e9-92e3-d2e42ad5267e
      server:
      - cloudflare
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-envoy-attempt-count:
      - '1'
      x-envoy-upstream-service-time:
      - '6'
    http_version: HTTP/2
    status_code: 200
version: 1
